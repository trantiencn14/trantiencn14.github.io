!function(){var e=void 0,t=void 0;!function e(n,r,i){function o(a,u){if(!r[a]){if(!n[a]){var c="function"==typeof t&&t;if(!u&&c)return c(a,!0);if(s)return s(a,!0);var f=new Error("Cannot find module '"+a+"'");throw f.code="MODULE_NOT_FOUND",f}var l=r[a]={exports:{}};n[a][0].call(l.exports,function(e){var t=n[a][1][e];return o(t?t:e)},l,l.exports,e,n,r,i)}return r[a].exports}for(var s="function"==typeof t&&t,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(e,t,n){"use strict";function r(){var e=a(),t=u(),n=s(e+t.toString()),r=n.substr(0,4),o=n.substr(4);e=e.substr(0,19)+r+"-"+o;var c=i(),f=s(t.origin),l=[h.USERREPORT,c,f].join("."),g=s(e+l+p);return[d,g,e,l].join(".")}function i(){var e=(new Date).getTime()-new Date(2019,0,1).getTime(),t=Math.floor(e/864e5);return t}function o(){return Math.round((new Date).getTime()/1e3)}var s=e("./hash"),a=e("./uuid"),u=e("./location"),c="apr_dsu",f=c+"_ttl",l=31536e3,d="1",p="YicAu6ZpNG",h={USERREPORT:"1"};t.exports={generateDsu:r,getDsuNow:i,getDsuAge:function(){try{var e=window.localStorage.getItem(c),t=e.split("."),n=t[t.length-2];return+n}catch(e){return i()}},readOrCreateDsu:function(e){var t,n;try{t=window.localStorage.getItem(c),n=window.localStorage.getItem(f)}catch(e){return null}(!t||e&&n&&n<o())&&(t=r());try{window.localStorage.setItem(c,t),e&&window.localStorage.setItem(f,o()+l),t=window.localStorage.getItem(c)}catch(e){return null}return t}}},{"./hash":2,"./location":3,"./uuid":4}],2:[function(e,t,n){"use strict";var r=e("siphash"),i=[2251905623,1801168887,1769155591,711914637];t.exports=r.hash_hex.bind(null,i)},{siphash:14}],3:[function(e,t,n){"use strict";function r(e){var t=0!==e.indexOf("/")&&e.indexOf("/")!==-1&&(e.indexOf(":")===-1||e.indexOf(":")>e.indexOf("/")),n=o.exec(t?"noscheme://"+e:e),r={scheme:t?"":n[2]||"",host:n[4]||"",hostname:n[4]?n[4].split(":")[0]:"",pathname:n[5]||"",search:n[7]||"",hash:n[9]||"",toString:function(){return e}};return r.origin=r.scheme+"://"+r.host,r}function i(){var e=s||window.location.toString();if(e=e.replace(/\.demo\.audienceproject\.com\//,"/"),a.url===e)return a.parsed;var t=r(e);return a.url=e,a.parsed=t,t}var o=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),s=null,a={};t.exports=i,t.exports.onLocationChange=function(e){var t=i().pathname,n=setInterval(function(){var n=i().pathname;n!==t&&(t=n,e(n))},100);return function(){clearInterval(n)}},t.exports.updateLocation=function(e){r(e),s=e},t.exports.parse=r},{}],4:[function(e,t,n){"use strict";function r(){var e=new Uint32Array(4);crypto.getRandomValues(e);var t=-1;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){t++;var r=e[t>>3]>>t%8*4&15,i="x"===n?r:3&r|8;return i.toString(16)})}function i(){var e=(new Date).getTime();return"undefined"!=typeof performance&&"function"==typeof performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)})}var o="function"==typeof Uint32Array&&"undefined"!=typeof crypto&&"undefined"!=typeof crypto.getRandomValues,s=o?r:i;t.exports=s},{}],5:[function(e,t,n){"use strict";var r=e("promise-polyfill");r.prototype.finally=function(e){var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){throw n})})},t.exports=r},{"promise-polyfill":12}],6:[function(e,t,n){"use strict";function r(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function i(e){return 3*e.length/4-r(e)}function o(e){var t,n,i,o,s,a,u=e.length;s=r(e),a=new l(3*u/4-s),i=s>0?u-4:u;var c=0;for(t=0,n=0;t<i;t+=4,n+=3)o=f[e.charCodeAt(t)]<<18|f[e.charCodeAt(t+1)]<<12|f[e.charCodeAt(t+2)]<<6|f[e.charCodeAt(t+3)],a[c++]=o>>16&255,a[c++]=o>>8&255,a[c++]=255&o;return 2===s?(o=f[e.charCodeAt(t)]<<2|f[e.charCodeAt(t+1)]>>4,a[c++]=255&o):1===s&&(o=f[e.charCodeAt(t)]<<10|f[e.charCodeAt(t+1)]<<4|f[e.charCodeAt(t+2)]>>2,a[c++]=o>>8&255,a[c++]=255&o),a}function s(e){return c[e>>18&63]+c[e>>12&63]+c[e>>6&63]+c[63&e]}function a(e,t,n){for(var r,i=[],o=t;o<n;o+=3)r=(e[o]<<16)+(e[o+1]<<8)+e[o+2],i.push(s(r));return i.join("")}function u(e){for(var t,n=e.length,r=n%3,i="",o=[],s=16383,u=0,f=n-r;u<f;u+=s)o.push(a(e,u,u+s>f?f:u+s));return 1===r?(t=e[n-1],i+=c[t>>2],i+=c[t<<4&63],i+="=="):2===r&&(t=(e[n-2]<<8)+e[n-1],i+=c[t>>10],i+=c[t>>4&63],i+=c[t<<2&63],i+="="),o.push(i),o.join("")}n.byteLength=i,n.toByteArray=o,n.fromByteArray=u;for(var c=[],f=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=0,h=d.length;p<h;++p)c[p]=d[p],f[d.charCodeAt(p)]=p;f["-".charCodeAt(0)]=62,f["_".charCodeAt(0)]=63},{}],7:[function(e,t,n){(function(t){"use strict";function r(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}function i(){return s.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e,t){if(i()<t)throw new RangeError("Invalid typed array length");return s.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=s.prototype):(null===e&&(e=new s(t)),e.length=t),e}function s(e,t,n){if(!(s.TYPED_ARRAY_SUPPORT||this instanceof s))return new s(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return f(this,e)}return a(this,e,t,n)}function a(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?p(e,t,n,r):"string"==typeof t?l(e,t,n):h(e,t)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function c(e,t,n,r){return u(t),t<=0?o(e,t):void 0!==n?"string"==typeof r?o(e,t).fill(n,r):o(e,t).fill(n):o(e,t)}function f(e,t){if(u(t),e=o(e,t<0?0:0|g(t)),!s.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function l(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!s.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|y(t,n);e=o(e,r);var i=e.write(t,n);return i!==r&&(e=e.slice(0,i)),e}function d(e,t){var n=t.length<0?0:0|g(t.length);e=o(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function p(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),s.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=s.prototype):e=d(e,t),e}function h(e,t){if(s.isBuffer(t)){var n=0|g(t.length);return e=o(e,n),0===e.length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||Z(t.length)?o(e,0):d(e,t);if("Buffer"===t.type&&$(t.data))return d(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function g(e){if(e>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|e}function m(e){return+e!=e&&(e=0),s.alloc(+e)}function y(e,t){if(s.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return G(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Q(e).length;default:if(r)return G(e).length;t=(""+t).toLowerCase(),r=!0}}function v(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return U(this,t,n);case"utf8":case"utf-8":return k(this,t,n);case"ascii":return R(this,t,n);case"latin1":case"binary":return O(this,t,n);case"base64":return T(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function w(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function b(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=s.from(t,r)),s.isBuffer(t))return 0===t.length?-1:E(e,t,n,r,i);if("number"==typeof t)return t&=255,s.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):E(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function E(e,t,n,r,i){function o(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}var s=1,a=e.length,u=t.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,a/=2,u/=2,n/=2}var c;if(i){var f=-1;for(c=n;c<a;c++)if(o(e,c)===o(t,f===-1?0:c-f)){if(f===-1&&(f=c),c-f+1===u)return f*s}else f!==-1&&(c-=c-f),f=-1}else for(n+u>a&&(n=a-u),c=n;c>=0;c--){for(var l=!0,d=0;d<u;d++)if(o(e,c+d)!==o(t,d)){l=!1;break}if(l)return c}return-1}function I(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var o=t.length;if(o%2!==0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[n+s]=a}return s}function _(e,t,n,r){return X(G(t,e.length-n),e,n,r)}function S(e,t,n,r){return X(J(t),e,n,r)}function x(e,t,n,r){return S(e,t,n,r)}function C(e,t,n,r){return X(Q(t),e,n,r)}function A(e,t,n,r){return X(W(t,e.length-n),e,n,r)}function T(e,t,n){return 0===t&&n===e.length?K.fromByteArray(e):K.fromByteArray(e.slice(t,n))}function k(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o=e[i],s=null,a=o>239?4:o>223?3:o>191?2:1;if(i+a<=n){var u,c,f,l;switch(a){case 1:o<128&&(s=o);break;case 2:u=e[i+1],128===(192&u)&&(l=(31&o)<<6|63&u,l>127&&(s=l));break;case 3:u=e[i+1],c=e[i+2],128===(192&u)&&128===(192&c)&&(l=(15&o)<<12|(63&u)<<6|63&c,l>2047&&(l<55296||l>57343)&&(s=l));break;case 4:u=e[i+1],c=e[i+2],f=e[i+3],128===(192&u)&&128===(192&c)&&128===(192&f)&&(l=(15&o)<<18|(63&u)<<12|(63&c)<<6|63&f,l>65535&&l<1114112&&(s=l))}}null===s?(s=65533,a=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),i+=a}return P(r)}function P(e){var t=e.length;if(t<=ee)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=ee));return n}function R(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function O(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function U(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=F(e[o]);return i}function L(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function D(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function B(e,t,n,r,i,o){if(!s.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function V(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function q(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function Y(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function M(e,t,n,r,i){return i||Y(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),H.write(e,t,n,r,23,4),n+4}function j(e,t,n,r,i){return i||Y(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),H.write(e,t,n,r,52,8),n+8}function N(e){if(e=z(e).replace(te,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function z(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function F(e){return e<16?"0"+e.toString(16):e.toString(16)}function G(e,t){t=t||1/0;for(var n,r=e.length,i=null,o=[],s=0;s<r;++s){if(n=e.charCodeAt(s),n>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function J(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function W(e,t){for(var n,r,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)n=e.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function Q(e){return K.toByteArray(N(e))}function X(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function Z(e){return e!==e}var K=e("base64-js"),H=e("ieee754"),$=e("isarray");n.Buffer=s,n.SlowBuffer=m,n.INSPECT_MAX_BYTES=50,s.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:r(),n.kMaxLength=i(),s.poolSize=8192,s._augment=function(e){return e.__proto__=s.prototype,e},s.from=function(e,t,n){return a(null,e,t,n)},s.TYPED_ARRAY_SUPPORT&&(s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0})),s.alloc=function(e,t,n){return c(null,e,t,n)},s.allocUnsafe=function(e){return f(null,e)},s.allocUnsafeSlow=function(e){return f(null,e)},s.isBuffer=function(e){return!(null==e||!e._isBuffer)},s.compare=function(e,t){if(!s.isBuffer(e)||!s.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},s.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,t){if(!$(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return s.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=s.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(!s.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},s.byteLength=y,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)w(this,t,t+1);return this},s.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)w(this,t,t+3),w(this,t+1,t+2);return this},s.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)w(this,t,t+7),w(this,t+1,t+6),w(this,t+2,t+5),w(this,t+3,t+4);return this},s.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?k(this,0,e):v.apply(this,arguments)},s.prototype.equals=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===s.compare(this,e)},s.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},s.prototype.compare=function(e,t,n,r,i){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,i>>>=0,this===e)return 0;for(var o=i-r,a=n-t,u=Math.min(o,a),c=this.slice(r,i),f=e.slice(t,n),l=0;l<u;++l)if(c[l]!==f[l]){o=c[l],a=f[l];break}return o<a?-1:a<o?1:0},s.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1},s.prototype.indexOf=function(e,t,n){return b(this,e,t,n,!0)},s.prototype.lastIndexOf=function(e,t,n){return b(this,e,t,n,!1)},s.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return I(this,e,t,n);case"utf8":case"utf-8":return _(this,e,t,n);case"ascii":return S(this,e,t,n);case"latin1":case"binary":return x(this,e,t,n);case"base64":return C(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ee=4096;s.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);var r;if(s.TYPED_ARRAY_SUPPORT)r=this.subarray(e,t),r.__proto__=s.prototype;else{var i=t-e;r=new s(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+e]}return r},s.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},s.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},s.prototype.readUInt8=function(e,t){return t||D(e,1,this.length),this[e]},s.prototype.readUInt16LE=function(e,t){return t||D(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUInt16BE=function(e,t){return t||D(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUInt32LE=function(e,t){return t||D(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},s.prototype.readUInt32BE=function(e,t){return t||D(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},s.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},s.prototype.readInt8=function(e,t){return t||D(e,1,this.length),128&this[e]?(255-this[e]+1)*-1:this[e]},s.prototype.readInt16LE=function(e,t){t||D(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(e,t){t||D(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(e,t){return t||D(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return t||D(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readFloatLE=function(e,t){return t||D(e,4,this.length),H.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return t||D(e,4,this.length),H.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return t||D(e,8,this.length),H.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return t||D(e,8,this.length),H.read(this,e,!1,52,8)},s.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){var i=Math.pow(2,8*n)-1;B(this,e,t,n,i,0)}var o=1,s=0;for(this[t]=255&e;++s<n&&(o*=256);)this[t+s]=e/o&255;return t+n},s.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){var i=Math.pow(2,8*n)-1;B(this,e,t,n,i,0)}var o=n-1,s=1;for(this[t+o]=255&e;--o>=0&&(s*=256);)this[t+o]=e/s&255;return t+n},s.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,1,255,0),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},s.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):V(this,e,t,!0),t+2},s.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):V(this,e,t,!1),t+2},s.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):q(this,e,t,!0),t+4},s.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):q(this,e,t,!1),t+4},s.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);B(this,e,t,n,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<n&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},s.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);B(this,e,t,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},s.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,1,127,-128),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},s.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):V(this,e,t,!0),t+2},s.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):V(this,e,t,!1),t+2},s.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,4,2147483647,-2147483648),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):q(this,e,t,!0),t+4},s.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):q(this,e,t,!1),t+4},s.prototype.writeFloatLE=function(e,t,n){return M(this,e,t,!0,n)},s.prototype.writeFloatBE=function(e,t,n){return M(this,e,t,!1,n)},s.prototype.writeDoubleLE=function(e,t,n){return j(this,e,t,!0,n)},s.prototype.writeDoubleBE=function(e,t,n){return j(this,e,t,!1,n)},s.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!s.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},s.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!s.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var o;if("number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var a=s.isBuffer(e)?e:G(new s(e,r).toString()),u=a.length;for(o=0;o<n-t;++o)this[o+t]=a[o%u]}return this};var te=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":6,ieee754:10,isarray:11}],8:[function(e,t,n){"use strict";t.exports=function(e,t,n){for(var r in e)if(t.call(n,e[r],r,e)===!1)break}},{}],9:[function(e,t,n){"use strict";var r=e("for-in"),i=Object.prototype.hasOwnProperty;t.exports=function(e,t,n){r(e,function(r,o){if(i.call(e,o))return t.call(n,e[o],o,e)})}},{"for-in":8}],10:[function(e,t,n){n.read=function(e,t,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,c=u>>1,f=-7,l=n?i-1:0,d=n?-1:1,p=e[t+l];for(l+=d,o=p&(1<<-f)-1,p>>=-f,f+=a;f>0;o=256*o+e[t+l],l+=d,f-=8);for(s=o&(1<<-f)-1,o>>=-f,f+=r;f>0;s=256*s+e[t+l],l+=d,f-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:(p?-1:1)*(1/0);s+=Math.pow(2,r),o-=c}return(p?-1:1)*s*Math.pow(2,o-r)},n.write=function(e,t,n,r,i,o){var s,a,u,c=8*o-i-1,f=(1<<c)-1,l=f>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,h=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=f):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),t+=s+l>=1?d/u:d*Math.pow(2,1-l),t*u>=2&&(s++,u/=2),s+l>=f?(a=0,s=f):s+l>=1?(a=(t*u-1)*Math.pow(2,i),s+=l):(a=t*Math.pow(2,l-1)*Math.pow(2,i),s=0));i>=8;e[n+p]=255&a,p+=h,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;e[n+p]=255&s,p+=h,s/=256,c-=8);e[n+p-h]|=128*g}},{}],11:[function(e,t,n){var r={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},{}],12:[function(e,t,n){!function(e){function n(){}function r(e,t){return function(){e.apply(t,arguments)}}function i(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],f(e,this)}function o(e,t){for(;3===e._state;)e=e._value;return 0===e._state?void e._deferreds.push(t):(e._handled=!0,void d(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._state?s:a)(t.promise,e._value);var r;try{r=n(e._value)}catch(e){return void a(t.promise,e)}s(t.promise,r)}))}function s(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof i)return e._state=3,e._value=t,void u(e);if("function"==typeof n)return void f(r(n,t),e)}e._state=1,e._value=t,u(e)}catch(t){a(e,t)}}function a(e,t){e._state=2,e._value=t,u(e)}function u(e){2===e._state&&0===e._deferreds.length&&d(function(){e._handled||p(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)o(e,e._deferreds[t]);e._deferreds=null}function c(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function f(e,t){var n=!1;try{e(function(e){n||(n=!0,s(t,e))},function(e){n||(n=!0,a(t,e))})}catch(e){if(n)return;n=!0,a(t,e)}}var l=setTimeout,d="function"==typeof setImmediate&&setImmediate||function(e){l(e,0)},p=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};i.prototype.catch=function(e){return this.then(null,e)},i.prototype.then=function(e,t){var r=new this.constructor(n);return o(this,new c(e,t,r)),r},i.all=function(e){var t=Array.prototype.slice.call(e);return new i(function(e,n){function r(o,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var a=s.then;if("function"==typeof a)return void a.call(s,function(e){r(o,e)},n)}t[o]=s,0===--i&&e(t)}catch(e){n(e)}}if(0===t.length)return e([]);for(var i=t.length,o=0;o<t.length;o++)r(o,t[o])})},i.resolve=function(e){return e&&"object"==typeof e&&e.constructor===i?e:new i(function(t){t(e)})},i.reject=function(e){return new i(function(t,n){n(e)})},i.race=function(e){return new i(function(t,n){for(var r=0,i=e.length;r<i;r++)e[r].then(t,n)})},i._setImmediateFn=function(e){d=e},i._setUnhandledRejectionFn=function(e){p=e},"undefined"!=typeof t&&t.exports?t.exports=i:e.Promise||(e.Promise=i)}(this)},{}],13:[function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,n,o){t=t||"&",n=n||"=";var s={};if("string"!=typeof e||0===e.length)return s;var a=/\+/g;e=e.split(t);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var c=e.length;u>0&&c>u&&(c=u);for(var f=0;f<c;++f){var l,d,p,h,g=e[f].replace(a,"%20"),m=g.indexOf(n);m>=0?(l=g.substr(0,m),d=g.substr(m+1)):(l=g,d=""),p=decodeURIComponent(l),h=decodeURIComponent(d),r(s,p)?i(s[p])?s[p].push(h):s[p]=[s[p],h]:s[p]=h}return s};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],14:[function(e,t,n){n=t.exports=e("./lib/siphash")},{"./lib/siphash":15}],15:[function(e,t,n){var r=function(){"use strict";function e(e,t){var n=e.l+t.l,r={h:e.h+t.h+(n/2>>>31)>>>0,l:n>>>0};e.h=r.h,e.l=r.l}function t(e,t){e.h^=t.h,e.h>>>=0,e.l^=t.l,e.l>>>=0}function n(e,t){var n={h:e.h<<t|e.l>>>32-t,l:e.l<<t|e.h>>>32-t};e.h=n.h,e.l=n.l}function r(e){var t=e.l;e.l=e.h,e.h=t}function i(i,o,s,a){e(i,o),e(s,a),n(o,13),n(a,16),t(o,i),t(a,s),r(i),e(s,o),e(i,a),n(o,17),n(a,21),t(o,s),t(a,i),r(s)}function o(e,t){return e.charCodeAt(t+3)<<24|e.charCodeAt(t+2)<<16|e.charCodeAt(t+1)<<8|e.charCodeAt(t)}function s(e,n){var r,s={h:e[1]>>>0,l:e[0]>>>0},a={h:e[3]>>>0,l:e[2]>>>0},u={h:s.h,l:s.l},c=s,f={h:a.h,l:a.l},l=a,d=0,p=n.length,h=p-7,g=new Uint8Array(new ArrayBuffer(8));for(t(u,{h:1936682341,l:1886610805}),t(f,{h:1685025377,l:1852075885}),t(c,{h:1819895653,l:1852142177}),t(l,{h:1952801890,l:2037671283});d<h;)r={h:o(n,d+4),l:o(n,d)},t(l,r),i(u,f,c,l),i(u,f,c,l),t(u,r),d+=8;g[7]=p;for(var m=0;d<p;)g[m++]=n.charCodeAt(d++);for(;m<7;)g[m++]=0;r={h:g[7]<<24|g[6]<<16|g[5]<<8|g[4],l:g[3]<<24|g[2]<<16|g[1]<<8|g[0]},t(l,r),i(u,f,c,l),i(u,f,c,l),t(u,r),t(c,{h:0,l:255}),i(u,f,c,l),i(u,f,c,l),i(u,f,c,l),i(u,f,c,l);var y=u;return t(y,f),t(y,c),t(y,l),y}function a(e){return[o(e,0),o(e,4),o(e,8),o(e,12)]}function u(e,t){var n=s(e,t);return("0000000"+n.h.toString(16)).substr(-8)+("0000000"+n.l.toString(16)).substr(-8)}function c(e,t){var n=s(e,t);return 4294967296*(2097151&n.h)+n.l}return{string16_to_key:a,hash:s,hash_hex:u,hash_uint:c}}(),t=t||{};t.exports=r},{}],16:[function(t,n,r){(function(t){"use strict";!function(t,r){"function"==typeof e&&e.amd?e([],r):"object"==typeof n&&n.exports?n.exports=r():t.TCStringParse=r()}("undefined"==typeof self?this:self,function(){var e=function(e){for(var t="",n=0,r=e.length;n<r;n+=1){var i=e.charCodeAt(n).toString(2),o="00000000".slice(0,8-i.length);t+=o+i}return t},n=function(e){if("function"==typeof atob){var n=e.replace(/_/g,"/").replace(/-/g,"+");try{return atob(n)}catch(e){throw new Error("Unable to decode transparency and consent string")}}if("function"==typeof t)return t.from(e,"base64").toString("binary");throw new Error("Unable to detect base64 decoder")},r=function(e){return parseInt(e,2)||0},i=function(e){return 100*r(e)},o=function(e){for(var t="A".charCodeAt(),n=e.match(/.{6}/g)||[],i="",o=0,s=n.length;o<s;o+=1){var a=r(n[o])+t;i+=String.fromCharCode(a)}return i},s=function(e){return Boolean(Number(e))},a=function(e){for(var t=e.split(""),n={},r=0,i=t.length;r<i;r+=1)s(t[r])&&(n[r+1]=!0);return n},u=function(t){if("string"!=typeof t)throw new Error("Invalid transparency and consent string specified");
for(var i=t.split("."),o=[],s=0,a=i.length;s<a;s+=1)o.push(e(n(i[s])));var u=r(o[0].slice(0,6));if(2!==u)throw new Error("Unsupported transparency and consent string version “"+u+"”");return o},c=function(e){for(var t=[{key:"purposeConsents",size:24,decoder:a},{key:"purposeLegitimateInterests",size:24,decoder:a}],n=[{key:"maxVendorId",size:16},{key:"isRangeEncoding",size:1,decoder:s}],u=[{key:"version",size:6},{key:"created",size:36,decoder:i},{key:"lastUpdated",size:36,decoder:i},{key:"cmpId",size:12},{key:"cmpVersion",size:12},{key:"consentScreen",size:6},{key:"consentLanguage",size:12,decoder:o},{key:"vendorListVersion",size:12},{key:"policyVersion",size:6},{key:"isServiceSpecified",size:1,decoder:s},{key:"useNonStandardStacks",size:1,decoder:s},{key:"specialFeatureOptins",size:12,decoder:a}].concat(t).concat({key:"purposeOneTreatment",size:1,decoder:s},{key:"publisherCountryCode",size:12,decoder:o},{key:"vendorConsents",queue:[{key:"maxVendorId",size:16},{key:"isRangeEncoding",size:1,decoder:s}]},{key:"vendorLegitimateInterests",queue:n},{key:"publisherRestrictions",queue:[{key:"numPubRestrictions",size:12}]}),c=[{size:3}],f=[].concat(c).concat(n),l=[].concat(c).concat(n),d=[].concat(c).concat(t).concat({key:"numCustomPurposes",size:6}),p=[{key:"core",queue:u}],h=1;h<e.length;h+=1){var g=e[h],m=r(g.slice(0,3));1===m?p.push({key:"disclosedVendors",queue:f}):2===m?p.push({key:"allowedVendors",queue:l}):3===m&&p.push({key:"publisherTC",queue:d})}return p};return function(e){var t=function(e,t,n,r){var i=function(){if(r.pubRestrictionEntry&&r.rangeEntry)for(var t in r.rangeEntry)Object.prototype.hasOwnProperty.call(r.rangeEntry,t)&&(r.pubRestrictionEntry[t]=(r.pubRestrictionEntry[t]||[]).concat(r.rangeEntry[t]));r.numPubRestrictions&&(r.numPubRestrictions-=1,e.push({key:"purposeId",size:6},{key:"restrictionType",size:2},{key:"numEntries",size:12}))},o=function(){r.numEntries?(r.numEntries-=1,e.push({key:"isRange",size:1,decoder:s},{key:"startVendorId",size:16})):i()},u=function(){return!r.purposeId||[{purpose:r.purposeId,isAllowed:0!==r.restrictionType,isConsentRequired:1===r.restrictionType,isLegitimateInterestRequired:2===r.restrictionType}]};if("isRangeEncoding"===t.key)e.push(n?{key:"numEntries",size:12}:{key:"bitField",size:r.maxVendorId,decoder:a});else if("numEntries"===t.key)r.rangeEntry={},o();else if("isRange"===t.key)n&&e.push({key:"endVendorId",size:16});else if("startVendorId"===t.key)r.isRange||(r.rangeEntry[n]=u(),o());else if("endVendorId"===t.key){for(var c=r.startVendorId;c<=r.endVendorId;c+=1)r.rangeEntry[c]=u();o()}else"numCustomPurposes"===t.key?e.push({key:"customPurposeConsents",size:r.numCustomPurposes,decoder:a},{key:"customPurposeLegitimateInterests",size:r.numCustomPurposes,decoder:a}):"numPubRestrictions"===t.key&&(r.pubRestrictionEntry={},i())},n=function(e){return e.pubRestrictionEntry||e.rangeEntry||e.bitField||e},i=0,o=function(e,t){var n=t.slice(i,i+e.size);return i+=e.size,(e.decoder||r)(n)},f=function(e,r){if(!e.queue)return o(e,r);for(var i={},s=0;s<e.queue.length;s+=1){var a=e.queue[s],u=o(a,r);a.key&&(i[a.key]=u),t(e.queue,a,u,i)}return n(i)},l=function(e,r){for(var i={},o=0;o<e.queue.length;o+=1){var s=e.queue[o],a=f(s,r);s.key&&(i[s.key]=a),t(e.queue,s,a,i)}return n(i)},d=function(){for(var t=u(e),n=c(t),r={},o=0;o<n.length;o+=1){var s=n[o],a=t[o],f=l(s,a);s.key&&(r[s.key]=f),i=0}return r};return d()}})}).call(this,t("buffer").Buffer)},{buffer:7}],17:[function(e,t,n){"use strict;";t.exports=Object.assign||function(){for(var e,t,n=Object.prototype.hasOwnProperty,r={},i=0,o=arguments.length;i<o;++i){t=arguments[i];for(e in t)n.call(t,e)&&(r[e]=t[e])}return r}},{}],18:[function(e,t,n){"use strict";t.exports={}},{}],19:[function(e,t,n){"use strict";var r=e("util-merge"),i=e("./lib/rnd"),o=e("./api"),s=JSON.parse('{"iabcmp":{"tcStringV1":"BOv_CmhOv_CmhAAABBENDAiAAAAYqABAMUA"},"tag-system":{"renewInterval":3600000},"userreport-ak":{"trackingConfig":[{"trackingCode":"YLEs2s-m-PigdalS1aE-tzpOlKLWZcg","sectionId":null,"type":"Media","mediaId":"805be02e-79a0-4498-af09-4aecd4cd76bd"},{"trackingCode":"YLEs2s-m-bLOh8bFWYE6Rt3SglBgdRQ","sectionId":null,"type":"Media","mediaId":"b3782ffb-d839-425e-81c0-c758b4cffc1a"},{"trackingCode":"YLEs2s-m-wDgFt7-ChEWflXG7wTZtZg","sectionId":null,"type":"Media","mediaId":"3e73f2af-bc60-419d-ab14-08942fb65da5"},{"trackingCode":"YLEm-CnsPeJKgyE65quO3NLpXOw","sectionId":null,"type":"Media","mediaId":"780f7b0a-a092-4ec8-b9aa-e3b734ba573b"},{"trackingCode":"YLEs2s-m-e6TjG_JOxUuQPG_rqAhfCw","sectionId":null,"type":"Media","mediaId":"83b518ea-ed3b-4130-910e-92d830b50acd"},{"trackingCode":"YLEm-ZIBQIsWPREi-AA8DSXCK_w","sectionId":null,"type":"Media","mediaId":"22508064-8fc5-4844-be00-0f0349708aff"},{"trackingCode":"YLEs2s-s-CgsoVJmfp0aAyfAHMNUtXQ","sectionId":"54280b0a-9f99-46a7-80c9-f00730d52d5d","type":"Section","mediaId":"22508064-8fc5-4844-be00-0f0349708aff"},{"trackingCode":"YLEm-lqwxRqGeUkeXU2IA-X4JwA","sectionId":null,"type":"Media","mediaId":"4631ac96-9ea1-4752-9753-6200f97e09c0"},{"trackingCode":"YLEs2s-s-T-MhQIpfTkOT_18h4cLzPQ","sectionId":"4021e34f-5f8a-434e-93ff-5f21e1c2f33d","type":"Section","mediaId":"4631ac96-9ea1-4752-9753-6200f97e09c0"},{"trackingCode":"YLEs2s-m-nedA6G1yDUWAuIw0tTA9Kg","sectionId":null,"type":"Media","mediaId":"49a1da79-094d-4aa7-8be6-85b62ca40fe6"},{"trackingCode":"YLEm-GxYsURPM_UmrOh_QMPZY-A","sectionId":null,"type":"Media","mediaId":"512c161b-cc13-49fd-ab3a-1fd030f658f8"},{"trackingCode":"YLEs2s-s-WEn2whO0AU6uCY4tooVVtA","sectionId":"c2f64958-b413-4e01-ae09-8e2da28555b4","type":"Section","mediaId":"512c161b-cc13-49fd-ab3a-1fd030f658f8"},{"trackingCode":"YLEs2s-m-w2U8e8q9S0qKVesuUqzmqg","sectionId":null,"type":"Media","mediaId":"8928a22e-ff38-431c-8eaa-040f12ceed43"},{"trackingCode":"YLEm-CXWsiZKp5UCcVXsflQPueg","sectionId":null,"type":"Media","mediaId":"89ac7509-a992-40e5-9c55-7b1f9503ee7a"},{"trackingCode":"YLEs-PxxMECPqwEegblwb8u4gAw","sectionId":"104c1c3f-ea23-47c0-a06e-5c1bf2ee2003","type":"Section","mediaId":"89ac7509-a992-40e5-9c55-7b1f9503ee7a"},{"trackingCode":"YLEs-cwIjGL_tiEiCB7MTgWEN4w","sectionId":"18230273-edbf-4888-8207-b31381610de3","type":"Section","mediaId":"89ac7509-a992-40e5-9c55-7b1f9503ee7a"},{"trackingCode":"YLEs-ELoPJAHDEUWRuGoOqEyrLg","sectionId":"240fba10-c301-4511-91b8-6a0ea84cab2e","type":"Section","mediaId":"89ac7509-a992-40e5-9c55-7b1f9503ee7a"},{"trackingCode":"YLEs-kCS0nbLvXEO6I62HtbSiRw","sectionId":"9db42490-efb2-435c-ba23-ad87b5b4a247","type":"Section","mediaId":"89ac7509-a992-40e5-9c55-7b1f9503ee7a"},{"trackingCode":"YLEs-dbZXxFL2eUOX3rPT987EDg","sectionId":"c457b675-f652-4379-97de-b3d3f7cec40e","type":"Section","mediaId":"89ac7509-a992-40e5-9c55-7b1f9503ee7a"},{"trackingCode":"YLEs-fZey8GnYz0OJj3PE5613vg","sectionId":"f0b2977d-d869-43cf-898f-73c4e7ad77be","type":"Section","mediaId":"89ac7509-a992-40e5-9c55-7b1f9503ee7a"},{"trackingCode":"YLEm-wfIXsqta0ECI9yp10-sHhA","sectionId":null,"type":"Media","mediaId":"b217f2c1-5aab-40d0-88f7-2a75d3eb0784"},{"trackingCode":"YLEs2s-m-FQ1GHGZk6nyBjdwupX9A","sectionId":null,"type":"Media","mediaId":"d450e19b-c661-4e66-a7c8-18ddc2ea57f4"}]},"userreport-core":{"networkLayout":[{"rules":[],"id":"805be02e-79a0-4498-af09-4aecd4cd76bd","color":null,"sections":[]},{"rules":[],"id":"b3782ffb-d839-425e-81c0-c758b4cffc1a","color":null,"sections":[]},{"rules":[],"id":"3e73f2af-bc60-419d-ab14-08942fb65da5","color":null,"sections":[]},{"rules":[],"id":"780f7b0a-a092-4ec8-b9aa-e3b734ba573b","color":null,"sections":[]},{"rules":[],"id":"83b518ea-ed3b-4130-910e-92d830b50acd","color":null,"sections":[]},{"rules":[],"id":"22508064-8fc5-4844-be00-0f0349708aff","color":null,"sections":[{"rules":[],"id":"54280b0a-9f99-46a7-80c9-f00730d52d5d"}]},{"rules":[],"id":"4631ac96-9ea1-4752-9753-6200f97e09c0","color":null,"sections":[{"rules":[{"pattern":"https://svenska.yle.fi","operation":"Section"}],"id":"4021e34f-5f8a-434e-93ff-5f21e1c2f33d"}]},{"rules":[],"id":"49a1da79-094d-4aa7-8be6-85b62ca40fe6","color":null,"sections":[]},{"rules":[],"id":"512c161b-cc13-49fd-ab3a-1fd030f658f8","color":null,"sections":[{"rules":[],"id":"c2f64958-b413-4e01-ae09-8e2da28555b4"}]},{"rules":[],"id":"8928a22e-ff38-431c-8eaa-040f12ceed43","color":null,"sections":[]},{"rules":[{"pattern":"*.yle.fi","operation":"DomainEquals"}],"id":"89ac7509-a992-40e5-9c55-7b1f9503ee7a","color":null,"sections":[{"rules":[],"id":"104c1c3f-ea23-47c0-a06e-5c1bf2ee2003"},{"rules":[],"id":"18230273-edbf-4888-8207-b31381610de3"},{"rules":[],"id":"240fba10-c301-4511-91b8-6a0ea84cab2e"},{"rules":[],"id":"9db42490-efb2-435c-ba23-ad87b5b4a247"},{"rules":[],"id":"c457b675-f652-4379-97de-b3d3f7cec40e"},{"rules":[],"id":"f0b2977d-d869-43cf-898f-73c4e7ad77be"}]},{"rules":[],"id":"b217f2c1-5aab-40d0-88f7-2a75d3eb0784","color":null,"sections":[]},{"rules":[],"id":"d450e19b-c661-4e66-a7c8-18ddc2ea57f4","color":null,"sections":[]}],"companyId":"bda367c6-e186-48ae-b937-15608ef2175c"},"userreport-invitation-utils":{"disableImplementationTracking":true,"suppressCookieSync":true,"muteByDefault":true,"optimizeScriptLoading":true}}'),a=JSON.parse('["iabcmp","tag-system","userreport-ak","userreport-core","userreport-invitation-utils"]'),u=!!parseInt("0")||window.location.href.indexOf("__sak=debug")!==-1||"undefined"!=typeof window&&"true"===window.localStorage.getItem("__sak_debug"),c=window.location.href.indexOf("__sak=disable")!==-1||window.location.href.indexOf("__sak=disable")!==-1,f={customerId:"yleisradiooy",customerConfig:s,debug:u,dnt:!1,consents:{tcStringV2:"",tcStringV1:"",storage:!0},disabled:c,plugins:a,revision:"37f0126",publishDate:"2022-07-18T07:43:24.591Z",sessionId:i()};o.setAnonymousTracking=function(e){f.dnt=e},o.setConsents=function(e){f.consents=r(f.consents,e)},t.exports=f},{"./api":18,"./lib/rnd":39,"util-merge":17}],20:[function(e,t,n){"use strict";function r(e){var t=e[0];return!("function"!=typeof f[t]||!(f[t].executeBeforePlugins||d.indexOf(t)>-1))}function i(e){if("object"==typeof e)for(var t=0,n=e.length;t<n;t++)window.audienceProjectLayer.push(e[t])}function o(){for(var e=window.location.href.split(/[?&]/),t="__audienceProjectLayer=",n=0,r=e.length;n<r;n++)if(0===e[n].indexOf(t)){var o=e[n].slice(t.length);try{o=JSON.parse(decodeURIComponent(o))}catch(e){return void c.warn("Unable to parse audienceProjectLayer queue from location")}i(o)}}function s(){window.audienceProjectLayer.filter(r).forEach(h),window._urq.filter(r).forEach(h)}function a(){if(window.audienceProjectLayer.push===Array.prototype.push){var e=window.audienceProjectLayer.push;window.audienceProjectLayer.push=function(t){e.apply(window.audienceProjectLayer,arguments),h(t)},window.audienceProjectLayer.filter(function(e){return!r(e)}).forEach(h);var t=window._urq.push;window._urq.push=function(e){t.apply(window._urq,arguments),h(e)},window._urq.filter(function(e){return!r(e)}).forEach(h)}}var u=e("@apr/promise-polyfill"),c=e("./lib/log"),f=e("./api"),l=e("./config");window.audienceProjectLayer=window.audienceProjectLayer||[],window._urq=window._urq||[];var d=["setAnonymousTracking","setConsents"],p=["tryToInvite","inhibitInvitation","initSite","integrateWithGTM","suppressCookieSync","setPrivacyPolicyChecked","setCustomTranslation","setGDPR","setGDPRConsent","forwardAnonymousTracking","forwardConsents"],h=function(e){var t=e[0],n=Array.prototype.slice.call(e,1);"function"==typeof t?t.apply(null,n):"function"==typeof f[t]?f[t].apply(null,n):p.indexOf(t)!==-1||c.error("Unable to find command %s",t)};window.addEventListener("message",function(e){if(e.data&&e.data.indexOf&&0===e.data.indexOf("audienceProjectLayer$$$")){var t=e.data.split("$$$",3),n=t[1],r=t[2];r&&(r=JSON.parse(r)),window.audienceProjectLayer.push([n,r])}},!1),t.exports=function(e,t,n,r){c.info("Customer config:",t),c.info("SAK config:",n),t.iabcmp&&t.iabcmp.tcStringV2?l.consents.tcStringV2=t.iabcmp.tcStringV2:t.iabcmp&&t.iabcmp.tcStringV1&&(l.consents.tcStringV1=t.iabcmp.tcStringV1);var i={config:t,sakConfig:n,isSpider:r};n.sakObject.starting.fire(i),r&&(e=e.filter(function(e){return e.executeForSpiders})),o(),c.info("API queue:",window.audienceProjectLayer,window._urq),s();var f=e.map(function(e){return new u(function(t){t(e(i))})}),d=u.all(f);return n.sakObject.started.fire(i),a(),d}},{"./api":18,"./config":19,"./lib/log":34,"@apr/promise-polyfill":5}],21:[function(e,t,n){"use strict";function r(){this._firedEvents=[],this._callbacks=[]}r.prototype.subscribe=function(e,t){if(t)for(var n=0;n<this._firedEvents.length;n++)e.apply(null,this._firedEvents[n]);return this._callbacks.push(e),function(){return this.unsubscribe(e)}.bind(this)},r.prototype.unsubscribe=function(e){var t=this._callbacks.indexOf(e);t!==-1&&this._callbacks.splice(t,1)},r.prototype.fire=function(){var e=Array.prototype.slice.call(arguments,0);this._firedEvents.push(e);for(var t=[],n=this._callbacks.slice(0),r=0,i=n.length;r<i;r++)try{n[r].apply(null,e)}catch(e){t.push(e)}if(0!==t.length){var o=t.map(function(e){return String(e.stack)||String(e)}).join("\n\n");throw new Error("Errors while calling subscribers\n"+o)}},t.exports=r},{}],22:[function(e,t,n){"use strict";t.exports=function(e,t){t=t||{};var n=document.createElement("iframe");n.style.position="absolute",n.style.width="1px",n.style.height="1px",n.style.top="-1000px",n.style.left="-1000px",n.style.visibility="hidden",n.setAttribute("tabindex","-1"),n.setAttribute("title","Empty"),n.setAttribute("aria-hidden","true"),n.src=e,n.id=t.id,document.body.appendChild(n)}},{}],23:[function(e,t,n){"use strict";t.exports=function(e,t){t=t||{},"async"in t==!1&&(t.async=!0);var n=document.createElement("script");if(n.type="text/javascript",n.src=e,t.id){if(document.getElementById(t.id))return;n.id=t.id}n.async=t.async;var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(n,r)}},{}],24:[function(e,t,n){"use strict";function r(e,t){var n=document.createElement("a");n.href=e,e+=""===n.hash?"#":"&";var r=[];return i(t,function(e,t){var n=encodeURIComponent(t)+"="+encodeURIComponent(e);r.push(n)}),e+=r.join("&")}var i=e("for-own");t.exports=r},{"for-own":9}],25:[function(e,t,n){"use strict";var r=e("./merge"),i=e("./hash"),o={ttl:null,source:null};n.set=function(e,t,n){t=r(o,t);var s=Date.now(),a={at:s};t.ttl&&(a.exp=s+t.ttl),t.source&&(a.src=i(t.source)),a=r({},a,n);var u=JSON.stringify(a);try{window.localStorage.setItem(e,u)}catch(e){}},n.get=function(e,t){t=r(o,t||{});try{var s=window.localStorage.getItem(e);if(s){var a=JSON.parse(s),u=!a.exp||Date.now()<a.exp,c=null===t.source||i(t.source)===a.src;if(u&&c)return a}}catch(e){}return n.remove(e),null},n.remove=function(e){try{window.localStorage.removeItem(e)}catch(e){}}},{"./hash":31,"./merge":36}],26:[function(e,t,n){"use strict";var r=e("../../lib/location");t.exports=function(e,t){t||(t=r().hostname);for(var n=t.split(".").reverse(),i=e.split(".").reverse(),o=0;;o++){if(o>=n.length)return i.length===n.length||i.length-n.length===1&&"*"===i[i.length-1];if(o>=i.length){if("*"===i[i.length-1])continue;return!1}if("*"!==i[o]&&i[o].toLowerCase()!==n[o].toLowerCase())return!1}}},{"../../lib/location":33}],27:[function(e,t,n){"use strict";var r=e("../../lib/location");t.exports=function(e,t){if(t||(t=r().pathname),"/"===e)return"/"===t;e="/"+e.replace(/(^\/|\/$)/g,"");var n=t.slice(e.length*-1)===e,i=t.indexOf(e+"/")!==-1;return n||i}},{"../../lib/location":33}],28:[function(e,t,n){"use strict";var r=e("@apr/promise-polyfill"),i=e("../config");n.IDENTIFY=1,n.TARGET_ADS=3,n.TARGET_CONTENT=4,n.MEASURE=5,n.V2_USE_DEVICE=1,n.V2_CREATE_ADS_PROFILE=3,n.V2_SELECT_PERSONALIZED_CONTENT=6,n.V2_MEASURE_PERFORMANCE_CONTENT=8;var o={acquire:function(){return r.resolve(!0)},getForwardParams:function(){return r.resolve({})},getConsentData:function(){return r.resolve({})},hasTTL:function(){return!1}},s=o;n.enable=function(e){s=e},n.disable=function(){s=o},n.acquire=function(e){return s.acquire(e)},n.getForwardParams=function(){return s.getForwardParams()},n.getConsentData=function(){return s.getConsentData()},n.hasTTL=function(){return s.hasTTL()};var a=function(e,t){this.toString=this.valueOf=function(){return i.dnt?t:e}};a.prototype=String.prototype,n.DNTSelect=a},{"../config":19,"@apr/promise-polyfill":5}],29:[function(e,t,n){"use strict";function r(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0",n="",r=0;r<e;r+=1)n+=t;return n}function i(e,t){return r(Math.max(0,t))+e}function o(e,t,n){return parseInt(e.substr(t,n),2)}function s(e,t,n){return new Date(100*o(e,t,n))}function a(e,t){return 1===parseInt(e.substr(t,1),2)}function u(e){var t=o(e);return String.fromCharCode(t+65).toLowerCase()}function c(e,t,n){var r=e.substr(t,n);return u(r.slice(0,n/2))+u(r.slice(n/2))}function f(e){var t=e.input,n=e.output,r=e.startPosition,i=e.field,u=i.type,f=i.numBits,l=i.decoder,p=i.validator,h=i.listCount;if("function"==typeof p&&!p(n))return{newPosition:r};if("function"==typeof l)return l(t,n,r);var g="function"==typeof f?f(n):f;switch(u){case"int":return{fieldValue:o(t,r,g)};case"bool":return{fieldValue:a(t,r)};case"date":return{fieldValue:s(t,r,g)};case"bits":return{fieldValue:t.substr(r,g)};case"list":return d(t,n,r,i,h);case"language":return{fieldValue:c(t,r,g)};default:throw new Error("ConsentString - Unknown field type "+u+" for decoding")}}function l(e){var t=e.input,n=e.fields,r=e.startPosition,i=void 0===r?0:r,o=i,s=n.reduce(function(e,n){var r=n.name,i=n.numBits,s=f({input:t,output:e,startPosition:o,field:n}),a=s.fieldValue,u=s.newPosition;return void 0!==a&&(e[r]=a),void 0!==u?o=u:"number"==typeof i&&(o+=i),e},{});return{decodedObject:s,newPosition:o}}function d(e,t,n,r,i){var o=0;"function"==typeof i?o=i(t):"number"==typeof i&&(o=i);for(var s=n,a=[],u=0;u<o;u+=1){var c=l({input:e,fields:r.fields,startPosition:s});s=c.newPosition,a.push(c.decodedObject)}return{fieldValue:a,newPosition:s}}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v,n=o(e,0,y);if("number"!=typeof n)throw new Error("ConsentString - Unknown version number in the string to decode");if(!v[n])throw new Error("ConsentString - Unsupported version "+n+" in the string to decode");var r=t[n].fields,i=l({input:e,fields:r}),s=i.decodedObject;return s}function h(e,t){for(var n=e;n.length%4!==0;)n+="=";n=n.replace(/-/g,"+").replace(/_/g,"/");for(var r=atob(n),o="",s=0;s<r.length;s+=1){var a=r.charCodeAt(s).toString(2);o+=i(a,8-a.length)}return p(o,t)}function g(e){return e.split("").reduce(function(e,t,n){return"1"===t&&e.indexOf(n+1)===-1&&e.push(n+1),e},[])}function m(e){var t=h(e),n=t.version,r=t.cmpId,i=t.vendorListVersion,o=t.purposeIdBitString,s=t.maxVendorId,a=t.created,u=t.lastUpdated,c=t.isRange,f=t.defaultConsent,l=t.vendorIdBitString,d=t.vendorRangeList,p=t.cmpVersion,m=t.consentScreen,y=t.consentLanguage,v={version:n,cmpId:r,vendorListVersion:i,allowedPurposeIds:g(o),maxVendorId:s,created:a,lastUpdated:u,cmpVersion:p,consentScreen:m,consentLanguage:y};if(c){var w=d.reduce(function(e,t){for(var n=t.isRange,r=t.startVendorId,i=t.endVendorId,o=n?i:r,s=r;s<=o;s+=1)e[s]=!0;return e},{});v.allowedVendorIds=[];for(var b=1;b<=s;b+=1)(f&&!w[b]||!f&&w[b])&&v.allowedVendorIds.indexOf(b)===-1&&v.allowedVendorIds.push(b)}else v.allowedVendorIds=g(l);return v}var y=6,v={1:{version:1,metadataFields:["version","created","lastUpdated","cmpId","cmpVersion","consentScreen","vendorListVersion"],fields:[{name:"version",type:"int",numBits:6},{name:"created",type:"date",numBits:36},{name:"lastUpdated",type:"date",numBits:36},{name:"cmpId",type:"int",numBits:12},{name:"cmpVersion",type:"int",numBits:12},{name:"consentScreen",type:"int",numBits:6},{name:"consentLanguage",type:"language",numBits:12},{name:"vendorListVersion",type:"int",numBits:12},{name:"purposeIdBitString",type:"bits",numBits:24},{name:"maxVendorId",type:"int",numBits:16},{name:"isRange",type:"bool",numBits:1},{name:"vendorIdBitString",type:"bits",numBits:function(e){return e.maxVendorId},validator:function(e){return!e.isRange}},{name:"defaultConsent",type:"bool",numBits:1,validator:function(e){return e.isRange}},{name:"numEntries",numBits:12,type:"int",validator:function(e){return e.isRange}},{name:"vendorRangeList",type:"list",listCount:function(e){return e.numEntries},validator:function(e){return e.isRange},fields:[{name:"isRange",type:"bool",numBits:1},{name:"startVendorId",type:"int",numBits:16},{name:"endVendorId",type:"int",numBits:16,validator:function(e){return e.isRange}}]}]}};t.exports=m},{}],30:[function(e,t,n){"use strict";var r=e("./map-obj"),i=e("./replace"),o=e("./log");t.exports=function(e,t,n,s){t=t||{},n=n||{},(s||"undefined"==typeof s)&&(n=r(n,function(e,t){return[e,encodeURIComponent(t)]})),e=i(e,n);var a=[];for(var u in t)t.hasOwnProperty(u)&&t[u]&&a.push(encodeURIComponent(u)+"="+encodeURIComponent(t[u]));0!==a.length&&(e+=e.indexOf("?")===-1?"?":"&",e+=a.join("&")),o.info("Firing pixel %s",e),(new window.Image).src=e}},{"./log":34,"./map-obj":35,"./replace":38}],31:[function(e,t,n){arguments[4][2][0].apply(n,arguments)},{dup:2,siphash:14}],32:[function(e,t,n){"use strict";var r=[/bot/i,/spider/i,/facebookexternalhit/i,/simplepie/i,/yahooseeker/i,/embedly/i,/quora link preview/i,/outbrain/i,/vkshare/i,/monit/i,/Pingability/i,/Monitoring/i,/WinHttpRequest/i,/Apache-HttpClient/i,/getprismatic.com/i,/python-requests/i,/Twurly/i,/yandex/i,/browserproxy/i,/crawler/i,/Qwantify/i,/Yahoo! Slurp/i,/pinterest/i,/Tumblr\/14.0.835.186/i,/Tumblr Agent 14.0/i];t.exports=function(e){return r.some(function(t){return t.test(e)})}},{}],33:[function(e,t,n){"use strict";function r(){var e=o||window.location.toString();if(e=e.replace(/\.demo\.audienceproject\.com\//,"/"),s.url===e)return s.parsed;var t=i(e);return s.url=e,s.parsed=t,t}var i=e("./parseUrl"),o=null,s={};t.exports=r,t.exports.onLocationChange=function(e){var t=r().pathname,n=setInterval(function(){var n=r().pathname;n!==t&&(t=n,e(n))},100);return function(){clearInterval(n)}},t.exports.updateLocation=function(e){i(e),o=e},t.exports.parse=i},{"./parseUrl":37}],34:[function(e,t,n){"use strict";var r=e("./Event"),i=new r;t.exports.subscribe=i.subscribe.bind(i),t.exports.unsubscribe=i.unsubscribe.bind(i),t.exports.log=i.fire.bind(i,"log"),t.exports.info=i.fire.bind(i,"info"),t.exports.warn=i.fire.bind(i,"warn"),t.exports.error=i.fire.bind(i,"error")},{"./Event":21}],35:[function(e,t,n){"use strict";t.exports=function(e,t){for(var n={},r=Object.keys(e),i=0;i<r.length;i++){var o=t(r[i],e[r[i]]);n[o[0]]=o[1]}return n}},{}],36:[function(e,t,n){"use strict";t.exports=function(){for(var e,t,n=Object.prototype.hasOwnProperty,r={},i=0,o=arguments.length;i<o;++i){t=arguments[i];for(e in t)n.call(t,e)&&(r[e]=t[e])}return r}},{}],37:[function(e,t,n){"use strict";function r(e){var t=0!==e.indexOf("/")&&e.indexOf("/")!==-1&&(e.indexOf(":")===-1||e.indexOf(":")>e.indexOf("/")),n=i.exec(t?"noscheme://"+e:e),r={scheme:t?"":n[2]||"",host:n[4]||"",hostname:n[4]?n[4].split(":")[0]:"",pathname:n[5]||"",search:n[7]||"",hash:n[9]||"",toString:function(){return e}};return r.origin=r.scheme+"://"+r.host,r}var i=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?");t.exports=r},{}],38:[function(e,t,n){"use strict";t.exports=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e=e.split("{"+n+"}").join(String(t[n])));return e}},{}],39:[function(e,t,n){"use strict";t.exports=function(e){e=e||10;for(var t="";t.length<e;)t+=Math.random().toString(36).slice(2,3);return t}},{}],40:[function(e,t,n){"use strict";t.exports=function(){var e=Array.prototype,t=Object.keys&&Date.now&&e.forEach&&e.map&&e.filter&&e.indexOf&&e.some;return!!t}},{}],41:[function(e,t,n){"use strict";var r=e("@apr/promise-polyfill"),i=e("util-merge"),o=e("../"),s=e("../lib/log"),a=e("../lib/Event"),u=e("./log-to-console"),c=e("./check-browser"),f=e("../config"),l=e("../lib/isSpider.js");r._setUnhandledRejectionFn&&r._setUnhandledRejectionFn(s.error);try{if(f.debug&&u(),f.sakObject=window.__sak=i({},{customers:[],loaded:new a,starting:new a,started:new a},window.__sak||{}),s.info("Revision: %s; Publish date: %s; Customer: %s",f.revision,f.publishDate&&new Date(f.publishDate).toGMTString(),f.customerId),f.disabled)return void s.info("Disabled");if(c()===!1)return void s.info("Browser not supported");var d=l(window.navigator.userAgent);d&&s.warn("User agent is a bot-like, will be executed only plugins that declare that they can be called for bot-environments using `executeForSpiders = true`");var p=!!f.customerId&&f.sakObject.customers.indexOf(f.customerId)!==-1;if(f.sakObject.loaded.fire(f),p===!1){f.customerId&&f.sakObject.customers.push(f.customerId);var h=f.plugins.map(function(t){return e("plugin:"+t)});o(h,f.customerConfig,f,d).catch(s.error)}}catch(e){s.error(e)}},{"../":20,"../config":19,"../lib/Event":21,"../lib/isSpider.js":32,"../lib/log":34,"./check-browser":40,"./log-to-console":42,"@apr/promise-polyfill":5,"util-merge":17}],42:[function(e,t,n){"use strict";function r(e){var t=Array.prototype.slice.call(arguments,1);"string"==typeof t[0]?t[0]="SAK :: "+t[0]:t.unshift("SAK:");try{console[e].apply(console,t)}catch(n){switch(t.length){case 1:console.log(e,t[0]);break;case 2:console.log(e,t[0],t[1]);break;case 3:console.log(e,t[0],t[1],t[2]);break;default:console.log(e,t)}}}var i=e("../lib/log");t.exports=function(){return i.subscribe(r)}},{"../lib/log":34}],"plugin:iabcmp":[function(e,t,n){"use strict";function r(){return"function"==typeof window.__tcfapi}function i(){return!r()&&"function"==typeof window.__cmp}function o(e,t){return new d(function(n,r){window.__cmp(e,t,function(t,i){i?n(t):r(new Error("Error calling __cmp:"+e))})})}function s(e,t){return new d(function(n,r){window.__tcfapi("addEventListener",2,function(i,o){o?"tcloaded"!==i.eventStatus&&"useractioncomplete"!==i.eventStatus||(window.__tcfapi("removeEventListener",2,function(){},i.listenerId),window.__tcfapi(e,2,n,t)):r(new Error("Error calling __tcfapi:"+e))},t)})}function a(e,t){return new d(function(n){window.__tcfapi(e,2,function(r){"tcloaded"===r.eventStatus||"useractioncomplete"===r.eventStatus?n(r):s(e,t).then(n)},t)})}function u(){return m.consents.tcStringV2?d.resolve(y(m.consents.tcStringV2)):m.consents.tcStringV1?d.resolve({core:h(m.consents.tcStringV1)}):b===!0?o("getConsentData",null).then(function(e){return{core:h(e.consentData)}}):w===!0?a("getTCData",[v]).then(function(e){return e.tcString?y(e.tcString):{}}):d.resolve({})}function c(e){return E.then(function(){return m.consents.tcStringV2?d.resolve(y(m.consents.tcStringV2)).then(function(t){if(!t)return!1;if(t.core.vendorConsents[v]!==!0)return!1;for(var n=0;n<e[2].length;n++)if(t.core.purposeConsents[e[2][n]]!==!0)return!1;return!0}):m.consents.tcStringV1?d.resolve(h(m.consents.tcStringV1)).then(function(t){if(t.allowedVendorIds.indexOf(v)===-1)return!1;for(var n=0;n<e[1].length;n++)if(t.allowedPurposeIds.indexOf(e[1][n])===-1)return!1;return!0}):b===!0?o("getVendorConsents",[v]).then(function(t){if(t.gdprApplies!==!0)return!0;if("undefined"==typeof t.vendorConsents[v])return!0;if(t.vendorConsents[v]!==!0)return!1;for(var n=0;n<e[1].length;n++)if(t.purposeConsents[e[1][n]]!==!0)return!1;return!0}):w===!0?a("getTCData",[v]).then(function(t){return u().then(function(n){var r=n.core&&n.core.publisherRestrictions&&n.core.publisherRestrictions[String(v)];return r?r.every(function(t){return!e[2]||!e[2].includes(t.purpose)||t.isAllowed&&(!t.isConsentRequired||n.publisherTC&&n.publisherTC.purposeConsents&&n.publisherTC.purposeConsents[t.purpose])&&(!t.isLegitimateInterestRequired||n.publisherTC&&n.publisherTC.purposeLegitimateInterests&&n.publisherTC.purposeLegitimateInterests[t.purpose])})&&t:t})}).then(function(t){if(!t)return!1;if(t.gdprApplies!==!0)return!0;if(!t.vendor||!t.purpose)return!0;if(t.vendor.consents[v]!==!0)return!1;for(var n=0;n<e[2].length;n++)if(t.purpose.consents[e[2][n]]!==!0)return!1;return!0}):d.resolve(!0)})}function f(){return E.then(function(){return m.consents.tcStringV2?d.resolve({gdpr_consent:m.consents.tcStringV2,gdpr:"1"}):m.consents.tcStringV1?d.resolve({iab_consent:m.consents.tcStringV1,iab_gdpr:"1"}):b===!0?o("getConsentData",null).then(function(e){return{iab_consent:e.core&&e.core.consentData||"",iab_gdpr:e.core&&e.core.gdprApplies?"yes":"no"}}):w===!0?a("getTCData",[v]).then(function(e){return{gdpr_consent:e.tcString||"",gdpr:e.gdprApplies?"1":"0"}}):d.resolve({})})}var l,d=e("@apr/promise-polyfill"),p=e("../lib/consent"),h=e("../lib/decodeConsentString"),g=e("../lib/log"),m=e("../config"),y=e("tc-string-parse"),v=394,w=r(),b=i(),E=new d(function(e){l=e});p.enable({acquire:c,getForwardParams:f,getConsentData:u,hasTTL:r}),t.exports=function(e){if(m.consents.tcStringV2?g.info("Using custom TCF 2.0 string"):m.consents.tcStringV1?g.info("Using custom TCF 1.1 string"):w?g.info("Using TCF 2.0 API from page"):b?g.info("Using TCF 1.1 API from page"):g.info("No TCF API found on page"),m.debug&&!b&&!w)var t=setInterval(function(){(r()||i())&&(clearInterval(t),g.error("TCF API loaded after SAK script is initialized"))},1e3);l(e.config.iabcmp)},t.exports.executeForSpiders=!0},{"../config":19,"../lib/consent":28,"../lib/decodeConsentString":29,"../lib/log":34,"@apr/promise-polyfill":5,"tc-string-parse":16}],"plugin:tag-system":[function(e,t,n){"use strict";function r(e){var t=Number(new Date),n=e.lastAddedTime;return!n||t-n>e.renewInterval}var i=e("@apr/promise-polyfill"),o=e("../lib/add-frame"),s=e("../lib/cache"),a=e("../lib/consent"),u=e("../lib/log"),c=e("../lib/append-hash-params"),f=e("@apr/dsu"),l=e("querystring-es3/decode"),d=e("../config"),p="https://tag.userreport.com/server.html",h="userreport-tag-system",g="apr_tsys";t.exports=function(e){return!d.consents.storage||d.dnt?void u.info("Skip load tag system script due to storage consent"):void a.acquire({1:[a.IDENTIFY],2:[a.V2_USE_DEVICE]}).then(function(t){if(t===!1)return i.resolve();var n=e.config,m=s.get(g)||{},y=n["tag-system"],v=n["userreport-invitation-utils"]||{},w=y.suppressCookieSync||v.suppressCookieSync?"1":"-1";if(m.renewInterval=y.renewInterval||288e5,r(m)===!1)return u.info("Skip load tag system script"),i.resolve();var b=l(window.location.hash.slice(1)),E=String(Math.floor(1e6*Math.random())),I={instanceId:E,dsu:d.consents.storage&&!d.dnt&&(b.dsu||f.readOrCreateDsu(a.hasTTL()))||"",origin:b.back||window.location.href.replace(/\/$/,""),suppressCS:w};b.rid&&(I.deviceId=b.rid),a.hasTTL()&&(I.tcf=!0);var _=c(p,I);return o(_,{id:h}),u.info("Add tag system script"),m.lastAddedTime=Number(new Date),s.set(g,{},m)})}},{"../config":19,"../lib/add-frame":22,"../lib/append-hash-params":24,"../lib/cache":25,"../lib/consent":28,"../lib/log":34,"@apr/dsu":1,"@apr/promise-polyfill":5,"querystring-es3/decode":13}],"plugin:userreport-ak":[function(e,t,n){"use strict";function r(){var e={},t=/(?: |^)_usrp_lq=([^;]+)/.exec(document.cookie);t&&(e.lq_c=t[1]);var n=window.localStorage.getItem("_usrp_lq");return n&&(e.lq_ls=n),e}function i(){return f.getForwardParams().then(function(e){f.acquire({1:[f.IDENTIFY],2:[f.V2_USE_DEVICE]}).then(function(t){var n=t&&m.consents.storage&&!m.dnt?h.readOrCreateDsu(f.hasTTL()):"";d(y,a({t:s,d:v,rnd:p(),dsu:n,med:l().toString()},e,b,r())),E.forEach(function(t){d(y,a({t:t,d:v,rnd:p(),dsu:n,med:l().toString()},e,b,r()))})})})}var o,s,a=e("util-merge"),u=e("./userreport-core"),c=e("../lib/log"),f=e("../lib/consent"),l=e("../lib/location"),d=e("../lib/fire-pixel"),p=e("../lib/rnd"),h=e("@apr/dsu"),g=e("../api"),m=e("../config"),y=new f.DNTSelect("https://visitanalytics.userreport.com/hit","https://visitanalytics.dnt-userreport.com/hit"),v="",w={},b={},E=[];t.exports=function(e){var t=u.resolveCurrent(e),n=e.config["userreport-ak"].trackingConfig;if(e.isSpider&&(b={event:"bot"}),o=e.config["userreport-core"]&&e.config["userreport-core"].companyId,!t.mediaId)return o&&f.getForwardParams().then(function(e){f.acquire({1:[f.IDENTIFY],2:[f.V2_USE_DEVICE]}).then(function(t){var n=t&&m.consents.storage&&!m.dnt?h.readOrCreateDsu(f.hasTTL()):"";d(y,a({t:"USRur-core-nomedia",accountId:o,
rnd:p(),dsu:n,med:l().toString()},e,b))})}),function(){};e.config["userreport-ak"].trackingConfig.forEach(function(e){"Section"===e.type&&e.mediaId===t.mediaId&&(w[e.sectionId]=e.trackingCode)});var r=n.filter(function(e){return"Media"===e.type&&e.mediaId===t.mediaId}).map(function(e){return e.trackingCode});return E=n.filter(function(e){return"Section"===e.type&&e.mediaId===t.mediaId&&t.sectionIds.indexOf(e.sectionId)!==-1}).map(function(e){return e.trackingCode}),0===r.length?(c.info("No media tracking matching"),null):r.length>1?(c.error("More than one media TP matching",r),null):(s=r[0],i().then(function(){return l.onLocationChange(function(){i()})}))},t.exports.executeForSpiders=!0,g.trackSectionPageView=function(e){if(!e)return void c.warn("Section ID is not passed");var t=w[e];return t?void f.getForwardParams().then(function(e){f.acquire({1:[f.IDENTIFY],2:[f.V2_USE_DEVICE]}).then(function(n){var i=n&&m.consents.storage&&!m.dnt?h.readOrCreateDsu(f.hasTTL()):"";d(y,a({t:t,d:v,rnd:p(),dsu:i,med:l().toString()},e,b,r()))})}):void c.warn("Section ID "+e+" does not belong to current media")},g.setMAID=function(e){v=e},g.trackPageview=function(e){var t=e||l().toString();f.getForwardParams().then(function(e){f.acquire({1:[f.IDENTIFY],2:[f.V2_USE_DEVICE]}).then(function(n){var i=n&&m.consents.storage&&!m.dnt?h.readOrCreateDsu(f.hasTTL()):"";s?d(y,a({t:s,d:v,rnd:p(),dsu:i,med:t},e,b,r())):d(y,a({t:"USRur-core-nomedia",accountId:o,rnd:p(),dsu:i,med:l().toString()},e,b))})})}},{"../api":18,"../config":19,"../lib/consent":28,"../lib/fire-pixel":30,"../lib/location":33,"../lib/log":34,"../lib/rnd":39,"./userreport-core":"plugin:userreport-core","@apr/dsu":1,"util-merge":17}],"plugin:userreport-core":[function(e,t,n){"use strict";function r(e){var t=v();return new RegExp(e).test(t.hostname+t.pathname)}function i(e,t){for(var n=window._urq||[],r=0;r<n.length;r++)if(n[r][0]===e&&n[r][1]===t)return!0;for(var i=window.audienceProjectLayer||[],o=0;o<i.length;o++)if(i[o][0]===e&&i[o][1]===t)return!0;return!1}function o(e){return!!i("setMediaId",e.id)&&(y.log("Media matched by _urq:",e.id),!0)}function s(e){return!!i("setSectionId",e.id)&&(y.log("Section matched by _urq:",e.id),!0)}function a(e,t){for(var n=window.document.getElementsByTagName("meta"),r=0;r<n.length;r++){var i=n[r].getAttribute("name"),o=n[r].getAttribute("value");if(i===e&&o===String(t))return!0}return!1}function u(e){return!!a("userreport:mediaId",e.id)&&(y.log("Media matched by meta:",e.id),!0)}function c(e){return!!a("userreport:sectionId",e.id)&&(y.log("Section matched by meta:",e.id),!0)}function f(e,t){if(!e.rules)return!1;for(var n=0;n<e.rules.length;n++){var r=e.rules[n],i=t[r.operation];if(i||y.error("Not supported rule",e.id,r.operation),i(r.pattern))return!0}return!1}function l(e){return!!f(e,A)&&(y.log("Media matched by rule:",e.id),!0)}function d(e){return!!f(e,T)&&(y.log("Section matched by rule:",e.id),!0)}function p(e){var t={companyId:null,mediaId:null,sectionIds:null},n=e.config["userreport-core"],r=n.networkLayout,i=r.filter(o);if(i.length||(i=r.filter(u)),i.length||(i=r.filter(l)),0===i.length)return y.error("Can’t resolve media"),t;if(i.length>1)return y.error("Resolved more than one media",i),t;var a=i[0],f=(a.sections||[]).filter(function(e){return s(e)||c(e)||d(e)});return t.companyId=n.companyId,t.mediaId=a.id,t.sectionIds=f.map(function(e){return e.id}),C=t.mediaId,y.info("Resolved media:",t.mediaId),y.info("Resolved sections:",t.sectionIds),t}function h(e){var t=e&&e.lastUpdated;if(!t)return!1;t.getTime&&(t=t.getTime());var n=6e4;return(new Date).getTime()-t<n}function g(e){var t=function(t){var n=t.data;if(n===k){var r={config:{mediaId:e.mediaId}};t.source.postMessage(JSON.stringify(r),t.origin)}};window.addEventListener("message",t,!1)}var m=e("../lib/consent"),y=e("../lib/log"),v=e("../lib/location"),w=e("../api"),b=e("../lib/add-script-tag"),E=e("../lib/check/domain"),I=e("../lib/check/section"),_=e("util-merge"),S=e("../config"),x="https://cdn.userreport.com/userreport.js",C=null,A={DomainEquals:E,StartsWith:function(e){var t=v(),n=t.hostname+t.pathname;return e.indexOf("?")!==-1&&(n+="?"+t.search),e.indexOf("#")!==-1&&(n+="#"+t.hash),0===n.indexOf(e)},Contains:function(e){return v().toString().indexOf(e)!==-1},RegEx:r},T={Section:I,Contains:function(e){return v().toString().indexOf(e)!==-1},StartsWith:function(e){var t=v(),n=t.pathname;return e.indexOf("?")!==-1&&(n+="?"+t.search),e.indexOf("#")!==-1&&(n+="#"+t.hash),0===n.indexOf(e)},UrlEquals:function(e){var t=v(),n=v.parse(e);if(n.host&&n.host!==n.hostname&&t.host!==n.host)return!1;if(n.hostname&&t.hostname!==n.hostname)return!1;if(n.pathname){var r="/"===n.pathname.slice(-1)[0]?n.pathname.slice(0,-1):n.pathname,i="/"===t.pathname.slice(-1)[0]?t.pathname.slice(0,-1):t.pathname;if(r!==i)return!1}return(!n.search||t.search===n.search)&&(!n.hash||t.hash===n.hash)},RegExp:r,RegEx:r,PathEquals:function(e){return v().pathname===e}},k="getSiteConfig";t.exports=function(e){return m.acquire({1:[m.IDENTIFY],2:[m.V2_USE_DEVICE,m.V2_MEASURE_PERFORMANCE_CONTENT]}).then(function(t){if(t===!1)return null;if(window.location.href.indexOf("__urp=suppress")!==-1)try{y.info("Invitation suppressed forever"),window.localStorage.setItem("_usrp_lq","20300101")}catch(e){}window._urq=window._urq||[],m.getForwardParams().then(function(e){(e.gdpr||e.gdpr_consent)&&(window._urq.push(["setGDPR",e.gdpr?"1":"0"]),window._urq.push(["setGDPRConsent",e.gdpr_consent]))}),S.dnt&&window._urq.push(["forwardAnonymousTracking",S.dnt]),S.consents.storage||window._urq.push(["forwardConsents",S.consents]);var n=p(e);if(g(n),n.mediaId){m.getConsentData().then(function(e){e.core&&h(e.core)&&(window._urq.push(["inhibitInvitation",!0]),setTimeout(function(){window._urq.push(["tryToInvite"])},6e4))}),window._urq.push(["initSite",n.mediaId]),y.info("Initalizing UserReport for media:",n.mediaId);var r=e.config["userreport-invitation-utils"]&&e.config["userreport-invitation-utils"].optimizeScriptLoading===!0;r||b(x,{id:"userreport-script"})}else{var i=/__(bpn|urp)=test_invite/i.test(window.location.href);i&&alert("Unable to identify media, domain is not configured or dublicated Media created. ")}return null})},t.exports.resolveCurrent=p,t.exports.checkAdsDomain=function(e){var t=p(e);return!!t&&null!==t.mediaId},w.embedSurvey=function(e,t){if("string"==typeof e&&(e=document.getElementById(e)||document.querySelector(e)),!e)throw new Error("Unable to find passed container");var n={ignoreLocalQuarantine:!1,mediaId:C,surveyUrl:"https://sak.userreport.com/_rt/vs/survey",onDoneCallback:function(){},customizations:{invitation:{headline:null,accept:null,decline:null},thankYou:{headline:null,close:null,powered:null},disabledQuestions:[]}};if(t=_({},n,t),!t.mediaId)throw new Error("Media is not defined. You need to pass mediaId in options or setup media matching rules");var r={};t.customizations.invitation&&(r.invitation={},t.customizations.invitation.headline&&(r.invitation.headline=t.customizations.invitation.headline),t.customizations.invitation.accept&&(r.invitation.accept=t.customizations.invitation.accept),t.customizations.invitation.decline&&(r.invitation.decline=t.customizations.invitation.decline)),t.customizations.thankYou&&(r.thankYou={},t.customizations.thankYou.headline&&(r.thankYou.headline=t.customizations.thankYou.headline),t.customizations.thankYou.close&&(r.thankYou.close=t.customizations.thankYou.close),t.customizations.thankYou.built&&(r.thankYou.built=t.customizations.thankYou.built)),t.customizations.disabledQuestions&&t.customizations.disabledQuestions.length>0&&(r.questionOverrides={},t.customizations.disabledQuestions.forEach(function(e){r.questionOverrides["q"+e]=null,23===e&&(r.questionOverrides.q100103=null,r.questionOverrides.q100104=null)}));var i=document.createElement("iframe");for(i.style.width="100%",i.style.height="100%",i.src=t.surveyUrl+"?mid="+t.mediaId+"#localization="+encodeURIComponent(JSON.stringify(r)),i.frameborder="no",i.style.border="none 0";e.firstChild;)e.removeChild(e.lastChild);e.appendChild(i),window.addEventListener("message",function(e){"userreport.surveyEnded"===e.data.name&&t.onDoneCallback&&t.onDoneCallback()})},w.setMediaId=function(){return null},w.setSectionId=function(){return null}},{"../api":18,"../config":19,"../lib/add-script-tag":23,"../lib/check/domain":26,"../lib/check/section":27,"../lib/consent":28,"../lib/location":33,"../lib/log":34,"util-merge":17}],"plugin:userreport-invitation-utils":[function(e,t,n){"use strict";function r(e){var t=e||new Date;return Number(t.toISOString().split("T")[0].split("-").join(""))}function i(e){return 0+e>r(new Date)}function o(e){var t=null,n=window.localStorage.getItem(I);if("string"==typeof n)try{t=JSON.parse(n)}catch(e){}if(null===t)h.info("Starting user tracking"),t={lastVisitTime:Date.now(),sessionsCount:1,sessionPageviewsCount:1,totalPageviewsCount:1};else{h.info("Last time visited at %s",new Date(t.lastVisitTime));var r=Date.now()-t.lastVisitTime>e;r?(t.sessionsCount+=1,t.sessionPageviewsCount=1,h.info("New session %d started",t.sessionsCount)):(t.sessionPageviewsCount+=1,h.info("Visited %d times in this session",t.sessionPageviewsCount)),t.totalPageviewsCount+=1,h.info("Visited %d times in total",t.totalPageviewsCount),t.lastVisitTime=Date.now()}try{return b.consents.storage&&!b.dnt&&window.localStorage.setItem(I,JSON.stringify(t)),t}catch(e){return null}}function s(e,t,n){var r=t.getBoundingClientRect(),i=!(r.top||r.right||r.bottom||r.left||r.width||r.height);if(i)return null;var o=window.getComputedStyle(t),a="hidden"===o.getPropertyValue("visibility");if(a)return null;if("fixed"===o.getPropertyValue("position")){var u=r.width*r.height;return u>=e?t:null}if(n>=_)return null;var c=t.children;if(c.length>S)return null;for(var f=0;f<c.length;f++){var l=s(e,c[f],n+1);if(null!==l)return l}return null}function a(e){var t=1e3*(e.timeout||30),n=e.areaPercentage||50;return new d(function(e){setTimeout(e,t)}).then(function(){for(var e=window.innerWidth*window.innerHeight,t=e*(n/100),r=document.body.children,i=0;i<r.length;i++){var o=s(t,r[i],0);if(null!==o)return o}return null})}function u(e){var t=window._urq=window._urq||[];t.unshift?t.unshift(e):h.warn("Userreport already started")}function c(e){var t=window._urq=window._urq||[];t.push(e)}function f(e){var t=e.config["userreport-invitation-utils"],n={};for(var r in t)"domainSpecific"!==r&&t.hasOwnProperty(r)&&(n[r]=t[r]);var i=g(),o=t.domainSpecific&&t.domainSpecific[i.hostname];if(o)for(var s in o)o.hasOwnProperty(s)&&(n[s]=o[s]);return n}function l(){P||(T&&k?(P=!0,p.acquire({1:[p.IDENTIFY],2:[p.V2_USE_DEVICE,p.V2_MEASURE_PERFORMANCE_CONTENT]}).then(function(e){return e===!1?null:(window._urq=window._urq||[],p.getForwardParams().then(function(e){(e.gdpr||e.gdpr_consent)&&(window._urq.push(["setGDPR",e.gdpr?"1":"0"]),window._urq.push(["setGDPRConsent",e.gdpr_consent]))}),b.dnt&&window._urq.push(["forwardAnonymousTracking",b.dnt]),b.consents.storage||window._urq.push(["forwardConsents",b.consents]),y(x,{id:"userreport-script"}))})):h.info("UserReport script not loaded.",JSON.stringify({canBeInvited:T,mayBeInvited:k})))}var d=e("@apr/promise-polyfill"),p=e("../lib/consent"),h=e("../lib/log"),g=e("../lib/location"),m=e("../api"),y=e("../lib/add-script-tag"),v=e("../lib/fire-pixel"),w=e("@apr/dsu"),b=e("../config"),E=144e5,I="_usrp_tracker",_=4,S=10,x="https://cdn.userreport.com/userreport.js",C=new p.DNTSelect("https://visitanalytics.userreport.com/hit","https://visitanalytics.dnt-userreport.com/hit"),A="",T=!0,k=!0,P=!1,R=null;t.exports=function(e){R=e.sakConfig?e.sakConfig.customerId:null;var t=f(e);h.info("UserReport utils config:",t),t.integrateWithGTM===!0&&u(["integrateWithGTM",void 0,["SecondsOnPage"]]),t.suppressCookieSync&&u(["suppressCookieSync"]),t.requirePolicyAcceptance&&(h.info("Requiring policy acceptance"),u(["setPrivacyPolicyChecked",!1])),t.customTranslations&&(h.info("Applying custom translation"),Object.keys(t.customTranslations).forEach(function(e){var n=t.customTranslations[e];u(["setCustomTranslation",e,n])}));var n=function(){k=!1,h.info("Postponing invitation"),u(["inhibitInvitation",!0])},r=function(){k=!0,h.info("Trying to invite to UserReport"),c(["tryToInvite"]),l()};t.muteByDefault&&n();var s=t.sessionTimeout||E,d=t.inviteOnSession||1,p=t.inviteOnSessionPageview||1,g=1!==d||1!==p?o(s):null,m=null===g||g.sessionsCount>=d&&g.sessionPageviewsCount>=p;m===!1?n():t.popupDetection&&(n(),a(t.popupDetection).then(function(e){if(null!==e)h.info("Another popup element detected");else if(t.popupDetection.pushdownElement){var n=document.querySelector(t.popupDetection.pushdownElement);n?!function e(){window.scrollY>=n.clientHeight?(h.info("Pusdown element not on screen."),r()):(h.info("Pusdown element is still on screen"),setTimeout(e,1e3))}():(h.info("Pusdown element not found"),r())}else r()}));var y=window.localStorage.getItem("_usrp_lq");i(y)&&(h.info("User in LocalStorage local quarantine"),T=!1,A+="l");var v=/(?: |^)_usrp_lq=([^;]+)/.exec(document.cookie);if(v){var w=v[1];i(w)&&(h.info("User in Cookie local quarantine"),T=!1,A+="c")}b.consents.storage&&!b.dnt||(T=!1),window.location.href.indexOf("__urp=test_invite")!==-1&&(T=!0,k=!0),l()},m.attemptToInvite=function(e){k=!0,h.info("[API] attemptToInvite"),c(["tryToInvite",e]),l();var t=b.consents.storage&&!b.dnt?w.readOrCreateDsu(p.hasTTL()):"",n="USR"+R+"-invattempt-"+(T?"y":"n");v(C,{t:n,dsu:t,med:g().toString(),canBeInvited:T,qi:A})}},{"../api":18,"../config":19,"../lib/add-script-tag":23,"../lib/consent":28,"../lib/fire-pixel":30,"../lib/location":33,"../lib/log":34,"@apr/dsu":1,"@apr/promise-polyfill":5}]},{},[41])}();