/*! For license information please see initAdobeAnalytics.65726c4e7b18d11673058ef9e5cff0e4.js.LICENSE.txt */
!function(){var e={757:function(e,t,i){e.exports=i(666)},566:function(e,t){var i,a;"undefined"!=typeof self&&self,i=function(e){var t={};(function(){var e;!function(e){if(void 0===t)var t={};if(void 0===i)var i={};if(void 0===a)var a={};if(a.radio||(a.radio={}),a.plugin||(a.plugin={}),void 0===r)var r={};r.clock||(r.clock={}),function(e){"use strict";function t(e,t){var i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}function i(e,i,a,r,n,s){return t(function(e,t){return e<<t|e>>>32-t}(t(t(i,e),t(r,s)),n),a)}function a(e,t,a,r,n,s,o){return i(t&a|~t&r,e,t,n,s,o)}function r(e,t,a,r,n,s,o){return i(t&r|a&~r,e,t,n,s,o)}function n(e,t,a,r,n,s,o){return i(t^a^r,e,t,n,s,o)}function s(e,t,a,r,n,s,o){return i(a^(t|~r),e,t,n,s,o)}function o(e,i){e[i>>5]|=128<<i%32,e[14+(i+64>>>9<<4)]=i;var o,l,h,d,c,p=1732584193,u=-271733879,_=-1732584194,g=271733878;for(o=0;o<e.length;o+=16)l=p,h=u,d=_,c=g,p=a(p,u,_,g,e[o],7,-680876936),g=a(g,p,u,_,e[o+1],12,-389564586),_=a(_,g,p,u,e[o+2],17,606105819),u=a(u,_,g,p,e[o+3],22,-1044525330),p=a(p,u,_,g,e[o+4],7,-176418897),g=a(g,p,u,_,e[o+5],12,1200080426),_=a(_,g,p,u,e[o+6],17,-1473231341),u=a(u,_,g,p,e[o+7],22,-45705983),p=a(p,u,_,g,e[o+8],7,1770035416),g=a(g,p,u,_,e[o+9],12,-1958414417),_=a(_,g,p,u,e[o+10],17,-42063),u=a(u,_,g,p,e[o+11],22,-1990404162),p=a(p,u,_,g,e[o+12],7,1804603682),g=a(g,p,u,_,e[o+13],12,-40341101),_=a(_,g,p,u,e[o+14],17,-1502002290),p=r(p,u=a(u,_,g,p,e[o+15],22,1236535329),_,g,e[o+1],5,-165796510),g=r(g,p,u,_,e[o+6],9,-1069501632),_=r(_,g,p,u,e[o+11],14,643717713),u=r(u,_,g,p,e[o],20,-373897302),p=r(p,u,_,g,e[o+5],5,-701558691),g=r(g,p,u,_,e[o+10],9,38016083),_=r(_,g,p,u,e[o+15],14,-660478335),u=r(u,_,g,p,e[o+4],20,-405537848),p=r(p,u,_,g,e[o+9],5,568446438),g=r(g,p,u,_,e[o+14],9,-1019803690),_=r(_,g,p,u,e[o+3],14,-187363961),u=r(u,_,g,p,e[o+8],20,1163531501),p=r(p,u,_,g,e[o+13],5,-1444681467),g=r(g,p,u,_,e[o+2],9,-51403784),_=r(_,g,p,u,e[o+7],14,1735328473),p=n(p,u=r(u,_,g,p,e[o+12],20,-1926607734),_,g,e[o+5],4,-378558),g=n(g,p,u,_,e[o+8],11,-2022574463),_=n(_,g,p,u,e[o+11],16,1839030562),u=n(u,_,g,p,e[o+14],23,-35309556),p=n(p,u,_,g,e[o+1],4,-1530992060),g=n(g,p,u,_,e[o+4],11,1272893353),_=n(_,g,p,u,e[o+7],16,-155497632),u=n(u,_,g,p,e[o+10],23,-1094730640),p=n(p,u,_,g,e[o+13],4,681279174),g=n(g,p,u,_,e[o],11,-358537222),_=n(_,g,p,u,e[o+3],16,-722521979),u=n(u,_,g,p,e[o+6],23,76029189),p=n(p,u,_,g,e[o+9],4,-640364487),g=n(g,p,u,_,e[o+12],11,-421815835),_=n(_,g,p,u,e[o+15],16,530742520),p=s(p,u=n(u,_,g,p,e[o+2],23,-995338651),_,g,e[o],6,-198630844),g=s(g,p,u,_,e[o+7],10,1126891415),_=s(_,g,p,u,e[o+14],15,-1416354905),u=s(u,_,g,p,e[o+5],21,-57434055),p=s(p,u,_,g,e[o+12],6,1700485571),g=s(g,p,u,_,e[o+3],10,-1894986606),_=s(_,g,p,u,e[o+10],15,-1051523),u=s(u,_,g,p,e[o+1],21,-2054922799),p=s(p,u,_,g,e[o+8],6,1873313359),g=s(g,p,u,_,e[o+15],10,-30611744),_=s(_,g,p,u,e[o+6],15,-1560198380),u=s(u,_,g,p,e[o+13],21,1309151649),p=s(p,u,_,g,e[o+4],6,-145523070),g=s(g,p,u,_,e[o+11],10,-1120210379),_=s(_,g,p,u,e[o+2],15,718787259),u=s(u,_,g,p,e[o+9],21,-343485551),p=t(p,l),u=t(u,h),_=t(_,d),g=t(g,c);return[p,u,_,g]}function l(e){var t,i="";for(t=0;t<32*e.length;t+=8)i+=String.fromCharCode(e[t>>5]>>>t%32&255);return i}function h(e){var t,i=[];for(i[(e.length>>2)-1]=void 0,t=0;t<i.length;t+=1)i[t]=0;for(t=0;t<8*e.length;t+=8)i[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return i}function d(e){var t,i,a="0123456789abcdef",r="";for(i=0;i<e.length;i+=1)t=e.charCodeAt(i),r+=a.charAt(t>>>4&15)+a.charAt(15&t);return r}function c(e){return unescape(encodeURIComponent(e))}function p(e){return function(e){return l(o(h(e),8*e.length))}(c(e))}function u(e,t){return function(e,t){var i,a,r=h(e),n=[],s=[];for(n[15]=s[15]=void 0,r.length>16&&(r=o(r,8*e.length)),i=0;i<16;i+=1)n[i]=909522486^r[i],s[i]=1549556828^r[i];return a=o(n.concat(h(t)),512+8*t.length),l(o(s.concat(a),640))}(c(e),c(t))}e.md5=function(e,t,i){return t?i?u(t,e):function(e,t){return d(u(e,t))}(t,e):i?p(e):function(e){return d(p(e))}(e)}}(t),function(e){"use strict";e.StringUtils={startsWith:function(e,t){return 0==e.indexOf(t)}}}(t),function(e){"use strict";var t={clone:function(e){var t={};for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},merge:function(e,i){var a=t.clone(e);for(var r in i)i.hasOwnProperty(r)&&(a[r]=i[r]);return a},append:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}};e.ObjectUtils=t}(t),function(e){"use strict";function t(e){if(null==e)return!0;for(var t=0;t<e.length;++t)if(isNaN(e[t]))return!1;return!0}function i(e,i){if("string"!=typeof e||"string"!=typeof i)return NaN;var a=e.split("."),r=i.split(".");if(!t(a)||!t(r))return NaN;for(var n=Math.max(a.length,r.length),s=0;s<n;++s){var o=null!=a[s]?a[s]:"0",l=null!=r[s]?r[s]:"0";if((o=Number(o))>(l=Number(l)))return 1;if(o<l)return-1}return 0}var a={isGreaterThan:function(e,t){return i(e,t)>0},isGreaterThanEqual:function(e,t){return i(e,t)>=0},isLessThan:function(e,t){return i(e,t)<0},isLessThanEqual:function(e,t){return i(e,t)<=0},isSame:function(e,t){return 0===i(e,t)},isDifferent:function(e,t){return 0!==i(e,t)}};e.VersionUtils=a}(t),function(e){"use strict";function t(e,t,i){this.fn=e,this.ctx=t,this.params=i}t.prototype.run=function(){this.params?this.fn.apply(this.ctx,this.params):this.fn.apply(this.ctx)},e.radio.Command=t}(a),function(e){"use strict";function t(e,t){this._queue=[],this._lastTs=0,this._isSuspended=void 0!==e&&e,this._delay=void 0!==t?t:0}t.prototype.addCommand=function(e){this._queue.push(e),this._drain()},t.prototype.cancelAllCommands=function(){this._queue=[]},t.prototype.isEmpty=function(){return 0===this._queue.length},t.prototype.suspend=function(){this._isSuspended=!0},t.prototype.resume=function(){this._isSuspended=!1,this._drain()},t.prototype.flush=function(){this._isSuspended=!1;for(var e=0;e<this._queue.length;e++)this._queue[e].run();this._queue=[]},t.prototype._drain=function(){if(!this._isSuspended&&!this._drainInProgress){this._drainInProgress=!0;var e=this;!function t(){var i=e._queue.shift();i?e._runCommand(i,(function(){e._isSuspended||t()})):e._drainInProgress=!1}()}},t.prototype._runCommand=function(e,t){function i(){e.run(),null!=t&&t.call(a)}var a=this;if(0==this._lastTs)i();else{var r=(new Date).getTime(),n=r-this._lastTs;this._lastTs=r,n<this._delay?setTimeout(i,this._delay-n):i()}},e.radio.CommandQueue=t}(a),function(e){"use strict";function t(e,t){if(this._name=e,!t)throw new Error("Reference to the logger object cannot be NULL");this._logger=t,this._listeners={},this._requests={},this._commands={},this._isShutDown=!1}function i(e,i){if(e===i)return!0;for(var a=(e||"").split(t.SEPARATOR),r=(i||"").split(t.SEPARATOR),n=!0,s=0;s<a.length;s++)n=n&&(a[s]===t.WILDCARD||a[s]===r[s]);return n}t.WILDCARD="*",t.SEPARATOR=":",t.prototype.toString=function(){return"<channel: "+this._name+">"},t.prototype.shutdown=function(){this._isShutDown||(this._logger.debug(a,"#shutdown > Shutting down"),this.off(),this._requests={},this._commands={},this._isShutDown=!0)},t.prototype.on=function(e,t,i){this._isShutDown||(this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push({fn:t,ctx:i}))},t.prototype.off=function(e,t,i){if(!this._isShutDown){if(t="function"==typeof t?t:null,!e&&null==t&&!i)return void(this._listeners={});if(e)this._removeListener(e,t,i);else for(e in this._listeners)this._listeners.hasOwnProperty(e)&&this._removeListener(e,t,i)}},t.prototype.trigger=function(e){if(!this._isShutDown)for(var t in this._listeners)if(this._listeners.hasOwnProperty(t)&&i(t,e.name))for(var a=this._listeners[t].slice(0),r=0;r<a.length;r++){var n=a[r];n.fn.call(n.ctx,e)}},t.prototype.comply=function(e,t,i){this._isShutDown||(this._commands[e]={cmd:t,ctx:i})},t.prototype.command=function(e,t){if(!this._isShutDown){var i=this._commands[e];if(!i)return void this._logger.warn(a,"#command > No command handler for: "+e);i.cmd.call(i.ctx,t)}},t.prototype.reply=function(e,t,i){this._isShutDown||(this._requests[e]={fn:t,ctx:i})},t.prototype.request=function(e){if(!this._isShutDown){var t=this._requests[e];return t?t.fn.call(t.ctx):(this._logger.warn(a,"#request > No request handler for: "+e),null)}},t.prototype._removeListener=function(e,t,i){t="function"==typeof t?t:null;var a=this._listeners[e];if(a){if(!a.length||null==t&&!i)return void delete this._listeners[e];for(var r=0;r<a.length;r++){var n=a[r];null!==t&&t!==n.fn||i&&i!==n.ctx||this._listeners[e].splice(r,1)}}};var a="radio::Channel";e.radio.Channel=t}(a),function(e){"use strict";function t(e){if(!e)throw new Error("Reference to the logger object cannot be NULL");this._logger=e,this._channels={}}var i=e.radio.Channel;t.prototype.channel=function(e){return this._channels[e]||(this._channels[e]=new i(e,this._logger)),this._channels[e]},t.prototype.shutdown=function(){for(var e in this._channels)this._channels.hasOwnProperty(e)&&this._channels[e].shutdown()},e.radio.Radio=t}(a),function(e){"use strict";e.extend=function(e,t){function i(){this.constructor=e}for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e}}(a),function(e){"use strict";function t(){}t.prototype.write=function(e){throw new Error("Implementation error: Method must be overridden.")},e.ILogWriter=t}(a),function(e){"use strict";function t(){}t.prototype.write=function(e){window.console&&window.console.log&&window.console.log(e)},e.LogWriter=t}(a),function(e){"use strict";function t(){}t.prototype.setLogWriter=function(e){throw new Error("Implementation error: Method must be overridden.")},t.prototype.getLogWriter=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.getEnabled=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.enable=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.disable=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.debug=function(e,t){throw new Error("Implementation error: Method must be overridden.")},t.prototype.info=function(e,t){throw new Error("Implementation error: Method must be overridden.")},t.prototype.warn=function(e,t){throw new Error("Implementation error: Method must be overridden.")},t.prototype.error=function(e,t){throw new Error("Implementation error: Method must be overridden.")},e.ILogger=t}(a),function(e){"use strict";function t(){this._logWriter=new i}var i=e.LogWriter;t.prototype.setLogWriter=function(e){if(!e)throw new Error("Reference to the ILogWriter object cannot be NULL");this._logWriter=e,this._enabled=!1},t.prototype.getLogWriter=function(){return this._logWriter},t.prototype.getEnabled=function(){return this._enabled},t.prototype.enable=function(){this._enabled=!0},t.prototype.disable=function(){this._enabled=!1},t.prototype.debug=function(e,t){this._log(e,r,t)},t.prototype.info=function(e,t){this._log(e,a,t)},t.prototype.warn=function(e,t){this._log(e,n,t)},t.prototype.error=function(e,t){this._log(e,s,t)},t.prototype._log=function(e,t,i){if(t==s||this._enabled){var a="",r=new Date;a+="["+r.toTimeString()+"."+function(e){return e<10?"00"+e:e<100?"0"+e:""+e}(r.getMilliseconds())+"] ["+t+"] ",a+="["+e+"] "+i,this._logWriter.write(a)}};var a="INFO",r="DEBUG",n="WARN",s="ERROR";e.Logger=t}(a),function(e){"use strict";function t(e,t){this._pluginName=e,this._eventName=t}var i=e.radio.Channel;t.prototype.getPluginName=function(){return this._pluginName},t.prototype.getEventName=function(){return this._eventName},t.prototype.getName=function(){return this._pluginName+i.SEPARATOR+this._eventName},e.Trigger=t}(a),function(e){"use strict";function t(e,t){this.name=e,this.data=t}t.SUCCESS="success",t.ERROR="error",t.createFromTrigger=function(e){return new t(e.getName())},e.Event=t}(a),function(e){"use strict";function t(){this._events={}}t.prototype.addEventListener=function(e,t,i){e&&t&&(i=i||window,this._events[e]=this._events[e]||[],this._events[e].push({cb:t,ctx:i}))},t.prototype.removeEventListener=function(e,t,i){if(e&&t){i=i||window;var a,r,n=!1;for(r in this._events)if(e===r){n=!0;break}if(n){for(a=this._events[r].length-1;a>=0;a--){var s=this._events[r][a];t===s.cb&&i===s.ctx&&this._events[r].splice(a,1)}this._events[r].length||delete this._events[r]}}},t.prototype.dispatchEvent=function(e){var t,i;if(e.name)for(t in this._events)if(this._events.hasOwnProperty(t)&&e.name===t){var a=this._events[t].slice(0),r=a.length;for(i=0;i<r;i++)a[i].cb.call(a[i].ctx,e);break}},t.prototype.removeAllListeners=function(e){var t,i;if(e){for(i in this._events)if(this._events.hasOwnProperty(i)){for(t=this._events[i].length-1;t>=0;t--)this._events[i][t].ctx===e&&this._events[i].splice(t,1);this._events[i].length||delete this._events[i]}}else this._events={}},e.EventDispatcher=t}(a),function(e){"use strict";function t(){}function i(){i.__super__.constructor.call(this),this._connection=null}var a=e.Event,r=e.EventDispatcher;t.GET="GET",i.RESPONSE="response",i.INSTANCE="instance",e.extend(i,r),i.prototype.close=function(){this.removeAllListeners(null)},i.prototype.load=function(e){e&&e.method&&e.url&&(e._xmlhttp=this._createCORSRequest(e),e._xmlhttp?e._xmlhttp.send():this._loadImage(e))},i.prototype._createCORSRequest=function(e){var t=null;if(void 0!==window.XMLHttpRequest){var r=new window.XMLHttpRequest;"withCredentials"in r&&(t=r).open(e.method,e.url,!0)}if(null==t&&void 0!==window.XDomainRequest&&(t=new window.XDomainRequest).open(e.method,e.url),t){var n={};n[i.INSTANCE]=this;var s=this;t.onload=function(){if(t.status&&parseInt(t.status,10)>=400)return this.onerror();n[i.RESPONSE]=t.responseText,s.dispatchEvent(new a(a.SUCCESS,n))},t.onerror=function(){s.dispatchEvent(new a(a.ERROR,n))}}return t},i.prototype._loadImage=function(e){this._connection||(this._connection=new Image,this._connection.alt=""),this._connection.src=e.url;var t={};t[i.RESPONSE]="",t[i.INSTANCE]=this,this.dispatchEvent(new a(a.SUCCESS,t))},e.URLRequestMethod=t,e.URLRequest=function(e,t){this.url=e||null,this.method=t,this._xmlhttp=null},e.URLLoader=i}(a),function(e){"use strict";var t="2.2.1.229",i="1bf77a",a={getVersion:function(){return"js-"+t+"-"+i},getMajor:function(){return a.getNumberAtPosition(0)},getMinor:function(){return a.getNumberAtPosition(1)},getMicro:function(){return a.getNumberAtPosition(2)},getPatch:function(){return a.getNumberAtPosition(3)},getBuild:function(){return i},getApiLevel:function(){return 4},getNumberAtPosition:function(e){return t.split(".")[e]}};e.Version=a}(i),function(e){"use strict";function t(e,t){this._message=e,this._details=t}t.prototype.getMessage=function(){return this._message},t.prototype.getDetails=function(){return this._details},e.ErrorInfo=t}(i),function(e){"use strict";e.HeartbeatConfig=function(){this.debugLogging=!1}}(i),function(e){"use strict";function t(){}t.prototype.onError=function(e){},e.HeartbeatDelegate=t}(i),function(e){"use strict";function t(){}t.prototype.configure=function(e){throw new Error("Implementation error: Method must be overridden.")},t.prototype.bootstrap=function(e){throw new Error("Implementation error: Method must be overridden.")},t.prototype.setup=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.destroy=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.enable=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.disable=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.getName=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.isInitialized=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.resolveData=function(e){throw new Error("Implementation error: Method must be overridden.")},e.plugin.IPlugin=t}(a),function(e){"use strict";function t(e,t,i,a){this.trigger=e,this.action=i,this.plugin=t,this._paramMappings={},this.mergeParams(a)}var i=e.plugin.ParamMapping;t.prototype.mergeParams=function(e){if(e)for(var t=0;t<e.length;t++){var i=e[t];this._paramMappings[i.getKeyName()]=i}},t.prototype.getParams=function(){var e=[];for(var t in this._paramMappings)this._paramMappings.hasOwnProperty(t)&&e.push(this._paramMappings[t]);return e},t.prototype.addParam=function(e){this._paramMappings[e.getKeyName()]=e},t.prototype.removeParam=function(e,t){var a=new i(e,t);this._paramMappings.hasOwnProperty(a.getKeyName())&&delete this._paramMappings[a.getKeyName()]},e.plugin.Behaviour=t}(a),function(e){"use strict";function t(e,t,a){this._pluginName=e,this._key=t,this._paramName=a||e+i.SEPARATOR+t}var i=e.radio.Channel;t.prototype.getPluginName=function(){return this._pluginName},t.prototype.getKey=function(){return this._key},t.prototype.getKeyName=function(){return this._pluginName+i.SEPARATOR+this._key},t.prototype.getParamName=function(){return this._paramName},e.plugin.ParamMapping=t}(a),function(e){"use strict";function t(e){if(!e)throw new Error("Reference to the logger object cannot be NULL");this._logger=e,this._plugins={},this._behaviours={},this._radio=new a(this._logger),this._dataChannel=this._radio.channel(s),this._ctrlChannel=this._radio.channel(o)}var i=e.Event,a=e.radio.Radio,r=e.radio.Channel,n=e.plugin.Behaviour;t.ERROR="error",t.prototype.addPlugin=function(e){var t=e.getName();this._plugins[t]&&this._logger.warn(l,"#addPlugin > Replacing plugin: "+t),this._plugins[t]=e,e.bootstrap(this)},t.prototype.setupPlugins=function(){for(var e in this._plugins)this._plugins.hasOwnProperty(e)&&this._plugins[e].setup()},t.prototype.pluginExists=function(e){return!!this._plugins[e]},t.prototype.isPluginInitialized=function(e){return this._plugins[e]&&this._plugins[e].isInitialized()},t.prototype.on=function(e,t,i,a){this._dataChannel.on(e+r.SEPARATOR+t,i,a)},t.prototype.off=function(e,t,i,a){var n=e&&t?e+r.SEPARATOR+t:null;this._dataChannel.off(n,i,a)},t.prototype.trigger=function(e){var t=e.name,i=this._behaviours[t];if(i){var a,r,n,s,o,l={},h={};for(a=0;a<i.length;a++)if(s=(n=i[a]).getParams())for(r=0;r<s.length;r++)l[(o=s[r]).getPluginName()]=l[o.getPluginName()]||[],o.key in l[o.getPluginName()]||l[o.getPluginName()].push(o.getKey());for(var d in l)l.hasOwnProperty(d)&&(h[d]=this.request(d,l[d]));for(a=0;a<i.length;a++){var c={_behaviour:n=i[a],_eventData:e.data||{}};if(s=n.getParams()){for(r=0;r<s.length;r++)c[(o=s[r]).getParamName()]=h[o.getPluginName()]?h[o.getPluginName()][o.getKey()]:null;this.command(n.plugin.getName(),n.action,c)}}}this._dataChannel.trigger(e)},t.prototype.request=function(e,t){var i=this._plugins[e];return i&&t&&0!=t.length?i.resolveData(t):null},t.prototype.raise=function(e){this._errorInfo=e;var a=new i(t.ERROR,e);this._ctrlChannel.trigger(a)},t.prototype.getErrorInfo=function(){return this._errorInfo},t.prototype.destroy=function(){for(var e in this._radio.shutdown(),this._plugins)this._plugins.hasOwnProperty(e)&&this._plugins[e].destroy()},t.prototype.comply=function(e,t,i){this._dataChannel.comply(e.getName()+r.SEPARATOR+t,i,e)},t.prototype.command=function(e,t,i){this._dataChannel.command(e+r.SEPARATOR+t,i)},t.prototype.registerBehaviour=function(e,t,i,a){var r=e.getName(),s=new n(e,t,i,a);this._behaviours[r]=this._behaviours[r]||[],this._behaviours[r].push(s)};var s="data_channel",o="ctrl_channel",l="plugin::PluginManager";e.plugin.PluginManager=t}(a),function(e,t){"use strict";function i(e){this._name=e,this._isInitialized=!1,this._isDestroyed=!1,this._isEnabled=!0,this._dataResolver={},this._logTag="plugin::"+this.getName(),this._logger=new a}var a=e.Logger,r=e.Trigger,n=e.Event,s=t.ErrorInfo;i.INITIALIZED="initialized",i.prototype.configure=function(e){},i.prototype.bootstrap=function(e){this._pluginManager=e,this._isDestroyed&&this._pluginManager.raise(new s("Invalid state.","Plugin already destroyed."))},i.prototype.setup=function(){this._trigger(i.INITIALIZED),this._isInitialized=!0},i.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._teardown())},i.prototype.enable=function(){this._isEnabled=!0,this._enabled()},i.prototype.disable=function(){this._isEnabled=!1,this._disabled()},i.prototype.getName=function(){return this._name},i.prototype.getLogger=function(){return this._logger},i.prototype.isInitialized=function(){return this._isInitialized},i.prototype.resolveData=function(e){if(!this._isEnabled||!this._isInitialized)return this._logger.warn(this._logTag,"Unable to retrieve plugin data. Plugin: "+this._name+". Enabled: "+this._isEnabled+". Initialized: "+this._isInitialized+"."),null;if("function"==typeof this._dataResolver)return this._dataResolver.call(this,e);var t=null;if(e)for(var i=0;i<e.length;i++){var a=e[i];this._dataResolver.hasOwnProperty(a)&&(t=t||{},"function"==typeof this._dataResolver[a]?t[a]=this._dataResolver[a].call(this):t[a]=this._dataResolver[a])}return t},i.prototype.toString=function(){return"<plugin: "+this._name+">"},i.prototype._enabled=function(){},i.prototype._disabled=function(){},i.prototype._teardown=function(){},i.prototype._canProcess=function(){return this._isEnabled?!this._isDestroyed||(this._logger.error(this._logTag,"Plugin destroyed."),!1):(this._logger.error(this._logTag,"Plugin disabled."),!1)},i.prototype._trigger=function(e,t){var i=n.createFromTrigger(new r(this.getName(),e));i.data=t,this._pluginManager.trigger(i)},e.plugin.BasePlugin=i}(a,i),function(e){"use strict";function t(e,t,i){this.name=e,this.interval=t,this.isActive=!1,this.repeatCount=void 0!==i?i:r,this._nextTickTimestamp=0,this.reset()}function i(e,t){if(!e)throw new Error("Reference to the ClockService object cannot be NULL");if(this._service=e,!t)throw new Error("Reference to the logger object cannot be NULL");this._logger=t,this._isDestroyed=!1,this._timers={};var i=this;this._clock=window.setInterval((function(){i._onTick()}),1e3*n)}t.prototype.reset=function(){this.tick=0,this._createdTimestamp=(new Date).getTime(),this._updateNextTickTimestamp()},t.prototype.shouldTick=function(){return(new Date).getTime()>this._nextTickTimestamp-s/2&&(this.tick++,this._updateNextTickTimestamp(),!0)},t.prototype._updateNextTickTimestamp=function(){var e=(new Date).getTime();this._nextTickTimestamp=e+1e3*this.interval-1},i.prototype.createTimer=function(e,i,a){this._timers[e]=new t(e,i,a)},i.prototype.destroyTimer=function(e){delete this._timers[e]},i.prototype.resumeTimer=function(e,t){t=void 0!==t&&t,this._logger.debug(a,"#resumeTimer(name="+e+", reset="+t+")");var i=this._timers[e];i&&(i.isActive=!0,t&&i.reset())},i.prototype.pauseTimer=function(e,t){t=void 0!==t&&t,this._logger.debug(a,"#pauseTimer(name="+e+", reset="+t+")");var i=this._timers[e];i&&(i.isActive=!1,t&&i.reset())},i.prototype.isTimerPaused=function(e){var t=this._timers[e];return!!t&&!t.isActive},i.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._timers={},window.clearInterval(this._clock))},i.prototype._onTick=function(){for(var e in this._timers)if(this._timers.hasOwnProperty(e)){var t=this._timers[e];t.isActive&&t.shouldTick()&&(t.interval>1&&this._logger.debug(a,"#_onTick() > "+t.name+"("+t.tick+" | "+t.repeatCount+")"),0!=t.repeatCount?(this._service.onTick(t.name,t.interval,t.tick),t.repeatCount!=r&&t.repeatCount--):this.destroyTimer(t.name))}};var a="service.clock::TimerManager",r=-1,n=.25,s=1e3*n;e.clock.TimerDescriptor=t,e.clock.TimerManager=i}(r),function(e,t,i){"use strict";function a(e){if(a.__super__.constructor.call(this,o),!e)throw new Error("Reference to the logger object cannot be NULL");this._logger=e,this._timerManager=new r(this,this._logger),this._setupDataResolver()}var r=i.clock.TimerManager,n=t.StringUtils,s=e.plugin.BasePlugin;e.extend(a,s),a.prototype.bootstrap=function(e){a.__super__.bootstrap.call(this,e),this._pluginManager.comply(this,l,this._cmdCreate),this._pluginManager.comply(this,d,this._cmdResume),this._pluginManager.comply(this,h,this._cmdPause),this._pluginManager.comply(this,c,this._cmdDestroy)},a.prototype._teardown=function(){this._timerManager.destroy()},a.prototype._cmdCreate=function(e){var t=e[_]||v;this._timerManager.createTimer(e[p],e[u],t)},a.prototype._cmdPause=function(e){this._timerManager.pauseTimer(e[p],!!e[f])},a.prototype._cmdResume=function(e){this._timerManager.resumeTimer(e[p],!!e[f])},a.prototype._cmdDestroy=function(e){this._timerManager.destroyTimer(e[p])},a.prototype.onTick=function(e,t,i){e+=".tick";var a={};a[p]=e,a[u]=t,a[g]=i,this._trigger(e,a)},a.prototype._setupDataResolver=function(){var e={},t=this._timerManager;e[m]=function(e){return t.isTimerPaused(e)},this._dataResolver=function(t){if(!t||0==t.length)return null;for(var i=null,a=0;a<t.length;a++){var r=t[a];if(i=i||{},n.startsWith(r,m)){var s=r.split(m+".");s.length>0&&(i[r]=e[m].call(this,s[1]))}}return i}};var o="service.clock",l="create",h="pause",d="resume",c="destroy",p="name",u="interval",_="repeat_count",g="tick",f="reset",m="is_paused",v=-1;i.clock.ClockService=a}(a,t,r),function(e,t,i){"use strict";function a(e,t){if(this._logger=new r,this._pluginManager=new n(this._logger),this._pluginManager.addPlugin(new s(this._logger)),t)for(var i=0;i<t.length;i++)this._pluginManager.addPlugin(t[i]);this._pluginManager.setupPlugins(),this._isDestroyed=!1}var r=e.Logger,n=e.plugin.PluginManager,s=t.clock.ClockService;a.prototype.configure=function(e){if(!e)throw new Error("Configuration object cannot be NULL.");e.debugLogging?this._logger.enable():this._logger.disable(),this._isDestroyed&&this._logger.error(o,"Instance is destroyed.")},a.prototype.destroy=function(){this._isDestroyed||(this._pluginManager.destroy(),this._isDestroyed=!0)};var o="Heartbeat";i.Heartbeat=a}(a,r,i),e.ADB||(e.ADB={}),e.ADB.core||(e.ADB.core=a),e.ADB.va||(e.ADB.va=i),e.ADB.va.utils||(e.ADB.va.utils=t),e.ADB.va.plugins||(e.ADB.va.plugins={})}(this),function(e){if(void 0===t)var t={};!function(e){"use strict";e.AssetType={ASSET_TYPE_VOD:"vod",ASSET_TYPE_LIVE:"live",ASSET_TYPE_LINEAR:"linear"}}(t),function(e){"use strict";function t(){this.playerName=null,this.name=null,this.position=null,this.startTime=null}t.prototype.toString=function(){return"playerName="+this.playerName+", name="+this.name+", position="+this.position+", startTime="+this.startTime},e.AdBreakInfo=t}(t),function(e){"use strict";function t(){this.id=null,this.name=null,this.length=null,this.position=null,this.granularTracking=!0}t.prototype.toString=function(){return"id="+this.id+", name="+this.name+", length="+this.length+", position="+this.position+", granularTracking="+this.granularTracking},e.AdInfo=t}(t),function(e){"use strict";function t(){this.name=null,this.length=null,this.position=null,this.startTime=null}t.prototype.toString=function(){return"name="+this.name+", length="+this.length+", position="+this.position+", startTime="+this.startTime},e.ChapterInfo=t}(t),function(e){"use strict";function t(){this.bitrate=null,this.fps=null,this.droppedFrames=null,this.startupTime=null}t.prototype.toString=function(){return"bitrate="+this.bitrate+", fps="+this.fps+", droppedFrames="+this.droppedFrames+", startupTime="+this.startupTime},e.QoSInfo=t}(t),function(e){"use strict";function t(){this.playerName=null,this.id=null,this.name=null,this.length=null,this.playhead=null,this.mediaType=null,this.streamType=null,this.resumed=!1}t.prototype.toString=function(){return"playerName="+this.playerName+", id="+this.id+", name="+this.name+", length="+this.length+", playhead="+this.playhead+", mediaType="+this.mediaType+", streamType="+this.streamType+", resumed="+this.resumed},e.VideoInfo=t}(t),function(e){"use strict";e.VideoPlayerPluginConfig=function(){this.debugLogging=!1}}(t),function(e){"use strict";function t(){}t.prototype.getVideoInfo=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.getAdBreakInfo=function(){return null},t.prototype.getAdInfo=function(){return null},t.prototype.getChapterInfo=function(){return null},t.prototype.getQoSInfo=function(){return null},e.VideoPlayerPluginDelegate=t}(t),function(e,t){"use strict";function i(e){if(i.__super__.constructor.call(this,o),!e)throw new Error("PlayerPlugin delegate cannot be NULL.");this._delegate=e,this._isTrackingSessionActive=!1,this._isTrackingSessionStarted=!1,this._setupDataResolver()}var a=e.plugin.ParamMapping,r=e.Trigger,n=e.plugin.BasePlugin,s=t.VideoPlayerPluginConfig;e.extend(i,n),i.prototype.configure=function(e){if(!e)throw new Error("Reference to the configuration data cannot be NULL.");if(!(e instanceof s))throw new Error("Expected config data to be instance of VideoPlayerPluginConfig.");e.debugLogging?this._logger.enable():this._logger.disable(),this._logger.debug(this._logTag,"#configure(debugLogging="+e.debugLogging+")")},i.prototype.bootstrap=function(e){i.__super__.bootstrap.call(this,e),this._registerCommands(),this._registerBehaviours()},i.prototype._cmdVideoIdleStart=function(e){this._logger.info(this._logTag,"#_cmdVideoIdleStart()"),this._videoIdle=!0},i.prototype._cmdVideoIdleResume=function(e){this._logger.info(this._logTag,"#_cmdVideoIdleResume()"),this._videoIdle&&(this._trigger(g),this._trigger(f),e.isInAd&&(this._trigger(T),this._isTrackingAdBreak=!0),e.isInAd&&(this._trigger(k),this._isTrackingAd=!0),e.isInChapter&&this._trigger(C),this._trigger(I)),this._videoIdle=!1},i.prototype.trackSessionStart=function(){if(this._logger.info(this._logTag,"#trackSessionStart()"),this._canProcess()){if(!this._isTrackingSessionActive)return void this._logger.warn(this._logTag,"#trackSessionStart() > No active tracking session.");if(this._isTrackingSessionStarted)return void this._logger.info(this._logTag,"#trackSessionStart() > Tracking session already started.");this._trigger(g),this._isTrackingSessionStarted=!0;var e=this._dataResolver(["video.resumed"]);e.hasOwnProperty("video.resumed")&&e["video.resumed"]&&this._trigger(f)}},i.prototype.trackVideoLoad=function(){this._logger.info(this._logTag,"#trackVideoLoad()"),this._canProcess()&&(this._isTrackingAdBreak=!1,this._isTrackingAd=!1,this._contentStarted=!1,this._isPaused=!0,this._isBuffering=!1,this._isSeeking=!1,this._playheadTimer=null,this._previousPlayhead=-1,this._stalledPlayheadCount=0,this._playheadStalled=!1,this._videoIdle=!1,this._trigger(p),this._isTrackingSessionActive=!0,this._isTrackingSessionStarted=!1)},i.prototype.trackVideoUnload=function(){if(this._logger.info(this._logTag,"#trackVideoUnload()"),this._canProcess()){if(!this._isTrackingSessionActive)return void this._logger.warn(this._logTag,"#trackVideoUnload() > No active tracking session.");this._stopPlayheadTimer(),this._trigger(u),this._isTrackingSessionActive=!1,this._isTrackingSessionStarted=!1,this._contentStarted=!1}},i.prototype.beginReporting=function(){this._logger.info(this._logTag,"#beginReporting()"),this._canProcess()&&this._startSessionIfNeeded("beginReporting")&&this._trigger(Y)},i.prototype.trackPlay=function(){this._logger.info(this._logTag,"#trackPlay()"),this._canProcess()&&this._startSessionIfNeeded("trackPlay")&&this._allowPlayerStateChange()&&(this._isPaused=!1,this._trigger(I),this._startPlayheadTimer())},i.prototype.trackPause=function(){if(this._logger.info(this._logTag,"#trackPause()"),this._canProcess()&&this._startSessionIfNeeded("trackPause")&&this._allowPlayerStateChange()){this._stopPlayheadTimer();var e={};e[j]=!1,this._isPaused=!0,this._trigger(E,e)}},i.prototype.trackBufferStart=function(){this._logger.info(this._logTag,"#trackBufferStart()"),this._canProcess()&&this._startSessionIfNeeded("trackBufferStart")&&this._allowPlayerStateChange()&&(this._stopPlayheadTimer(),this._isBuffering=!0,this._trigger(w))},i.prototype.trackBufferComplete=function(){this._logger.info(this._logTag,"#trackBufferComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackBufferComplete")&&this._allowPlayerStateChange()&&(this._isBuffering=!1,this._trigger(D),this._startPlayheadTimer())},i.prototype.trackSeekStart=function(){this._logger.info(this._logTag,"#trackSeekStart()"),this._canProcess()&&this._startSessionIfNeeded("trackSeekStart")&&this._allowPlayerStateChange()&&(this._stopPlayheadTimer(),this._isSeeking=!0,this._trigger(N))},i.prototype.trackSeekComplete=function(){this._logger.info(this._logTag,"#trackSeekComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackSeekComplete")&&this._allowPlayerStateChange()&&(this._isSeeking=!1,this._trigger(M),this._startPlayheadTimer())},i.prototype.trackComplete=function(e,t){if(this._logger.info(this._logTag,"#trackComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackComplete")){if(this._stopPlayheadTimer(),this._videoIdle)return this._logger.info(this._logTag,"#trackComplete() > Video session is already in Idle State."),void(e&&e());var i={};i[x]=e,(t=void 0===t||!!t)?this._trigger(m,i):(this._trigger(v),this._trigger(_,i))}},i.prototype.trackTimedMetadata=function(e){this._logger.info(this._logTag,"#trackComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackTimedMetadata")&&this._trigger(y,e)},i.prototype.trackChapterStart=function(){this._logger.info(this._logTag,"#trackChapterStart()"),this._canProcess()&&this._startSessionIfNeeded("#trackChapterStart")&&this._trigger(C)},i.prototype.trackChapterComplete=function(){this._logger.info(this._logTag,"#trackChapterComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackChapterComplete")&&this._trigger(O)},i.prototype.trackChapterSkip=function(){this._logger.info(this._logTag,"#trackChapterSkip()"),this._canProcess()&&this._startSessionIfNeeded("trackChapterSkip")&&this._trigger(R)},i.prototype.trackAdBreakStart=function(){this._logger.info(this._logTag,"#trackAdBreakStart()"),this._canProcess()&&this._startSessionIfNeeded("trackAdBreakStart")&&(this._trigger(T),this._isTrackingAdBreak=!0)},i.prototype.trackAdBreakComplete=function(){this._logger.info(this._logTag,"#trackAdBreakComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackAdBreakComplete")&&(this._trigger(A),this._isTrackingAdBreak=!1)},i.prototype.trackAdStart=function(){this._logger.info(this._logTag,"#trackAdStart()"),this._canProcess()&&this._startSessionIfNeeded("trackAdStart")&&(this._trigger(k),this._isTrackingAd=!0)},i.prototype.trackAdComplete=function(){this._logger.info(this._logTag,"#trackAdComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackAdComplete")&&(this._trigger(S),this._isTrackingAd=!1)},i.prototype.trackAdSkip=function(){this._logger.info(this._logTag,"#trackAdSkip()"),this._canProcess()&&this._startSessionIfNeeded("trackAdSkip")&&(this._trigger(P),this._isTrackingAd=!1)},i.prototype.trackBitrateChange=function(){this._logger.info(this._logTag,"#trackBitrateChange()"),this._canProcess()&&this._startSessionIfNeeded("trackBitrateChange")&&this._trigger(B)},i.prototype.trackVideoPlayerError=function(e){if(this._logger.info(this._logTag,"#trackVideoPlayerError(errorId="+e+")"),this._startSessionIfNeeded("trackVideoPlayerError")){var t={};t[q]=c,t[H]=e,this._trigger(V,t)}},i.prototype.trackApplicationError=function(e){if(this._logger.info(this._logTag,"#trackApplicationError(errorId="+e+")"),this._startSessionIfNeeded("trackApplicationError")){var t={};t[q]=d,t[H]=e,this._trigger(V,t)}},i.prototype._registerCommands=function(){this._pluginManager.comply(this,"handleVideoIdleStart",this._cmdVideoIdleStart),this._pluginManager.comply(this,"handleVideoIdleResume",this._cmdVideoIdleResume)},i.prototype._registerBehaviours=function(){this._pluginManager.registerBehaviour(new r(h,L),this,"handleVideoIdleStart"),this._pluginManager.registerBehaviour(new r(h,F),this,"handleVideoIdleResume",[new a(l,"ad.isInAdBreak","isInAdBreak"),new a(l,"ad.isInAd","isInAd"),new a(l,"chapter.isInChapter","isInChapter")])},i.prototype._setupDataResolver=function(){function e(){return s.video||(s.video=o._delegate.getVideoInfo(),o._logger.info(o._logTag,"Data from delegate > VideoInfo: "+s.video)),s.video}function t(){return s.ad||(s.ad=o._delegate.getAdInfo(),o._logger.info(o._logTag,"Data from delegate > AdInfo: "+s.ad)),s.ad}function i(){return s.pod||(s.pod=o._delegate.getAdBreakInfo(),o._logger.info(o._logTag,"Data from delegate > AdBreakInfo: "+s.pod)),s.pod}function a(){return s.chapter||(s.chapter=o._delegate.getChapterInfo(),o._logger.info(o._logTag,"Data from delegate > ChapterInfo: "+s.chapter)),s.chapter}function r(){return s.qos||(s.qos=o._delegate.getQoSInfo(),o._logger.info(o._logTag,"Data from delegate > QoSInfo: "+s.qos)),s.qos}var n={},s={},o=this;n["video.id"]=function(){var t=e(),i=t?t.id:null;return o._logger.debug(o._logTag,"Resolving video.id: "+i),i},n["video.name"]=function(){var t=e(),i=t?t.name:null;return o._logger.debug(o._logTag,"Resolving video.name: "+i),i},n["video.length"]=function(){var t=e(),i=t?t.length:NaN;return o._logger.debug(o._logTag,"Resolving video.length: "+i),i},n["video.playerName"]=function(){var t=e(),i=t?t.playerName:null;return o._logger.debug(o._logTag,"Resolving video.playerName: "+i),i},n["video.mediaType"]=function(){var t=e(),i=t?t.mediaType:null;return o._logger.debug(o._logTag,"Resolving video.mediaType: "+i),i},n["video.streamType"]=function(){var t=e(),i=t?t.streamType:null;return o._logger.debug(o._logTag,"Resolving video.streamType: "+i),i},n["video.playhead"]=function(){var t=e(),i=t?t.playhead:NaN;return o._logger.debug(o._logTag,"Resolving video.playhead: "+i),i},n["video.resumed"]=function(){var t=e(),i=!!t&&t.resumed;return o._logger.debug(o._logTag,"Resolving video.resumed: "+i),i},n["video.playheadStalled"]=function(){return this._playheadStalled},n["pod.name"]=function(){var e=i(),t=e?e.name:null;return o._logger.debug(o._logTag,"Resolving pod.name: "+t),t},n["pod.playerName"]=function(){var e=i(),t=e?e.playerName:null;return o._logger.debug(o._logTag,"Resolving pod.playerName: "+t),t},n["pod.position"]=function(){var e=i(),t=e?e.position:NaN;return o._logger.debug(o._logTag,"Resolving pod.position: "+t),t},n["pod.startTime"]=function(){var e=i(),t=e?e.startTime:NaN;return o._logger.debug(o._logTag,"Resolving pod.startTime: "+t),t},n["ad.isInAd"]=function(){var e=null!=t();return o._logger.debug(o._logTag,"Resolving ad.isInAd: "+e),e},n["ad.isInAdBreak"]=function(){var e=null!=i();return o._logger.debug(o._logTag,"Resolving ad.isInAdBreak: "+e),e},n["ad.id"]=function(){var e=t(),i=e?e.id:null;return o._logger.debug(o._logTag,"Resolving ad.id: "+i),i},n["ad.name"]=function(){var e=t(),i=e?e.name:null;return o._logger.debug(o._logTag,"Resolving ad.name: "+i),i},n["ad.length"]=function(){var e=t(),i=e?e.length:NaN;return o._logger.debug(o._logTag,"Resolving ad.length: "+i),i},n["ad.position"]=function(){var e=t(),i=e?e.position:NaN;return o._logger.debug(o._logTag,"Resolving ad.position: "+i),i},n["ad.granularTracking"]=function(){var e=t(),i=!!e&&e.granularTracking;return o._logger.debug(o._logTag,"Resolving ad.granularTracking: "+i),i},n["ad.trackingInterval"]=function(){var e=U;return o._logger.debug(o._logTag,"Resolving ad.trackingInterval: "+e),e},n["chapter.isInChapter"]=function(){var e=null!=a();return o._logger.debug(o._logTag,"Resolving chapter.isInChapter: "+e),e},n["chapter.name"]=function(){var e=a(),t=e?e.name:null;return o._logger.debug(o._logTag,"Resolving chapter.name: "+t),t},n["chapter.length"]=function(){var e=a(),t=e?e.length:NaN;return o._logger.debug(o._logTag,"Resolving chapter.length: "+t),t},n["chapter.position"]=function(){var e=a(),t=e?e.position:NaN;return o._logger.debug(o._logTag,"Resolving chapter.position: "+t),t},n["chapter.startTime"]=function(){var e=a(),t=e?e.startTime:NaN;return o._logger.debug(o._logTag,"Resolving chapter.startTime: "+t),t},n["qos.bitrate"]=function(){var e=r(),t=e?e.bitrate:NaN;return o._logger.debug(o._logTag,"Resolving qos.bitrate: "+t),t},n["qos.fps"]=function(){var e=r(),t=e?e.fps:NaN;return o._logger.debug(o._logTag,"Resolving qos.fps: "+t),t},n["qos.droppedFrames"]=function(){var e=r(),t=e?e.droppedFrames:NaN;return o._logger.debug(o._logTag,"Resolving qos.droppedFrames: "+t),t},n["qos.startupTime"]=function(){var e=r(),t=e?1e3*e.startupTime:NaN;return o._logger.debug(o._logTag,"Resolving qos.startupTime: "+t),t},this._dataResolver=function(e){if(!e||0==e.length)return null;s={};for(var t=null,i=0;i<e.length;i++){var a=e[i];(t=t||{})[a]=n.hasOwnProperty(a)?n[a].call(this):null}return t}},i.prototype._trackPlayheadStall=function(){this._canProcess()&&(this._playheadStalled||(this._logger.info(this._logTag,"#_trackPlayheadStall()"),this._stalledPlayheadCount=0,this._playheadStalled=!0,this._trigger(E)))},i.prototype._trackExitStall=function(){this._canProcess()&&(this._stalledPlayheadCount=0,!this._playheadStalled||this._isPaused||this._isSeeking||this._isBuffering||(this._logger.info(this._logTag,"#_trackExitStall()"),this._playheadStalled=!1,this._trigger(I)))},i.prototype._startPlayheadTimer=function(){var e=this;this._playheadTimer||this._isPaused||this._isSeeking||this._isBuffering||(this._playheadTimer=setInterval((function(){if(e._canProcess()){var t=e._dataResolver(["ad.isInAd","video.playhead"]);if(e._isTrackingAdBreak)e._playheadStalled&&e._trackExitStall();else{var i=t["video.playhead"];i!=e._previousPlayhead?e._trackExitStall():e._previousPlayhead>=0&&i==e._previousPlayhead&&++e._stalledPlayheadCount==W&&e._trackPlayheadStall(),i!=e._previousPlayhead&&i>0&&!e._contentStarted&&(e._isPaused||e._isBuffering||e._isSeeking||(e._logger.info(e._logTag,"#_playheadTimer playhead progress to: "+i),e._trigger(b),e._contentStarted=!0)),e._previousPlayhead=i}}}),K))},i.prototype._stopPlayheadTimer=function(){this._playheadTimer&&(clearInterval(this._playheadTimer),this._playheadTimer=null),this._trackExitStall()},i.prototype._startSessionIfNeeded=function(e){return this._isTrackingSessionActive?(this._isTrackingSessionStarted||(this._logger.info(this._logTag,"#"+e+"() > Tracking session auto-start."),this.trackSessionStart()),!0):(this._logger.warn(this._logTag,"#"+e+"() > No active tracking session."),!1)},i.prototype._allowPlayerStateChange=function(){return!(this._isTrackingAdBreak&&!this._isTrackingAd&&(this._logger.info(this._logTag,"_allowPlayerStateChange Player plugin does not allow player state changes when in Adbreak and not in Ad."),1))};var o="player",l=o,h="adobe-heartbeat",d="sourceErrorExternal",c="sourceErrorSDK",p="video_load",u="video_unload",_="video_session_end",g="video_start",f="video_resume",m="video_complete",v="video_skip",y="timed_metadata",I="play",E="pause",b="content_start",T="adbreak_start",A="adbreak_complete",k="ad_start",S="ad_complete",P="ad_skip",w="buffer_start",D="buffer_complete",N="seek_start",M="seek_complete",C="chapter_start",O="chapter_complete",R="chapter_skip",B="bitrate_change",V="track_error",L="video_idle_start",F="video_idle_resume",Y="video_begin_reporting",x="callback",j="filter_report",q="source",H="error_id",K=1001,U=1,W=2;t.VideoPlayerPlugin=i}(e.ADB.core,t),e.ADB.va.plugins.videoplayer||(e.ADB.va.plugins.videoplayer=t)}(this),function(e){if(void 0===t)var t={};t.clock||(t.clock={}),t.context||(t.context={}),t.filter||(t.filter={}),t.model||(t.model={}),t.network||(t.network={}),function(e,t){"use strict";function i(e,t,i,a,r){if(!t)throw new Error("Reference to the channel object cannot be NULL");if(this._channel=t,!e)throw new Error("Reference to the pluginManager object cannot be NULL");if(this._pluginManager=e,!r)throw new Error("Reference to the logger object cannot be NULL");this._logTag="ah::Timer."+i,this._logger=r,this._isDestroyed=!1,this._createTimer(i,a),this._installHandlers()}var a=e.Event;i.KEY_NAME="name",i.KEY_INTERVAL="interval",i.KEY_RESET="reset",i.prototype.resume=function(e){this._logger.debug(this._logTag,"Starting timer: "+this._name);var t={};t[i.KEY_NAME]=r+"."+this._name,t[i.KEY_RESET]=e,this._pluginManager.command(n,l,t)},i.prototype.pause=function(e){this._logger.debug(this._logTag,"Stopping timer: "+this._name);var t={};t[i.KEY_NAME]=r+"."+this._name,t[i.KEY_RESET]=e,this._pluginManager.command(n,o,t)},i.prototype.destroy=function(){if(!this._isDestroyed){this._isDestroyed=!0,this._uninstallHandlers();var e={};e[i.KEY_NAME]=r+"."+this._name,this._pluginManager.command(n,h,e)}},i.prototype.setInterval=function(e){var t=d+"."+r+"."+this._name,i=this._pluginManager.request(n,[t])[t];this.pause(!0),this._createTimer(this._name,e),i||this.resume(!0)},i.prototype._cmdResume=function(e){var t=!1;null!=e&&e.hasOwnProperty(i.KEY_RESET)&&(t=e[i.KEY_RESET]),this.resume(t)},i.prototype._cmdPause=function(e){var t=!1;null!=e&&e.hasOwnProperty(i.KEY_RESET)&&(t=e[i.KEY_RESET]),this.pause(t)},i.prototype._onTick=function(e,t){this._channel.trigger(new a("clock:"+this._name+".tick",t))},i.prototype._installHandlers=function(){this._channel.comply("clock:"+this._name+".resume",this._cmdResume,this),this._channel.comply("clock:"+this._name+".pause",this._cmdPause,this),this._pluginManager.on(n,r+"."+this._name+".tick",this._onTick,this)},i.prototype._uninstallHandlers=function(){this._channel.off(null,null,this),this._pluginManager.off(null,null,null,this)},i.prototype._createTimer=function(e,t){this._name=e,this._interval=t;var a={};a[i.KEY_NAME]=r+"."+this._name,a[i.KEY_INTERVAL]=this._interval,this._pluginManager.command(n,s,a)};var r="heartbeat",n="service.clock",s="create",o="pause",l="resume",h="destroy",d="is_paused";t.clock.Timer=i}(e.ADB.core,t),function(e,t){"use strict";function i(e,t,a){i.__super__.constructor.call(this,e,t,n,o,a)}var a=e.Event,r=t.clock.Timer;e.extend(i,r),i.prototype._onCheckStatusComplete=function(e){var t=e.data[c];if(this._logger.debug(this._logTag,"#_onCheckStatusComplete(interval="+t+")"),t){if(t==this._interval)return void this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval value not changed.");t>s?(this._logger.warn(this._logTag,"#_onCheckStatusComplete() > Interval value too large: "+t),this.setInterval(s)):(this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval changed to: "+t),this.setInterval(t))}else this._logger.warn(this._logTag,"#_onCheckStatusComplete() > Invalid interval value."),this.setInterval(o)},i.prototype._getSettings=function(e){this._logger.debug(this._logTag,"#_getSettings()"),this._channel.trigger(new a(l))},i.prototype._installHandlers=function(){i.__super__._installHandlers.call(this),this._channel.on(h,this._getSettings,this),this._channel.on(d,this._onCheckStatusComplete,this),this._channel.reply(c,(function(){return this._interval}),this)};var n="check_status",s=600,o=180,l="clock:check_status.tick",h="clock:check_status.get_settings",d="net:check_status_complete",c="check_status_interval";t.clock.CheckStatusTimer=i}(e.ADB.core,t),function(e,t){"use strict";function i(e,t,a){i.__super__.constructor.call(this,e,t,r,n,a),this._doNotOverrideInterval=!1}var a=t.clock.Timer;e.extend(i,a),i.prototype._onCheckStatusComplete=function(e){var t=e.data[s];if(this._logger.debug(this._logTag,"#_onCheckStatusComplete(interval="+t+")"),this._doNotOverrideInterval)this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval value not changed. (doNotOverrideInterval = true)");else if(t){if(t==this._interval)return void this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval value not changed.");this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval changed to: "+t),this.setInterval(t)}else this._logger.warn(this._logTag,"#_onCheckStatusComplete() > Invalid interval value."),this.setInterval(n)},i.prototype._onUpdateReportingInterval=function(e){var t=e.data[s];if(this._doNotOverrideInterval=!!e.data[o],this._logger.debug(this._logTag,"#_onUpdateReportingInterval(interval="+t+", doNotOverrideInterval="+this._doNotOverrideInterval+")"),t){if(t==this._interval)return void this._logger.debug(this._logTag,"#_onUpdateReportingInterval() > Interval value not changed.");this._logger.debug(this._logTag,"#_onUpdateReportingInterval() > Interval changed to: "+t),this.setInterval(t)}else this._logger.warn(this._logTag,"#_onUpdateReportingInterval() > Invalid interval value."),this.setInterval(n)},i.prototype._installHandlers=function(){i.__super__._installHandlers.call(this),this._channel.on(h,this._onCheckStatusComplete,this),this._channel.on(l,this._onUpdateReportingInterval,this),this._channel.reply(s,(function(){return this._interval}),this)};var r="reporting",n=10,s="reporting_interval",o="do_not_override_interval",l="reporting:update_interval",h="net:check_status_complete";t.clock.ReportingTimer=i}(e.ADB.core,t),function(e,t){"use strict";function i(e,t,a){i.__super__.constructor.call(this,e,t,r,n,a)}var a=t.clock.Timer;e.extend(i,a);var r="idle",n=1800;t.clock.IdleTimer=i}(e.ADB.core,t),function(e,t){"use strict";function i(e,t,a){i.__super__.constructor.call(this,e,t,r,n,a)}var a=t.clock.Timer;e.extend(i,a);var r="flush_filter",n=.25;t.clock.FlushFilterTimer=i}(e.ADB.core,t),function(e,t){"use strict";function i(e,t,i){if(!e)throw new Error("Reference to the pluginManager object cannot be NULL");if(!t)throw new Error("Reference to the channel object cannot be NULL");if(!i)throw new Error("Reference to the logger object cannot be NULL");this._isDestroyed=!1,this._reportingTimer=new n(e,t,i),this._checkStatusTimer=new a(e,t,i),this._flushFilterTimer=new r(e,t,i),this._idleTimer=new s(e,t,i)}var a=t.clock.CheckStatusTimer,r=t.clock.FlushFilterTimer,n=t.clock.ReportingTimer,s=t.clock.IdleTimer;i.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._reportingTimer.destroy(),this._checkStatusTimer.destroy(),this._flushFilterTimer.destroy(),this._idleTimer.destroy())},t.clock.Clock=i}(e.ADB.core,t),function(e,t){"use strict";function i(e,t){this.value=e,this.hint=t}function a(e){this.realm=e,this.data={}}i.HINT_SHORT="short",a.prototype.setField=function(e,t,a){this.data[e]=new i(t,a)},a.prototype._createAccessor=function(e,t,i){var a=this;return function(){return arguments.length&&(a[e]=arguments[0],a.setField(t,arguments[0],i)),a[e]}},t.model.Dao=a,t.model.DaoField=i}(e.ADB.core,t),function(e,t){"use strict";function i(){if(i.__super__.constructor.call(this,"asset"),this.adId=this._createAccessor("_adId","ad_id",null),this.sid=this._createAccessor("_sid","ad_sid",null),this.resolver=this._createAccessor("_resolver","resolver",null),this.podId=this._createAccessor("_podId","pod_id",null),this.podPosition=this._createAccessor("_podPosition","pod_position",null),this.podOffset=this._createAccessor("_podOffset","pod_offset",null),this.podName=this._createAccessor("_podName","pod_name",null),this.adLength=this._createAccessor("_adLength","ad_length",null),this.adName=this._createAccessor("_adName","ad_name",null),arguments.length&&arguments[0]instanceof i){var e=arguments[0];this.adId(e.adId()),this.sid(e.sid()),this.resolver(e.resolver()),this.podId(e.podId()),this.podPosition(e.podPosition()),this.podOffset(e.podOffset()),this.podName(e.podName()),this.adLength(e.adLength()),this.adName(e.adName())}else this.adId(""),this.sid(""),this.resolver(""),this.podId(""),this.podPosition(""),this.podOffset(0),this.podName(""),this.adLength(0),this.adName("")}var a=t.model.Dao;e.extend(i,a),t.model.AdDao=i}(e.ADB.core,t),function(e,t){"use strict";function i(){if(i.__super__.constructor.call(this,"sc"),this.reportSuiteId=this._createAccessor("_reportSuiteId","rsid",null),this.trackingServer=this._createAccessor("_trackingServer","tracking_server",null),this.ssl=this._createAccessor("_ssl","ssl",r.HINT_SHORT),arguments.length&&arguments[0]instanceof i){var e=arguments[0];this.reportSuiteId(e.reportSuiteId()),this.trackingServer(e.trackingServer()),this.ssl(e.ssl())}else this.reportSuiteId(""),this.trackingServer(""),this.ssl(0)}var a=t.model.Dao,r=t.model.DaoField;e.extend(i,a),t.model.AdobeAnalyticsDao=i}(e.ADB.core,t),function(e,t){"use strict";function i(){if(i.__super__.constructor.call(this,"stream"),this.id=this._createAccessor("_id","chapter_id",null),this.sid=this._createAccessor("_sid","chapter_sid",null),this.name=this._createAccessor("_name","chapter_name",null),this.position=this._createAccessor("_position","chapter_pos",null),this.length=this._createAccessor("_length","chapter_length",null),this.offset=this._createAccessor("_offset","chapter_offset",null),arguments.length&&arguments[0]instanceof i){var e=arguments[0];this.id(e.id()),this.sid(e.sid()),this.name(e.name()),this.position(e.position()),this.length(e.length()),this.offset(e.offset())}else this.id(""),this.sid(""),this.name(""),this.position(0),this.length(0),this.offset(0)}var a=t.model.Dao;e.extend(i,a),t.model.ChapterDao=i}(e.ADB.core,t),function(e,t){"use strict";function i(){if(i.__super__.constructor.call(this,"asset"),this.type=this._createAccessor("_type","type",null),this.videoId=this._createAccessor("_videoId","video_id",null),this.publisher=this._createAccessor("_publisher","publisher",null),this.adData=this._createAccessor("_adData","ad_data",null),this.chapterData=this._createAccessor("_chapterData","chapter_data",null),this.length=this._createAccessor("_length","length",null),this.name=this._createAccessor("_name","name",null),arguments.length&&arguments[0]instanceof i){var e=arguments[0];this.type(e.type()),this.name(e.name()),this.videoId(e.videoId()),this.publisher(e.publisher()),this.length(e.length());var t=e.adData()?new r(e.adData()):null;this.adData(t);var a=e.chapterData()?new n(e.chapterData()):null;this.chapterData(a)}else this.type(""),this.name(""),this.videoId(""),this.publisher(""),this.length(0),this.adData(null),this.chapterData(null)}var a=t.model.Dao,r=t.model.AdDao,n=t.model.ChapterDao;e.extend(i,a),i.TYPE_AD="ad",i.TYPE_MAIN_CONTENT="main",t.model.AssetDao=i}(e.ADB.core,t),function(e,t){"use strict";function i(){if(i.__super__.constructor.call(this,"event"),this.type=this._createAccessor("_type","type",null),this.duration=this._createAccessor("_duration","duration",null),this.playhead=this._createAccessor("_playhead","playhead",null),this.id=this._createAccessor("_id","id",null),this.source=this._createAccessor("_source","source",null),this.ts=this._createAccessor("_ts","ts",null),this.prevTs=this._createAccessor("_prevTs","prev_ts",null),arguments.length&&arguments[0]instanceof i){var e=arguments[0];this.type(e.type()),this.duration(e.duration()),this.playhead(e.playhead()),this.id(e.id()),this.source(e.source()),this.ts(e.ts()),this.prevTs(e.prevTs())}else this.type(""),this.duration(0),this.playhead(0),this.id(""),this.source(""),this.ts(0),this.prevTs(-1)}var a=t.model.Dao;e.extend(i,a),i.EVENT_TYPE_AA_START="aa_start",i.EVENT_TYPE_AA_AD_START="aa_ad_start",i.EVENT_TYPE_START="start",i.EVENT_TYPE_RESUME="resume",i.EVENT_TYPE_CHAPTER_START="chapter_start",i.EVENT_TYPE_CHAPTER_COMPLETE="chapter_complete",i.EVENT_TYPE_CHAPTER_SKIP="chapter_skip",i.EVENT_TYPE_PLAY="play",i.EVENT_TYPE_PAUSE="pause",i.EVENT_TYPE_STALL="stall",i.EVENT_TYPE_BUFFER="buffer",i.EVENT_TYPE_BITRATE_CHANGE="bitrate_change",i.EVENT_TYPE_ERROR="error",i.EVENT_TYPE_COMPLETE="complete",i.EVENT_TYPE_SKIP="skip",i.EVENT_TYPE_END="end",t.model.EventDao=i}(e.ADB.core,t),function(e,t){"use strict";function i(){if(i.__super__.constructor.call(this,"stream"),this.bitrate=this._createAccessor("_bitrate","bitrate",null),this.fps=this._createAccessor("_fps","fps",null),this.droppedFrames=this._createAccessor("_droppedFrames","dropped_frames",null),this.startupTime=this._createAccessor("_startup_time","startup_time",null),arguments.length&&arguments[0]instanceof i){var e=arguments[0];this.bitrate(e.bitrate()),this.fps(e.fps()),this.droppedFrames(e.droppedFrames()),this.startupTime(e.startupTime()),this.isStartupTimeOverridden=e.isStartupTimeOverridden}else this.bitrate(0),this.fps(0),this.droppedFrames(0),this.startupTime(0),this.isStartupTimeOverridden=!1}var a=t.model.Dao;e.extend(i,a),t.model.QoSDao=i}(e.ADB.core,t),function(e,t){"use strict";function i(){if(i.__super__.constructor.call(this,"sp"),this.ovp=this._createAccessor("_ovp","ovp",null),this.sdk=this._createAccessor("_sdk","sdk",null),this.channel=this._createAccessor("_channel","channel",null),this.playerName=this._createAccessor("_playerName","player_name",null),this.libVersion=this._createAccessor("_libVersion","hb_version",null),this.apiLevel=this._createAccessor("_apiLevel","hb_api_lvl",null),arguments.length&&arguments[0]instanceof i){var e=arguments[0];this.ovp(e.ovp()),this.sdk(e.sdk()),this.channel(e.channel()),this.playerName(e.playerName()),this.libVersion(e.libVersion()),this.apiLevel(e.apiLevel())}else this.ovp(r),this.sdk(r),this.channel(r),this.playerName(""),this.libVersion(""),this.apiLevel(0)}var a=t.model.Dao;e.extend(i,a);var r="unknown";t.model.ServiceProviderDao=i}(e.ADB.core,t),function(e,t){"use strict";function i(){if(i.__super__.constructor.call(this,"event"),this.sessionId=this._createAccessor("_sessionId","sid",null),arguments.length&&arguments[0]instanceof i){var e=arguments[0];this.sessionId(e.sessionId())}else this.sessionId(null)}var a=t.model.Dao;e.extend(i,a),t.model.SessionDao=i}(e.ADB.core,t),function(e,t){"use strict";function i(){if(i.__super__.constructor.call(this,"stream"),this.type=this._createAccessor("_type","type",null),arguments.length&&arguments[0]instanceof i){var e=arguments[0];this.type(e.type())}else this.type(null)}var a=t.model.Dao;e.extend(i,a),t.model.StreamDao=i}(e.ADB.core,t),function(e,t){"use strict";function i(){if(i.__super__.constructor.call(this,"user"),this.analyticsVisitorId=this._createAccessor("_analyticsVisitorId","aid",null),this.marketingCloudVisitorId=this._createAccessor("_marketingCloudVisitorId","mid",null),this.visitorId=this._createAccessor("_visitorId","id",null),arguments.length&&arguments[0]instanceof i){var e=arguments[0];this.analyticsVisitorId(e.analyticsVisitorId()),this.marketingCloudVisitorId(e.marketingCloudVisitorId()),this.visitorId(e.visitorId())}else this.analyticsVisitorId(null),this.marketingCloudVisitorId(null),this.visitorId(null)}var a=t.model.Dao;e.extend(i,a),t.model.UserDao=i}(e.ADB.core,t),function(e,t){"use strict";function i(){if(i.__super__.constructor.call(this,"aam"),this.audienceManagerBlob=this._createAccessor("_audienceManagerBlob","blob",null),this.audienceManagerLocationHint=this._createAccessor("_audienceManagerLocationHint","loc_hint",null),arguments.length&&arguments[0]instanceof i){var e=arguments[0];this.audienceManagerBlob(e.audienceManagerBlob()),this.audienceManagerLocationHint(e.audienceManagerLocationHint())}else this.audienceManagerBlob(null),this.audienceManagerLocationHint(null)}var a=t.model.Dao;e.extend(i,a),t.model.AudienceManagerDao=i}(e.ADB.core,t),function(e,t){"use strict";var i=e.ObjectUtils,a=t.model.EventDao,r=t.model.AssetDao,n=t.model.StreamDao,s=t.model.QoSDao;t.model.TrackItem=function(e,t,o,l,h){this.eventData=new a,this.eventData.type(t),this.eventData.duration(0),this.eventData.ts((new Date).getTime()),this.eventData.playhead(o),this.assetData=new r(e._assetData),this.streamData=new n(e._streamData),this.qosData=new s(e._qosData),this.cuserData=i.clone(e._cuserData),this.meta=l,this.callback=h,this.filterReport=!0}}(e.ADB.va.utils,t),function(e,t){"use strict";var i=e.ObjectUtils,a=t.model.EventDao,r=t.model.AssetDao,n=t.model.StreamDao,s=t.model.QoSDao;t.model.CUserDao,t.model.Report=function(e,t,o,l,h,d){this.adobeAnalyticsData=e,this.userData=t,this.aamData=o,this.serviceProviderData=l,this.sessionData=h,this.eventData=new a(d.eventData),this.assetData=new r(d.assetData),this.streamData=new n(d.streamData),this.qosData=new s(d.qosData),this.cuserData=i.clone(d.cuserData),this.meta=i.clone(d.meta),this.callback=d.callback,this.filterReport=d.filterReport}}(e.ADB.va.utils,t),function(e){"use strict";function t(){}t.prototype.serializeReport=function(e){},t.prototype.serializeDao=function(e){},t.prototype.serializeMap=function(e){},t.prototype.serializeNumber=function(e,t,i,a){},t.prototype.serializeString=function(e,t,i,a){},e.model.ISerializer=t}(t),function(e,t){"use strict";function i(e){if(!e)throw new Error("Reference to the logger object cannot be NULL");this._logger=e}var a=t.model.Dao,r=t.model.DaoField,n=t.model.ISerializer;e.extend(i,n),i.prototype.serializeReport=function(e){var t=[];return t.push(this.serializeDao(e.adobeAnalyticsData)),t.push(this.serializeDao(e.userData)),t.push(this.serializeDao(e.aamData)),t.push(this.serializeMap(e.cuserData,"cuser")),t.push(this.serializeDao(e.serviceProviderData)),t.push(this.serializeDao(e.sessionData)),t.push(this.serializeDao(e.eventData)),t.push(this.serializeDao(e.assetData)),t.push(this.serializeDao(e.streamData)),t.push(this.serializeDao(e.qosData)),t.push(this.serializeMap(e.meta,"meta")),{serializedOutput:t.filter((function(e){return!!e})).join("&"),callback:e.callback}},i.prototype.serializeDao=function(e){return this._processDao(e).filter((function(e){return!!e})).join("&")},i.prototype.serializeMap=function(e,t){var i=[],a=t||"meta";for(var r in e)e.hasOwnProperty(r)&&e[r]&&i.push("s:"+a+":"+r+"="+window.encodeURIComponent(e[r]));return i.join("&")},i.prototype.serializeNumber=function(e,t,i,a){var n=o;return null==t||isNaN(t)?null:(a===r.HINT_SHORT&&(n=l),n+":"+i+":"+e+"="+Math.floor(t))},i.prototype.serializeString=function(e,t,i,a){return t?h+":"+i+":"+e+"="+window.encodeURIComponent(t):null},i.prototype._processDao=function(e){var t=[];for(var i in e.data)if(e.data.hasOwnProperty(i)){var r=e.data[i],n=r.value,o=r.hint,l=null,h=e.realm;if(null==n)continue;"number"==typeof n?l=this.serializeNumber(i,n,h,o):"string"==typeof n?l=this.serializeString(i,n,h,o):n instanceof a?l=this.serializeDao(n):this._logger.warn(s,"#_processDao() > Unable to serialize DAO. Field: "+i+". Value: "+n+"."),l&&t.push(l)}return t};var s="ah::QuerystringSerializer",o="l",l="h",h="s";t.model.QuerystringSerializer=i}(e.ADB.core,t),function(e,t){"use strict";function i(e,t){if(!e)throw new Error("Reference to the data object cannot be NULL");if(this._data=e,!t)throw new Error("Reference to the logger object cannot be NULL");this._logger=t}i.prototype.parse=function(){var e,t,i,h,d,c,p;window.DOMParser?c=(new window.DOMParser).parseFromString(this._data,"text/xml"):((c=new window.ActiveXObject("Microsoft.XMLDOM")).async=!1,c.loadXML(this._data)),(p=parseInt(c.getElementsByTagName("trackingInterval")[0].childNodes[0].nodeValue,10))&&(e=p),(p=parseInt(c.getElementsByTagName("setupCheckInterval")[0].childNodes[0].nodeValue,10))&&(t=p),(p=parseInt(c.getElementsByTagName("trackExternalErrors")[0].childNodes[0].nodeValue,10))&&(i=1==p),c.getElementsByTagName("trackingDisabled")[0]&&(h=1==(p=parseInt(c.getElementsByTagName("trackingDisabled")[0].childNodes[0].nodeValue,10))),d=!c.getElementsByTagName("nielsenEnabled")[0]||1==(p=parseInt(c.getElementsByTagName("nielsenEnabled")[0].childNodes[0].nodeValue,10));var u={};return u[r]=e,u[n]=t,u[s]=i,u[l]=h,u[o]=d,this._logger.debug(a,"#parse() > Obtained configuration settings."),u};var a="ah::SettingsParser",r="reporting_interval",n="check_status_interval",s="track_external_errors",o="nielsen_enabled",l="tracking_disabled";t.network.SettingsParser=i}(e.ADB.core,t),function(e,t){"use strict";function i(e,t){if(this._trackingServer=null,this._checkStatusServer=null,this._publisher=null,this._isConfigured=!1,this._isDestroyed=!1,this._beginReporting=!1,this._sendingRequest=!1,this._requestsQueue=[],this._quietMode=!1,this._prevReportSent=null,!e)throw new Error("Reference to the channel object cannot be NULL");if(this._channel=e,!t)throw new Error("Reference to the logger object cannot be NULL");this._logger=t,this._serializer=new l(t),this._installEventListeners()}var a=e.Event,r=e.URLRequestMethod,n=e.URLRequest,s=e.URLLoader,o=t.network.SettingsParser,l=t.model.QuerystringSerializer;i.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._logger.debug(h,"#destroy()"),this._uninstallEventListeners())},i.prototype._onApiConfig=function(e){var t=e.data;this._logger.debug(h,"#_onApiConfig(sb_server="+t[d]+", check_status_server="+t[c]+", publisher="+t[p]+", quiet_mode="+t[u]+", ssl="+t[_]+")"),this._trackingServer=this._updateRequestProtocol(t[d],t[_]),this._checkStatusServer=this._updateRequestProtocol(t[c],t[_]),this._publisher=t[p],this._quietMode=t[u],this._isConfigured=!0},i.prototype._onBeginReporting=function(e){this._logger.debug(h,"#_onBeginReporting()"),this._beginReporting=!0,this._sendNextRequest(),this._onClockCheckStatusTick()},i.prototype._onFilterReportAvailable=function(e){var t=e.data;if(this._isConfigured){var i=t[g];if(this._prevReportSent&&this._prevReportSent.eventData&&i.eventData&&this._prevReportSent.eventData.playhead==i.eventData.playhead&&this._prevReportSent.eventData.ts==i.eventData.ts&&this._prevReportSent.eventData.prevTs==i.eventData.prevTs&&this._prevReportSent.eventData.type==i.eventData.type)this._logger.debug(h,"#_onFilterReportAvailable() > Duplicate heartbeat report not sent for URL:\n"+r);else{this._prevReportSent=i;var a=this._serializer.serializeReport(i),r=this._trackingServer+"/?"+a.serializedOutput;this._processRequest(r,a.callback)}}else this._logger.warn(h,"#_onFilterReportAvailable() > Unable to send request: not configured.")},i.prototype._processRequest=function(e,t){this._requestsQueue.push({url:e,callback:t}),this._sendNextRequest()},i.prototype._sendNextRequest=function(){if(this._beginReporting)if(this._sendingRequest)this._logger.debug(h,"#_sendNextRequest() > Exiting as we are currently sending a request.");else{var e=this._requestsQueue.shift();if(e){this._sendingRequest=!0,this._logger.debug(h,"#_sendNextRequest() > "+e.url);var t=this,i=new s,o=function(){i.close(),e.callback&&e.callback.call(null),t._sendingRequest=!1,t._sendNextRequest()};if(!this._quietMode){i.addEventListener(a.SUCCESS,(function(e){o()}),this),i.addEventListener(a.ERROR,(function(e){t._logger.warn(h,"#_onFilterReportAvailable() > Failed to send heartbeat report."),o()}),this);var l=new n(e.url,r.GET);i.load(l)}}else this._logger.debug(h,"#_sendNextRequest() > Exiting as we have no requests to send.")}else this._logger.debug(h,"#_sendNextRequest() > Exiting as we have not started reporting.")},i.prototype._onClockCheckStatusTick=function(e){if(this._isConfigured)if(this._publisher)if(this._beginReporting){var t=this,i=this._publisher.replace(/[^a-zA-Z0-9]+/,"-").toLocaleLowerCase(),l=this._checkStatusServer+i+".xml?r="+(new Date).getTime(),d=new n(l,r.GET),c=new s;c.addEventListener(a.SUCCESS,(function(e){if(e.data){var i=new o(e.data.response,t._logger).parse();i?t._channel.trigger(new a(I,i)):t._logger.warn(h,"#_onClockCheckStatusTick() > Failed to parse the config. settings.")}c.close()}),this),c.addEventListener(a.ERROR,(function(e){t._logger.warn(h,"#_onClockCheckStatusTick() > Failed to obtain the config. settings."),c.close()}),this),this._logger.debug(h,"#_onClockCheckStatusTick() > Get new settings from: "+l),c.load(d)}else this._logger.debug(h,"#_onClockCheckStatusTick() > Exiting as we have not started reporting.");else this._logger.warn(h,"#_onClockCheckStatusTick() > Publisher is NULL.");else this._logger.warn(h,"#_onClockCheckStatusTick() > Unable to send request: not configured.")},i.prototype._updateRequestProtocol=function(e,t){var i=e;return 0===i.indexOf("http://")?i=i.slice(7):0===i.indexOf("https://")&&(i=i.slice(8)),t?"https://"+i:"http://"+i},i.prototype._installEventListeners=function(){this._channel.on(f,this._onApiConfig,this),this._channel.on(m,this._onBeginReporting,this),this._channel.on(v,this._onFilterReportAvailable,this),this._channel.on(y,this._onClockCheckStatusTick,this)},i.prototype._uninstallEventListeners=function(){this._channel.off(null,null,this)};var h="ah::Network",d="tracking_server",c="check_status_server",p="publisher",u="quiet_mode",_="ssl",g="report",f="api:config",m="api:video_begin_reporting",v="filter:data_available",y="clock:check_status.tick",I="net:check_status_complete";t.network.Network=i}(e.ADB.core,t),function(e,t){"use strict";function i(e,t){if(!e)throw new Error("Reference to the channel object cannot be NULL");if(this._channel=e,!t)throw new Error("Reference to the logger object cannot be NULL");this._logger=t,this._isDestroyed=!1,this._isBufferingInProgress=!1,this._reportBuffer={},this._tsHistory={},this._workQueue=new o,this._installEventListeners()}function a(e){var t=[];return e&&e.forEach((function(e){e.eventData.type()==h.EVENT_TYPE_PAUSE||e.eventData.type()==h.EVENT_TYPE_STALL||e.eventData.type()==h.EVENT_TYPE_BUFFER?(!e.filterReport||e.eventData.duration()>y)&&t.push(e):t.push(e)})),t}function r(e){var t=-1,i=-1,a=[];return e.forEach((function(e){e.eventData.type()==h.EVENT_TYPE_START?e.assetData.type()==d.TYPE_MAIN_CONTENT?-1==t?t=a.push(e)-1:(e.eventData.prevTs(-1),a[t]=e):-1==i?i=a.push(e)-1:(e.eventData.prevTs(-1),a[i]=e):a.push(e)})),a}function n(e){var t=[];return e.forEach((function(i){if(i.eventData.type()==h.EVENT_TYPE_PLAY){if(i.eventData.duration()>v)t.push(i);else if(0==i.eventData.duration()&&i.assetData.type()==d.TYPE_MAIN_CONTENT){var a=function(e){var t=[];return e.forEach((function(e){e.eventData.type()!=h.EVENT_TYPE_PLAY&&e.eventData.type()!=h.EVENT_TYPE_BUFFER&&e.eventData.type()!=h.EVENT_TYPE_START||t.push(e)})),t}(e);a.indexOf(i)==a.length-1&&t.push(i)}}else t.push(i)})),t}var s=e.radio.Command,o=e.radio.CommandQueue,l=e.Event,h=t.model.EventDao,d=t.model.AssetDao;i.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._logger.debug(E,"#destroy()"),this._uninstallEventListeners(),this.clear())},i.prototype.clear=function(){this._logger.debug(E,"#clear()"),this._workQueue.cancelAllCommands(),this._reportBuffer={},this._tsHistory={},this._isBufferingInProgress=!1},i.prototype.flush=function(){this._workQueue.addCommand(new s(this._flushBufferReport,this))},i.prototype._bufferReport=function(e){if(!this._isDestroyed){var t=e[g];if(t){var i=t.sessionData.sessionId();this._reportBuffer[i]=this._reportBuffer[i]||[],this._reportBuffer[i].push(t)}if(!this._isBufferingInProgress){this._isBufferingInProgress=!0;var a={};a[_]=!0,a[f]=1,this._channel.command(m,a)}}},i.prototype._flushBufferReport=function(){function e(e){if(e)for(var i=0;i<e.length;i++){var a=e[i],r=a.sessionData.sessionId();t._tsHistory[r]=t._tsHistory[r]||{};var n=a.eventData.type()+"."+(a.assetData.type()==d.TYPE_AD?a.assetData.adData().adId():a.assetData.videoId());t._tsHistory[r].hasOwnProperty(n)&&a.eventData.prevTs(t._tsHistory[r][n]),t._tsHistory[r][n]=a.eventData.ts()}}if(!this._isDestroyed){var t=this;for(var i in this._reportBuffer)if(this._reportBuffer.hasOwnProperty(i)){var s=n(r(a(this._reportBuffer[i])));e(s);for(var o=0;o<s.length;o++){var h=s[o],c={};c[g]=h,this._channel.trigger(new l(p,c))}}this._reportBuffer={};var u=this._channel.request(I),_=this._tsHistory[u]||{};this._tsHistory={},this._tsHistory[u]=_,this._isBufferingInProgress=!1}},i.prototype._onContextReportAvailable=function(e){var t=e.data;this._workQueue.addCommand(new s(this._bufferReport,this,[t]))},i.prototype._onClockFlushFilterTick=function(e){this.flush()},i.prototype._installEventListeners=function(){this._channel.on(c,this._onContextReportAvailable,this),this._channel.on(u,this._onClockFlushFilterTick,this)},i.prototype._uninstallEventListeners=function(){this._channel.off(null,null,this)};var c="context:report_available",p="filter:data_available",u="clock:flush_filter.tick",_="reset",g="report",f="repeat_count",m="clock:flush_filter.resume",v=250,y=250,I="session_id",E="ah::ReportFilter";t.filter.ReportFilter=i}(e.ADB.core,t),function(e,t){"use strict";function i(e,t){this._onFail={fn:e,ctx:t}}var a=e.ErrorInfo;i.prototype.validateFields=function(e,t){if(!e)return this._fail("Data cannot be null");if(t)for(var i=0;i<t.length;i++){var a=t[i];switch(a){case"videoId":if(!e.hasOwnProperty("videoId"))return this._fail("The ID for the main video must be specified.");if("string"!=typeof e.videoId)return this._fail("The ID for the main video must be a String.");if(""===e.videoId)return this._fail("The ID for the main video cannot be an empty string.");break;case"streamType":if(!e.hasOwnProperty("streamType"))return this._fail("The stream type for the main video must be specified.");if("string"!=typeof e.streamType)return this._fail("The stream type for the main video must be a String.");if(""===e.streamType)return this._fail("The stream type for the main video cannot be an empty string.");break;case"videoLength":if(!e.hasOwnProperty("videoLength"))return this._fail("The length of the main video must be specified.");if("number"!=typeof e.videoLength)return this._fail("The length of the main video must be a Number.");if(isNaN(e.videoLength))return this._fail("The length of the main video cannot be NaN.");break;case"playhead":if(!e.hasOwnProperty("playhead"))return this._fail("The playhead for the main video must be specified.");if("number"!=typeof e.playhead)return this._fail("The playhead for the main video must be a Number.");if(isNaN(e.playhead))return this._fail("The playhead for the main video cannot be NaN.");break;case"playerName":if(!e.hasOwnProperty("playerName"))return this._fail("The player name for the main video must be specified.");if("string"!=typeof e.playerName)return this._fail("The player name for the main video must be a String.");if(""===e.playerName)return this._fail("The player name for the main video cannot be an empty string.");break;case"rsid":if(!e.hasOwnProperty("rsid"))return this._fail("account (rsid) is required and has to be set in the AppMeasurement instance.");if("string"!=typeof e.rsid)return this._fail("account (rsid) of the AppMeasurement instance must be a String.");if(""===e.rsid)return this._fail("account (rsid) of the AppMeasurement instance  cannot be an empty string.");break;case"trackingServer":if(!e.hasOwnProperty("trackingServer"))return this._fail("trackingServer is required and has to be set in the AppMeasurement instance.");if("string"!=typeof e.trackingServer)return this._fail("trackingServer of the AppMeasurement instance must be a String.");if(""===e.trackingServer)return this._fail("trackingServer of the AppMeasurement instance cannot be an empty string.");break;case"podPlayerName":if(!e.hasOwnProperty("podPlayerName"))return this._fail("The player name for the ad-break must be specified.");if("string"!=typeof e.podPlayerName)return this._fail("The player name for the ad-break must be a String.");if(""===e.podPlayerName)return this._fail("The player name for the ad-break cannot be an empty string.");break;case"podPosition":if(!e.hasOwnProperty("podPosition"))return this._fail("Position (index) of the ad-break must be specified.");if("number"!=typeof e.podPosition)return this._fail("Position (index) of the ad-break must be a Number.");if(isNaN(e.podPosition))return this._fail("Position (index) of the ad-break cannot be NaN.");break;case"adId":if(!e.hasOwnProperty("adId"))return this._fail("The ad ID must be specified.");if("string"!=typeof e.adId)return this._fail("The ad ID must be a String.");if(""===e.adId)return this._fail("The ad ID cannot be an empty string.");break;case"adPosition":if(!e.hasOwnProperty("adPosition"))return this._fail("Position (index) of the ad must be specified.");if("number"!=typeof e.adPosition)return this._fail("Position (index) of the ad must be a Number.");if(isNaN(e.adPosition))return this._fail("Position (index) of the ad cannot be NaN.");break;case"chapterPosition":if(!e.hasOwnProperty("chapterPosition"))return this._fail("Position (index) of the chapter must be specified.");if("number"!=typeof e.chapterPosition)return this._fail("Position (index) of the chapter must be a Number.");if(isNaN(e.chapterPosition))return this._fail("Position (index) of the chapter cannot be NaN.");break;case"chapterOffset":if(!e.hasOwnProperty("chapterOffset"))return this._fail("Chapter start-time (offset) must be specified.");if("number"!=typeof e.chapterOffset)return this._fail("Chapter start-time (offset) must be a Number.");if(isNaN(e.chapterOffset))return this._fail("Chapter start-time (offset) cannot be NaN.");break;case"chapterLength":if(!e.hasOwnProperty("chapterLength"))return this._fail("The length of the chapter must be specified.");if("number"!=typeof e.chapterLength)return this._fail("The length of the chapter must be a Number.");if(isNaN(e.chapterLength))return this._fail("The length of the chapter cannot be NaN.");break;default:return this._fail("Unable to validate unknown parameter: "+a)}}return!0},i.prototype._fail=function(e){var t=new a("Invalid input data",e);return this._onFail.fn&&this._onFail.fn.call(this._onFail.ctx,t),!1},t.context.InputDataValidator=i}(e.ADB.va,t),function(e,t){"use strict";function i(e,t){if(!t)throw new Error("Reference to the logger object cannot be NULL");if(this._logger=t,!e)throw new Error("Reference to the context object cannot be NULL");this._context=e}var a=t.model.Report;i.prototype.createReportForItem=function(e){return this._logger.debug(r,"Creating report for item: "+e.eventData.type()),new a(this._context._adobeAnalyticsData,this._context._userData,this._context._aamData,this._context._serviceProviderData,this._context._sessionData,e)};var r="ah::ReportFactory";t.context.ReportFactory=i}(e.ADB.core,t),function(e,t,i,a){"use strict";function r(e,t){if(!e)throw new Error("Reference to the channel object cannot be NULL");if(this._channel=e,!t)throw new Error("Reference to the logger object cannot be NULL");this._logger=t,this._lastInBandItem=null,this._stashedLastInBandItem=null,this._stashedMainMetadata=null,this._autoComputedStartupTime=0,this._reportingInterval=pe,this._assetData=null,this._streamData=null,this._qosData=null,this._sessionData=null,this._cuserData=null,this._adobeAnalyticsData=new h,this._serviceProviderData=new d,this._userData=new c,this._aamData=new p,this._isTrackingSessionActive=!1,this._isVideoComplete=!1,this._isDestroyed=!1,this._doNotOverrideEventDuration=!1,this._reportFactory=new I(this,this._logger),this._inputDataValidator=new E((function(e){this._logger.error(b,e.getMessage()+" | "+e.getDetails()),this._channel.trigger(new o(A,e))}),this),this._trackExternalErrors=!0,this._installEventListeners()}var n=i.md5,s=i.ObjectUtils,o=e.Event,l=a.model.SessionDao,h=a.model.AdobeAnalyticsDao,d=a.model.ServiceProviderDao,c=a.model.UserDao,p=a.model.AudienceManagerDao,u=a.model.EventDao,_=a.model.AssetDao,g=a.model.StreamDao,f=a.model.QoSDao,m=a.model.AdDao,v=a.model.ChapterDao,y=a.model.TrackItem,I=a.context.ReportFactory,E=a.context.InputDataValidator;r.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._logger.debug(b,"#destroy()"),this._uninstallEventListeners())},r.prototype._onApiAnalyticsStart=function(e){this._logger.debug(b,"#_onApiAnalyticsStart()");var t=e.data;if(this._checkCall("_onApiAnalyticsStart")&&this._inputDataValidator.validateFields(t,["playhead"])){this._userData.visitorId(t.vid),this._userData.analyticsVisitorId(t.aid),this._userData.marketingCloudVisitorId(t.mid),this._aamData.audienceManagerBlob(t.blob),this._aamData.audienceManagerLocationHint(t.loc_hint),t.customerIDs&&(this._cuserData=t.customerIDs),this._updateQoSInfo(t);var i=new y(this,u.EVENT_TYPE_AA_START,t.playhead,null,t._eventData[N]);i.assetData.adData(null),i.assetData.type(_.TYPE_MAIN_CONTENT),this._cuserData=null,this._sendHit(i)}},r.prototype._onApiAnalyticsAdStart=function(e){this._logger.debug(b,"#_onApiAnalyticsAdStart()");var t=e.data;if(this._checkCall("_onApiAnalyticsAdStart")&&this._inputDataValidator.validateFields(t,["playhead"])){this._updateQoSInfo(t);var i=new y(this,u.EVENT_TYPE_AA_AD_START,t.playhead,null,t._eventData[N]);this._sendHit(i)}},r.prototype._onApiVideoLoad=function(e){var t=e.data;this._logger.debug(b,"#_onApiVideoLoad(rsid="+t.rsid+", aa_trackingServer="+t.trackingServer+")"),this._resetInternalState(),this._inputDataValidator.validateFields(t,["rsid","trackingServer"])&&(this._sessionData.sessionId(this._generateSessionId()),this._isTrackingSessionActive=!0)},r.prototype._onApiVideoUnload=function(e){this._logger.debug(b,"#_onApiVideoUnload()"),this._isTrackingSessionActive?this._isTrackingSessionActive=!1:this._logger.debug(b,"#_onApiVideoUnload() > No active tracking session.")},r.prototype._onApiVideoStart=function(e){var t=e.data;if(this._logger.debug(b,"#_onApiVideoStart(id="+t.videoId+", name="+t.videoName+", length="+t.videoLength+", type="+t.streamType+", playerName="+t.playerName+")"),this._checkCall("_onApiVideoStart")&&this._inputDataValidator.validateFields(t,["videoId","streamType","videoLength","playhead","playerName"])){this._lastInBandItem=null,this._stashedLastInBandItem=null,this._adobeAnalyticsData.reportSuiteId(t.rsid),this._adobeAnalyticsData.trackingServer(t.trackingServer),this._adobeAnalyticsData.ssl(Number(t.useSsl)),this._serviceProviderData.ovp(t.ovp),this._serviceProviderData.sdk(t.sdk),this._serviceProviderData.channel(t.channel),this._serviceProviderData.libVersion(t.version),this._serviceProviderData.apiLevel(t.apiLvl),this._serviceProviderData.playerName(t.playerName),this._assetData.adData(null),this._assetData.chapterData(null),this._assetData.videoId(t.videoId),this._assetData.length(t.videoLength),this._assetData.type(_.TYPE_MAIN_CONTENT),this._assetData.publisher(t.publisher),this._assetData.name(t.videoName),this._streamData.type(t.streamType),this._updateQoSInfo(t);var i=t.metaNielsen?s.merge(t.metaVideo,t.metaNielsen):t.metaVideo,a=new y(this,u.EVENT_TYPE_START,t.playhead,i,t._eventData[N]);this._sendHit(a)}},r.prototype._onApiVideoResume=function(e){var t=e.data;if(this._logger.debug(b,"#_onApiVideoResume(id="+t.videoId+", name="+t.videoName+", length="+t.videoLength+", type="+t.streamType+", playerName="+t.playerName+")"),this._checkCall("_onApiVideoResume")&&this._inputDataValidator.validateFields(t,["videoId","streamType","videoLength","playhead","playerName"])){this._assetData.videoId(t.videoId),this._assetData.length(t.videoLength),this._assetData.type(_.TYPE_MAIN_CONTENT),this._assetData.name(t.videoName),this._streamData.type(t.streamType);var i=new y(this,u.EVENT_TYPE_RESUME,t.playhead,null,t._eventData[N]);this._sendHit(i)}},r.prototype._onApiVideoSessionEnd=function(e){this._logger.debug(b,"#_onApiVideoSessionEnd()");var t=e.data;if(this._checkCall("_onApiVideoSessionEnd")&&this._inputDataValidator.validateFields(t,["playhead"])){var i=new y(this,u.EVENT_TYPE_END,t.playhead,null,t._eventData[N]);i.assetData.adData(null),i.assetData.type(_.TYPE_MAIN_CONTENT),this._sendHit(i)}},r.prototype._onApiVideoComplete=function(e){this._logger.debug(b,"#_onApiVideoComplete()");var t=e.data;if(this._checkCall("_onApiVideoComplete")){var i=new y(this,u.EVENT_TYPE_COMPLETE,this._assetData.length(),null,t._eventData[N]);this._sendHit(i),this._isVideoComplete=!0}},r.prototype._onApiVideoSkip=function(e){this._logger.debug(b,"#_onApiVideoSkip()");var t=e.data;if(this._checkCall("_onApiVideoSkip")){var i=new y(this,u.EVENT_TYPE_SKIP,t.playhead,null,t._eventData[N]);this._sendHit(i),this._isVideoComplete=!0}},r.prototype._onApiPlay=function(e){this._logger.debug(b,"#_onApiPlay()");var t=e.data;if(this._checkCall("_onApiPlay")&&this._inputDataValidator.validateFields(t,["playhead"])){this._updateQoSInfo(t);var i=new y(this,u.EVENT_TYPE_PLAY,t.playhead,null,t._eventData[N]);this._sendHit(i)}},r.prototype._onApiPause=function(e){this._logger.debug(b,"#_onApiPause()");var t=e.data;if(this._checkCall("_onApiPause")&&this._inputDataValidator.validateFields(t,["playhead"])){this._updateQoSInfo(t);var i=t.playheadStalled?u.EVENT_TYPE_STALL:u.EVENT_TYPE_PAUSE,a=new y(this,i,t.playhead,null,t._eventData[N]);t._eventData.hasOwnProperty(M)&&(a.filterReport=t._eventData[M]),this._sendHit(a)}},r.prototype._onApiBufferStart=function(e){this._logger.debug(b,"#_onApiBufferStart()");var t=e.data;if(this._checkCall("_onApiBufferStart")&&this._inputDataValidator.validateFields(t,["playhead"])){this._updateQoSInfo(t);var i=new y(this,u.EVENT_TYPE_BUFFER,t.playhead,null,t._eventData[N]);this._sendHit(i)}},r.prototype._onApiAdBreakStart=function(e){this._logger.debug(b,"#_onApiAdBreakStart()");var t=e.data;this._checkCall("_onApiAdBreakStart")&&this._inputDataValidator.validateFields(t,["playhead"])&&(this._flushLastInbandItem(t),this._updateLastInbandItemToBuffering())},r.prototype._onApiAdBreakComplete=function(e){this._logger.debug(b,"#_onApiAdBreakComplete()");var t=e.data;this._checkCall("_onApiAdBreakComplete")&&this._inputDataValidator.validateFields(t,["playhead"])&&(this._flushLastInbandItem(t),this._restoreLastInbandItem())},r.prototype._onApiAdStart=function(e){var t=e.data;if(this._logger.debug(b,"#_onApiAdStart(id="+t.adId+", player_name="+t.podPlayerName+", parent_name="+this._assetData.videoId()+", pod_pos="+t.adPosition+")"),this._checkCall("_onApiAdStart")&&this._inputDataValidator.validateFields(t,["playhead","podPosition","podPlayerName","adId","adPosition"])){var i=new m;i.adId(t.adId),i.adName(t.adName),i.adLength(t.adLength),i.resolver(t.podPlayerName),i.podId(n(this._assetData.videoId())+"_"+t.podPosition),i.podPosition(t.adPosition+""),i.podName(t.podName),i.podOffset(t.podSecond),i.sid(this._generateSessionId()),this._assetData.adData(i),this._assetData.type(_.TYPE_AD),this._updateQoSInfo(t);var a=s.merge(t.metaVideo,t.metaAd);a=t.metaNielsen?s.merge(a,t.metaNielsen):a,a=t.metaAdNielsen?s.merge(a,t.metaAdNielsen):a;var r=new y(this,u.EVENT_TYPE_START,t.playhead,a,t._eventData[N]);if(this._sendHit(r),this._restoreLastInbandItem(),t.adGranularTracking){var o=t.adTrackingInterval?t.adTrackingInterval:this._reportingInterval;this._updateReportingInterval(o,!0)}}},r.prototype._onApiAdComplete=function(e){this._logger.debug(b,"#_onApiAdComplete()");var t=e.data;if(this._checkCall("_onApiAdComplete")&&this._inputDataValidator.validateFields(t,["playhead"])){if(this._assetData.type()!=_.TYPE_AD)return void this._logger.warn(b,"#_onApiAdComplete() > Ignoring the ad complete event, because we are no longer in an ad.");this._updateQoSInfo(t);var i=new y(this,u.EVENT_TYPE_COMPLETE,t.playhead,null,t._eventData[N]);this._sendHit(i),this._updateLastInbandItemToBuffering(),this._assetData.adData(null),this._assetData.type(_.TYPE_MAIN_CONTENT),this._updateReportingInterval(this._reportingInterval,!1)}},r.prototype._onApiAdSkip=function(e){this._logger.debug(b,"#_onApiAdSkip()");var t=e.data;if(this._checkCall("_onApiAdSkip")&&this._inputDataValidator.validateFields(t,["playhead"])){if(this._assetData.type()!=_.TYPE_AD)return void this._logger.warn(b,"#_onApiAdSkip() > Ignoring the ad skip event, because we are no longer in an ad.");this._updateQoSInfo(t);var i=new y(this,u.EVENT_TYPE_SKIP,t.playhead,null,t._eventData[N]);this._sendHit(i),this._updateLastInbandItemToBuffering(),this._assetData.adData(null),this._assetData.type(_.TYPE_MAIN_CONTENT),this._updateReportingInterval(this._reportingInterval,!1)}},r.prototype._onApiChapterStart=function(e){var t=e.data;if(this._logger.debug(b,"#_onApiChapterStart(name="+t.chapterName+", length="+t.chapterLength+", position="+t.chapterPosition+", chapter_offset="+t.chapterOffset+")"),this._checkCall("_onApiChapterStart")&&this._inputDataValidator.validateFields(t,["playhead","chapterPosition","chapterOffset","chapterLength"])){var i=new v;i.id(n(this._assetData.videoId())+"_"+t.chapterPosition),i.name(t.chapterName),i.length(t.chapterLength),i.position(t.chapterPosition),i.offset(t.chapterOffset),i.sid(this._generateSessionId()),this._assetData.chapterData(i),this._updateQoSInfo(t);var a=s.merge(t.metaVideo,t.metaChapter),r=new y(this,u.EVENT_TYPE_CHAPTER_START,t.playhead,a,t._eventData[N]);r.assetData.adData(null),r.assetData.type(_.TYPE_MAIN_CONTENT),this._sendHit(r)}},r.prototype._onApiChapterComplete=function(e){this._logger.debug(b,"#_onApiChapterComplete()");var t=e.data;if(this._checkCall("_onApiChapterComplete")&&this._inputDataValidator.validateFields(t,["playhead"])){if(!this._assetData.chapterData())return void this._logger.warn(b,"#_onApiChapterComplete() > Ignoring the chapter complete event, because we are no longer in a chapter.");this._updateQoSInfo(t);var i=new y(this,u.EVENT_TYPE_CHAPTER_COMPLETE,t.playhead,null,t._eventData[N]);i.assetData.adData(null),i.assetData.type(_.TYPE_MAIN_CONTENT),this._sendHit(i),this._assetData.chapterData(null)}},r.prototype._onApiChapterSkip=function(e){this._logger.debug(b,"#_onApiChapterSkip()");var t=e.data;if(this._checkCall("_onApiChapterSkip")&&this._inputDataValidator.validateFields(t,["playhead"])){if(!this._assetData.chapterData())return void this._logger.warn(b,"#_onApiChapterSkip() > Ignoring the chapter skip event, because we are no longer in a chapter.");this._updateQoSInfo(t);var i=new y(this,u.EVENT_TYPE_CHAPTER_SKIP,t.playhead,null,t._eventData[N]);i.assetData.adData(null),i.assetData.type(_.TYPE_MAIN_CONTENT),this._sendHit(i),this._assetData.chapterData(null)}},r.prototype._onApiBitrateChange=function(e){this._logger.debug(b,"#_onApiBitrateChange()");var t=e.data;if(this._checkCall("_onApiBitrateChange")&&this._inputDataValidator.validateFields(t,["playhead"])){this._updateQoSInfo(t);var i=new y(this,u.EVENT_TYPE_BITRATE_CHANGE,t.playhead,null,t._eventData[N]);this._sendHit(i)}},r.prototype._onApiTrackError=function(e){var t=e.data;if(this._logger.debug(b,"#_onApiTrackError(source="+t._eventData.source+", err_id="+t._eventData.error_id+")"),this._isTrackingSessionActive){if(this._trackExternalErrors||t._eventData.source===T){this._updateQoSInfo(t);var i=new y(this,u.EVENT_TYPE_ERROR,0,null,t._eventData[N]);i.eventData.id(t._eventData.error_id),i.eventData.source(t._eventData.source),this._sendHit(i)}}else this._logger.warn(b,"#_onApiTrackError() > No active tracking session.")},r.prototype._onApiTrackInternalError=function(e){var t=e.data;this._logger.debug(b,"#_onApiTrackInternalError(source="+t.source+", err_id="+t.error_id+")"),this._updateQoSInfo(t);var i=new y(this,u.EVENT_TYPE_ERROR,0);i.eventData.id(t.error_id),i.eventData.source(t.source),this._sendHit(i)},r.prototype._onApiQuantumEnd=function(e){this._logger.debug(b,"#_onApiQuantumEnd(interval="+this._channel.request(P)+")");var t=e.data;if(this._checkCall("_onApiQuantumEnd")&&this._inputDataValidator.validateFields(t,["playhead"])){var i=this._lastInBandItem;if(i){this._updateQoSInfo(t);var a=new y(this,i.eventData.type(),t.playhead,i.meta,i.callback);a.filterReport=i.filterReport,this._sendHit(a,!0)}}},r.prototype._onNetworkCheckStatusComplete=function(e){var t=e.data;this._trackExternalErrors=t[R],this._reportingInterval=t[B],this._reportingInterval||(this._reportingInterval=pe),this._logger.debug(b,"#_onNetworkCheckStatusComplete(track_ext_err="+this._trackExternalErrors+")")},r.prototype._onResetSessionId=function(e){var t=this._generateSessionId();this._sessionData=new l,this._sessionData.sessionId(t),this._logger.debug(b,"#_resetSessionId(new sessionId="+t+")")},r.prototype._installEventListeners=function(){this._channel.on(L,this._onApiAnalyticsStart,this),this._channel.on(F,this._onApiAnalyticsAdStart,this),this._channel.on(Y,this._onApiVideoLoad,this),this._channel.on(x,this._onApiVideoUnload,this),this._channel.on(j,this._onApiVideoStart,this),this._channel.on(q,this._onApiVideoComplete,this),this._channel.on(H,this._onApiVideoSkip,this),this._channel.on(K,this._onApiVideoResume,this),this._channel.on(U,this._onApiVideoSessionEnd,this),this._channel.on(W,this._onApiAdBreakStart,this),this._channel.on(Q,this._onApiAdBreakComplete,this),this._channel.on(z,this._onApiAdStart,this),this._channel.on(G,this._onApiAdComplete,this),this._channel.on(X,this._onApiAdSkip,this),this._channel.on(Z,this._onApiPlay,this),this._channel.on(J,this._onApiPause,this),this._channel.on($,this._onApiBufferStart,this),this._channel.on(ee,this._onApiChapterStart,this),this._channel.on(te,this._onApiChapterComplete,this),this._channel.on(ie,this._onApiChapterSkip,this),this._channel.on(ne,this._onApiBitrateChange,this),this._channel.on(ae,this._onApiTrackError,this),this._channel.on(re,this._onApiTrackInternalError,this),this._channel.on(se,this._onApiQuantumEnd,this),this._channel.on(le,this._onNetworkCheckStatusComplete,this),this._channel.on(D,this._onResetSessionId,this),this._channel.reply(w,(function(){return this._sessionData&&this._sessionData.sessionId()?this._sessionData.sessionId():null}),this)},r.prototype._uninstallEventListeners=function(){this._channel.off(null,null,this)},r.prototype._resetInternalState=function(){this._logger.debug(b,"#_resetInternalState()"),this._isTrackingSessionActive=!1,this._isVideoComplete=!1,this._autoComputedStartupTime=0,this._lastInBandItem=null,this._stashedLastInBandItem=null,this._streamData=new g,this._qosData=new f,this._sessionData=new l,this._assetData=new _,this._cuserData=null},r.prototype._generateSessionId=function(){return""+(new Date).getTime()+Math.floor(1e9*Math.random())},r.prototype._updateQoSInfo=function(e){this._qosData.bitrate(e.bitrate||0),this._qosData.fps(e.fps||0),this._qosData.droppedFrames(e.droppedFrames||0),null==e.startupTime||isNaN(e.startupTime)?(this._qosData.startupTime(this._autoComputedStartupTime),this._qosData.isStartupTimeOverridden=!1):(this._qosData.startupTime(e.startupTime),this._qosData.isStartupTimeOverridden=!0)},r.prototype._checkCall=function(e){return this._isTrackingSessionActive?!this._isVideoComplete||"_onApiVideoSessionEnd"===e||(this._logger.warn(b,"#"+e+"() > The video content already completed."),!1):(this._logger.warn(b,"#"+e+"() > No active tracking session."),!1)},r.prototype._updateReportingInterval=function(e,t){var i={};i[V]=!!t,i[B]=e,this._channel.trigger(new o(he,i))},r.prototype._updateLastInBandItem=function(e){var t=this._lastInBandItem,i=(new Date).getTime(),a=t.assetData.type()===_.TYPE_AD||e.assetData.type()===_.TYPE_AD,r=1e3*Math.abs(e.eventData.playhead()-t.eventData.playhead()),n=Math.abs(i-t.eventData.ts()),s=Math.abs(r-n),o=n;o>de?(this._logger.warn(b," Resetting duration in lastInBandItem["+t.assetData.type()+":"+t.eventData.type()+"] call to 0 as calculated duration ("+o+")exceeds 10mins"),o=0):t.eventData.type()==u.EVENT_TYPE_PLAY&&!a&&!this._doNotOverrideEventDuration&&s>ce&&(o=Math.min(r,n),this._logger.warn(b," Resetting duration in lastInBandItem["+t.assetData.type()+":"+t.eventData.type()+"] call to "+o+" as calculated error delta ("+s+")exceeds 2sec")),this._doNotOverrideEventDuration=!1,t.eventData.duration(o),t.eventData.ts(i),t.eventData.playhead(e.eventData.playhead()),t.qosData.startupTime(e.qosData.startupTime()),t.qosData.isStartupTimeOverridden=e.qosData.isStartupTimeOverridden},r.prototype._updateLastInbandItemToBuffering=function(){this._stashedLastInBandItem=this._lastInBandItem;var e=0;null!=this._lastInBandItem&&(this._lastInBandItem.assetData.type()==_.TYPE_MAIN_CONTENT&&this._lastInBandItem.eventData.type()==u.EVENT_TYPE_START&&(this._stashedMainMetadata=this._lastInBandItem.meta),e=this._lastInBandItem.eventData.playhead());var t=new y(this,u.EVENT_TYPE_BUFFER,e,null,null);t.assetData.adData(null),t.assetData.type(_.TYPE_MAIN_CONTENT),this._lastInBandItem=t},r.prototype._restoreLastInbandItem=function(){if(null!=this._stashedLastInBandItem){var e=null;this._stashedLastInBandItem.eventData.type()==u.EVENT_TYPE_START&&(this._lastInBandItem.assetData.type()==_.TYPE_AD?e=this._lastInBandItem.meta:(e=this._stashedMainMetadata,this._stashedMainMetadata=null));var t=new y(this,this._stashedLastInBandItem.eventData.type(),this._stashedLastInBandItem.eventData.playhead(),e,this._stashedLastInBandItem.callback);t.filterReport=this._stashedLastInBandItem.filterReport,this._lastInBandItem=t,this._stashedLastInBandItem=null}},r.prototype._flushLastInbandItem=function(e){if(this._lastInBandItem){this._updateQoSInfo(e);var t=new y(this,this._lastInBandItem.eventData.type(),e.playhead,this._lastInBandItem.meta,this._lastInBandItem.callback);this._sendHit(t,!0)}},r.prototype._createAndSendReport=function(e){var t=this._reportFactory.createReportForItem(e);t.qosData.isStartupTimeOverridden||t.qosData.startupTime(this._autoComputedStartupTime);var i={};if(i[C]=t,this._channel.trigger(new o(oe,i)),t.eventData.type()==u.EVENT_TYPE_START||t.eventData.type()==u.EVENT_TYPE_PLAY||t.eventData.type()==u.EVENT_TYPE_PAUSE||t.eventData.type()==u.EVENT_TYPE_STALL||t.eventData.type()==u.EVENT_TYPE_BUFFER){var a={};a[O]=!0,this._channel.command(k,a)}},r.prototype._sendHit=function(e,t){switch(e.eventData.type()){case u.EVENT_TYPE_START:case u.EVENT_TYPE_PLAY:case u.EVENT_TYPE_PAUSE:case u.EVENT_TYPE_STALL:case u.EVENT_TYPE_BUFFER:this._lastInBandItem?(this._updateLastInBandItem(e),this._lastInBandItem.eventData.type()==u.EVENT_TYPE_START&&this._lastInBandItem.assetData.type()==_.TYPE_MAIN_CONTENT&&(this._autoComputedStartupTime+=this._lastInBandItem.eventData.duration()),this._createAndSendReport(this._lastInBandItem),t&&this._lastInBandItem.eventData.type()==e.eventData.type()||this._createAndSendReport(e)):this._createAndSendReport(e),this._lastInBandItem=e;break;case u.EVENT_TYPE_COMPLETE:case u.EVENT_TYPE_SKIP:if(this._lastInBandItem&&(this._updateLastInBandItem(e),this._createAndSendReport(this._lastInBandItem)),e.eventData.type()!==u.EVENT_TYPE_SKIP&&this._createAndSendReport(e),e.assetData.type()==_.TYPE_MAIN_CONTENT){this._lastInBandItem=null,this._stashedLastInBandItem=null;var i={};i[O]=!0,this._channel.command(S,i)}else e.assetData.type()==_.TYPE_AD&&(this._lastInBandItem.assetData.adData(null),this._lastInBandItem.assetData.type(_.TYPE_MAIN_CONTENT),this._doNotOverrideEventDuration=!0);break;case u.EVENT_TYPE_CHAPTER_START:case u.EVENT_TYPE_CHAPTER_COMPLETE:case u.EVENT_TYPE_CHAPTER_SKIP:this._lastInBandItem&&(this._updateLastInBandItem(e),this._createAndSendReport(this._lastInBandItem)),e.eventData.type()!==u.EVENT_TYPE_CHAPTER_SKIP&&this._createAndSendReport(e),this._lastInBandItem&&(this._lastInBandItem.assetData.chapterData(e.eventData.type()==u.EVENT_TYPE_CHAPTER_START?new v(e.assetData.chapterData()):null),this._lastInBandItem.eventData.duration(0),this._createAndSendReport(this._lastInBandItem));break;default:this._createAndSendReport(e)}};var b="ah::Context",T="sourceErrorSDK",A="error",k="clock:reporting.resume",S="clock:reporting.pause",P="reporting_interval",w="session_id",D="reset_session_id",N="callback",M="filter_report",C="report",O="reset",R="track_external_errors",B="reporting_interval",V="do_not_override_interval",L="api:aa_start",F="api:aa_ad_start",Y="api:video_load",x="api:video_unload",j="api:video_start",q="api:video_complete",H="api:video_skip",K="api:video_resume",U="api:video_session_end",W="api:adbreak_start",Q="api:adbreak_complete",z="api:ad_start",G="api:ad_complete",X="api:ad_skip",Z="api:play",J="api:pause",$="api:buffer_start",ee="api:chapter_start",te="api:chapter_complete",ie="api:chapter_skip",ae="api:track_error",re="api:track_internal_error",ne="api:bitrate_change",se="api:quantum_end",oe="context:report_available",le="net:check_status_complete",he="reporting:update_interval",de=6e5,ce=2e3,pe=10;a.context.Context=r}(e.ADB.core,e.ADB.va,e.ADB.va.utils,t),function(e){"use strict";var t="unknown";e.AdobeHeartbeatPluginConfig=function(e,i){this.trackingServer=e,this.publisher=i,this.ssl=!1,this.ovp=t,this.sdk=t,this.quietMode=!1,this.debugLogging=!1,this.__isPrimetime=!1,this.__psdkVersion=null}}(t),function(e){"use strict";function t(){}t.prototype.onError=function(e){},t.prototype.onTrackingDisabled=function(){},e.AdobeHeartbeatPluginDelegate=t}(t),function(e,t,i){"use strict";function a(e){a.__super__.constructor.call(this,f),this._radio=new l(this._logger),this._channel=this._radio.channel(A),this._delegate=e,this._context=new c(this._channel,this._logger),this._filter=new p(this._channel,this._logger),this._network=new u(this._channel,this._logger),this._setupDataResolver()}var r=e.Event,n=e.Trigger,s=e.plugin.BasePlugin,o=e.plugin.ParamMapping,l=e.radio.Radio,h=t.ErrorInfo,d=t.Version,c=i.context.Context,p=i.filter.ReportFilter,u=i.network.Network,_=i.clock.Clock,g=i.AdobeHeartbeatPluginConfig;e.extend(a,s),a.prototype.configure=function(e){if(!e)throw new Error("Reference to the configuration data cannot be NULL.");if(!(e instanceof g))throw new Error("Expected config data to be instance of AdobeHeartbeatPluginConfig.");this._config=e,this._config.debugLogging?this._logger.enable():this._logger.disable(),this._logger.debug(this._logTag,"#configure({trackingServer="+this._config.trackingServer+", publisher="+this._config.publisher+", quietMode="+this._config.quietMode+", ssl="+this._config.ssl+"})");var t=this._config.trackingServer+"/settings/",i={};i[oe]=this._config.trackingServer,i[le]=t,i[he]=this._config.publisher,i[de]=this._config.quietMode,i[ce]=this._config.ssl,this._channel.trigger(new r(fe,i)),this._isConfigured=!0},a.prototype.bootstrap=function(e){a.__super__.bootstrap.call(this,e),this._channel.on(k,this._onError,this),this._clock=new _(this._pluginManager,this._channel,this._logger),this._channel.command(je),this._channel.trigger(new r(ze)),this._channel.on(ue,this._onCheckStatusComplete,this),this._registerCommands(),this._registerBehaviours()},a.prototype._teardown=function(){this._logger.debug(this._logTag,"#_teardown()"),this._radio.shutdown(),this._context.destroy(),this._clock.destroy(),this._filter.destroy(),this._network.destroy()},a.prototype._canProcess=function(){return this._isConfigured?this._errorInfo?(this._logger.error(this._logTag,"_canProcess() > Plugin in ERROR state."),!1):a.__super__._canProcess.call(this):(this._logger.error(this._logTag,"_canProcess() > Plugin not configured."),!1)},a.prototype._cmdAnalyticsError=function(e){this._errorInfo||(this._errorInfo=new h("Internal error","AdobeAnalyticsPlugin is in ERROR state."),this._trigger(k,this._errorInfo),this._delegate&&this._delegate.onError(this._errorInfo))},a.prototype._cmdAnalyticsStart=function(e){this._canProcess()&&this._channel.trigger(new r(_e,e))},a.prototype._cmdAnalyticsAdStart=function(e){this._canProcess()&&this._channel.trigger(new r(ge,e))},a.prototype._cmdVideoLoad=function(e){this._errorInfo=null,this._canProcess()&&(this._isTrackingSessionActive&&this._channel.trigger(new r(ve,e)),this._isTrackingSessionActive=!1,this._isPaused=!0,this._isSeeking=!1,this._isBuffering=!1,this._isVideoIdle=!1,this._filter.clear(),this._channel.trigger(new r(me,e)),this._isTrackingSessionActive=!0)},a.prototype._cmdVideoUnload=function(e){this._errorInfo=null,this._canProcess()&&(this._channel.trigger(new r(ve,e)),this._filter.flush(),this._runReportingTimer(!1),this._runFlushFilterTimer(!1),this._runIdleTimer(!1),this._isTrackingSessionActive=!1)},a.prototype._cmdBeginReporting=function(e){this._canProcess()&&this._channel.trigger(new r(Ye,{}))},a.prototype._cmdVideoSessionEnd=function(e){this._canProcess()&&this._channel.trigger(new r(Te,e))},a.prototype._cmdVideoStart=function(e){this._canProcess()&&(this._channel.trigger(new r(ye,e)),this._filter.flush())},a.prototype._cmdVideoComplete=function(e){this._canProcess()&&this._channel.trigger(new r(Ie,e))},a.prototype._cmdVideoSkip=function(e){this._canProcess()&&this._channel.trigger(new r(Ee,e))},a.prototype._cmdVideoResume=function(e){this._canProcess()&&this._channel.trigger(new r(be,e))},a.prototype._cmdPlay=function(e){this._canProcess()&&(this._isPaused=!1,this._resumePlaybackIfPossible(e))},a.prototype._cmdPause=function(e){this._canProcess()&&(this._channel.trigger(new r(Ne,e)),this._isPaused=!0,this._runIdleTimer(!0))},a.prototype._cmdAdBreakStart=function(e){this._canProcess()&&this._channel.trigger(new r(Ae,e))},a.prototype._cmdAdBreakComplete=function(e){this._canProcess()&&(this._channel.trigger(new r(ke,e)),this._resumePlaybackIfPossible(e))},a.prototype._cmdAdStart=function(e){this._canProcess()&&(this._channel.trigger(new r(Se,e)),this._resumePlaybackIfPossible(e))},a.prototype._cmdAdComplete=function(e){this._canProcess()&&this._channel.trigger(new r(Pe,e))},a.prototype._cmdAdSkip=function(e){this._canProcess()&&this._channel.trigger(new r(we,e))},a.prototype._cmdBufferStart=function(e){this._canProcess()&&(this._channel.trigger(new r(Me,e)),this._isBuffering=!0,this._runIdleTimer(!0))},a.prototype._cmdBufferComplete=function(e){this._canProcess()&&(this._isBuffering=!1,this._isPaused?this._channel.trigger(new r(Ne,e)):this._resumePlaybackIfPossible(e))},a.prototype._cmdSeekStart=function(e){this._canProcess()&&(this._channel.trigger(new r(Ne,e)),this._isSeeking=!0,this._runIdleTimer(!0))},a.prototype._cmdSeekComplete=function(e){this._canProcess()&&(this._isSeeking=!1,this._resumePlaybackIfPossible(e))},a.prototype._cmdChapterStart=function(e){this._canProcess()&&this._channel.trigger(new r(Ce,e))},a.prototype._cmdChapterComplete=function(e){this._canProcess()&&this._channel.trigger(new r(Oe,e))},a.prototype._cmdChapterSkip=function(e){this._canProcess()&&this._channel.trigger(new r(Re,e))},a.prototype._cmdBitrateChange=function(e){this._canProcess()&&this._channel.trigger(new r(Le,e))},a.prototype._cmdTrackError=function(e){this._canProcess()&&this._channel.trigger(new r(Be,e))},a.prototype._cmdClockReportingTick=function(e){this._canProcess()&&this._channel.trigger(new r(Fe,e))},a.prototype._onCheckStatusComplete=function(e){if(this._canProcess()){var t=!1;e&&e.data&&e.data[pe]&&(t=e.data[pe]),this._logger.debug(this._logTag,"#_onCheckStatusComplete(trackingDisabled="+t+")"),t&&this._delegate&&this._delegate.onTrackingDisabled()}},a.prototype._cmdIdleTick=function(e){this._canProcess()&&(this._isVideoIdle=!0,this._trigger(ee),this._channel.trigger(new r(Te,e)),this._filter.flush(),this._runReportingTimer(!1),this._runFlushFilterTimer(!1),this._runIdleTimer(!1),this._trigger(J))},a.prototype._onError=function(e){this._errorInfo=e.data;var t={};t[ne]=xe,t[se]=this._errorInfo.getMessage()+"|"+this._errorInfo.getDetails(),this._channel.trigger(new r(Ve,t)),this._runReportingTimer(!1),this._trigger(k,this._errorInfo),this._delegate&&this._delegate.onError(this._errorInfo)},a.prototype._runIdleTimer=function(e){var t={};t[re]=!0,e?this._channel.command(We,t):this._channel.command(Qe,t)},a.prototype._runFlushFilterTimer=function(e){var t={};t[re]=!0,e?this._channel.command(Ke,t):this._channel.command(Ue,t)},a.prototype._runReportingTimer=function(e){var t={};t[re]=!0,e?this._channel.command(qe,t):this._channel.command(He,t)},a.prototype._registerCommands=function(){this._pluginManager.comply(this,"handleAnalyticsError",this._cmdAnalyticsError),this._pluginManager.comply(this,"handleAnalyticsStart",this._cmdAnalyticsStart),this._pluginManager.comply(this,"handleAnalyticsAdStart",this._cmdAnalyticsAdStart),this._pluginManager.comply(this,"handleVideoLoad",this._cmdVideoLoad),this._pluginManager.comply(this,"handleVideoUnload",this._cmdVideoUnload),this._pluginManager.comply(this,"handleBeginReporting",this._cmdBeginReporting),this._pluginManager.comply(this,"handleVideoSessionEnd",this._cmdVideoSessionEnd),this._pluginManager.comply(this,"handleVideoStart",this._cmdVideoStart),this._pluginManager.comply(this,"handleVideoComplete",this._cmdVideoComplete),this._pluginManager.comply(this,"handleVideoSkip",this._cmdVideoSkip),this._pluginManager.comply(this,"handleVideoResume",this._cmdVideoResume),this._pluginManager.comply(this,"handlePlay",this._cmdPlay),this._pluginManager.comply(this,"handlePause",this._cmdPause),this._pluginManager.comply(this,"handleAdBreakStart",this._cmdAdBreakStart),this._pluginManager.comply(this,"handleAdBreakComplete",this._cmdAdBreakComplete),this._pluginManager.comply(this,"handleAdStart",this._cmdAdStart),this._pluginManager.comply(this,"handleAdComplete",this._cmdAdComplete),this._pluginManager.comply(this,"handleAdSkip",this._cmdAdSkip),this._pluginManager.comply(this,"handleBufferStart",this._cmdBufferStart),this._pluginManager.comply(this,"handleBufferComplete",this._cmdBufferComplete),this._pluginManager.comply(this,"handleSeekStart",this._cmdSeekStart),this._pluginManager.comply(this,"handleSeekComplete",this._cmdSeekComplete),this._pluginManager.comply(this,"handleChapterStart",this._cmdChapterStart),this._pluginManager.comply(this,"handleChapterComplete",this._cmdChapterComplete),this._pluginManager.comply(this,"handleChapterSkip",this._cmdChapterSkip),this._pluginManager.comply(this,"handleBitrateChange",this._cmdBitrateChange),this._pluginManager.comply(this,"handleTrackError",this._cmdTrackError),this._pluginManager.comply(this,"handleClockReportingTick",this._cmdClockReportingTick),this._pluginManager.comply(this,"handleIdleTick",this._cmdIdleTick)},a.prototype._registerBehaviours=function(){this._pluginManager.registerBehaviour(new n(y,w),this,"handleVideoLoad",[new o(v,"rsid","rsid"),new o(v,"tracking_server","trackingServer")]),this._pluginManager.registerBehaviour(new n(y,D),this,"handleVideoUnload"),this._pluginManager.registerBehaviour(new n(y,te),this,"handleBeginReporting"),this._pluginManager.registerBehaviour(new n(y,N),this,"handleVideoSessionEnd",[new o(y,"video.playhead","playhead")]),this._pluginManager.registerBehaviour(new n(y,M),this,"handleVideoStart",[new o(y,"video.id","videoId"),new o(y,"video.name","videoName"),new o(y,"video.length","videoLength"),new o(y,"video.playhead","playhead"),new o(y,"video.playerName","playerName"),new o(y,"video.streamType","streamType"),new o(y,"qos.fps","fps"),new o(y,"qos.droppedFrames","droppedFrames"),new o(y,"qos.bitrate","bitrate"),new o(y,"qos.startupTime","startupTime"),new o(v,"rsid","rsid"),new o(v,"tracking_server","trackingServer"),new o(v,"channel","channel"),new o(v,"meta.video.*","metaVideo"),new o(v,"ssl","useSsl"),new o(I,"meta","metaNielsen"),new o(m,"publisher","publisher"),new o(m,"sdk","sdk"),new o(m,"ovp","ovp"),new o(m,"version","version"),new o(m,"api_level","apiLvl")]),this._pluginManager.registerBehaviour(new n(y,O),this,"handleVideoComplete",[new o(y,"qos.fps","fps"),new o(y,"qos.droppedFrames","droppedFrames"),new o(y,"qos.bitrate","bitrate"),new o(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new n(y,R),this,"handleVideoSkip",[new o(y,"video.playhead","playhead"),new o(y,"qos.fps","fps"),new o(y,"qos.droppedFrames","droppedFrames"),new o(y,"qos.bitrate","bitrate"),new o(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new n(y,C),this,"handleVideoResume",[new o(y,"video.id","videoId"),new o(y,"video.name","videoName"),new o(y,"video.length","videoLength"),new o(y,"video.playhead","playhead"),new o(y,"video.playerName","playerName"),new o(y,"video.streamType","streamType")]),this._pluginManager.registerBehaviour(new n(y,B),this,"handlePlay",[new o(y,"video.playhead","playhead"),new o(y,"qos.fps","fps"),new o(y,"qos.droppedFrames","droppedFrames"),new o(y,"qos.bitrate","bitrate"),new o(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new n(y,V),this,"handlePause",[new o(y,"video.playhead","playhead"),new o(y,"video.playheadStalled","playheadStalled"),new o(y,"qos.fps","fps"),new o(y,"qos.droppedFrames","droppedFrames"),new o(y,"qos.bitrate","bitrate"),new o(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new n(y,F),this,"handleAdBreakStart",[new o(y,"ad.isInAdBreak","isInAdBreak"),new o(y,"video.playhead","playhead"),new o(y,"qos.fps","fps"),new o(y,"qos.droppedFrames","droppedFrames"),new o(y,"qos.bitrate","bitrate"),new o(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new n(y,Y),this,"handleAdBreakComplete",[new o(y,"ad.isInAdBreak","isInAdBreak"),new o(y,"video.playhead","playhead"),new o(y,"qos.fps","fps"),new o(y,"qos.droppedFrames","droppedFrames"),new o(y,"qos.bitrate","bitrate"),new o(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new n(y,x),this,"handleAdStart",[new o(y,"video.playhead","playhead"),new o(y,"ad.id","adId"),new o(y,"ad.name","adName"),new o(y,"ad.length","adLength"),new o(y,"ad.position","adPosition"),new o(y,"ad.granularTracking","adGranularTracking"),new o(y,"ad.trackingInterval","adTrackingInterval"),new o(y,"pod.name","podName"),new o(y,"pod.playerName","podPlayerName"),new o(y,"pod.position","podPosition"),new o(y,"pod.startTime","podSecond"),new o(y,"qos.fps","fps"),new o(y,"qos.droppedFrames","droppedFrames"),new o(y,"qos.bitrate","bitrate"),new o(y,"qos.startupTime","startupTime"),new o(v,"meta.video.*","metaVideo"),new o(v,"meta.ad.*","metaAd"),new o(I,"meta","metaNielsen"),new o(I,"metaAd","metaAdNielsen")]),this._pluginManager.registerBehaviour(new n(y,j),this,"handleAdComplete",[new o(y,"video.playhead","playhead"),new o(y,"ad.isInAdBreak","isInAdBreak"),new o(y,"qos.fps","fps"),new o(y,"qos.droppedFrames","droppedFrames"),new o(y,"qos.bitrate","bitrate"),new o(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new n(y,q),this,"handleAdSkip",[new o(y,"video.playhead","playhead"),new o(y,"ad.isInAdBreak","isInAdBreak"),new o(y,"qos.fps","fps"),new o(y,"qos.droppedFrames","droppedFrames"),new o(y,"qos.bitrate","bitrate"),new o(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new n(y,H),this,"handleBufferStart",[new o(y,"video.playhead","playhead"),new o(y,"qos.fps","fps"),new o(y,"qos.droppedFrames","droppedFrames"),new o(y,"qos.bitrate","bitrate"),new o(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new n(y,K),this,"handleBufferComplete",[new o(y,"video.playhead","playhead"),new o(y,"video.playheadStalled","playheadStalled"),new o(y,"qos.fps","fps"),new o(y,"qos.droppedFrames","droppedFrames"),new o(y,"qos.bitrate","bitrate"),new o(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new n(y,U),this,"handleSeekStart",[new o(y,"video.playhead","playhead")]),this._pluginManager.registerBehaviour(new n(y,W),this,"handleSeekComplete",[new o(y,"video.playhead","playhead"),new o(y,"ad.isInAd","isInAd"),new o(y,"ad.id","adId"),new o(y,"ad.position","adPosition"),new o(y,"pod.playerName","podPlayerName"),new o(y,"pod.position","podPosition"),new o(y,"chapter.isInChapter","isInChapter"),new o(y,"chapter.position","chapterPosition"),new o(y,"chapter.name","chapterName"),new o(y,"chapter.length","chapterLength"),new o(y,"chapter.startTime","chapterOffset"),new o(y,"qos.fps","fps"),new o(y,"qos.droppedFrames","droppedFrames"),new o(y,"qos.bitrate","bitrate"),new o(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new n(y,Q),this,"handleChapterStart",[new o(y,"video.playhead","playhead"),new o(y,"chapter.position","chapterPosition"),new o(y,"chapter.name","chapterName"),new o(y,"chapter.length","chapterLength"),new o(y,"chapter.startTime","chapterOffset"),new o(y,"qos.fps","fps"),new o(y,"qos.droppedFrames","droppedFrames"),new o(y,"qos.bitrate","bitrate"),new o(y,"qos.startupTime","startupTime"),new o(v,"meta.video.*","metaVideo"),new o(v,"meta.chapter.*","metaChapter"),new o(I,"meta","metaNielsen")]),this._pluginManager.registerBehaviour(new n(y,z),this,"handleChapterComplete",[new o(y,"video.playhead","playhead"),new o(y,"qos.fps","fps"),new o(y,"qos.droppedFrames","droppedFrames"),new o(y,"qos.bitrate","bitrate"),new o(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new n(y,G),this,"handleChapterSkip",[new o(y,"video.playhead","playhead"),new o(y,"qos.fps","fps"),new o(y,"qos.droppedFrames","droppedFrames"),new o(y,"qos.bitrate","bitrate"),new o(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new n(y,X),this,"handleBitrateChange",[new o(y,"video.playhead","playhead"),new o(y,"qos.fps","fps"),new o(y,"qos.droppedFrames","droppedFrames"),new o(y,"qos.bitrate","bitrate"),new o(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new n(y,Z),this,"handleTrackError"),this._pluginManager.registerBehaviour(new n(E,ie),this,"handleClockReportingTick",[new o(y,"video.playhead","playhead"),new o(y,"qos.fps","fps"),new o(y,"qos.droppedFrames","droppedFrames"),new o(y,"qos.bitrate","bitrate"),new o(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new n(y,L),this,"handleClockReportingTick",[new o(y,"video.playhead","playhead"),new o(y,"qos.fps","fps"),new o(y,"qos.droppedFrames","droppedFrames"),new o(y,"qos.bitrate","bitrate"),new o(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new n(E,ae),this,"handleIdleTick",[new o(y,"video.playhead","playhead")]),this._pluginManager.registerBehaviour(new n(m,ee),this,"handleClockReportingTick",[new o(y,"video.playhead","playhead"),new o(y,"qos.fps","fps"),new o(y,"qos.droppedFrames","droppedFrames"),new o(y,"qos.bitrate","bitrate"),new o(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new n(v,k),this,"handleAnalyticsError"),this._pluginManager.registerBehaviour(new n(v,S),this,"handleAnalyticsStart",[new o(v,"vid","vid"),new o(v,"aid","aid"),new o(v,"mid","mid"),new o(v,"customerIDs","customerIDs"),new o(v,"blob","blob"),new o(v,"loc_hint","loc_hint"),new o(y,"video.playhead","playhead"),new o(y,"qos.fps","fps"),new o(y,"qos.droppedFrames","droppedFrames"),new o(y,"qos.bitrate","bitrate"),new o(y,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new n(v,P),this,"handleAnalyticsAdStart",[new o(y,"video.playhead","playhead"),new o(y,"qos.fps","fps"),new o(y,"qos.droppedFrames","droppedFrames"),new o(y,"qos.bitrate","bitrate"),new o(y,"qos.startupTime","startupTime")])},a.prototype._setupDataResolver=function(){var e={},t=this;e.version=function(){return d.getVersion()},e.api_level=function(){return d.getApiLevel()},e.tracking_server=function(){return t._config?t._config.trackingServer:null},e.publisher=function(){return t._config?t._config.publisher:null},e.quiet_mode=function(){return!!t._config&&t._config.quietMode},e.ovp=function(){return t._config?t._config.ovp:null},e.sdk=function(){return t._config?t._config.sdk:null},e.is_primetime=function(){return!!t._config&&t._config.__isPrimetime},e.psdk_version=function(){return t._config?t._config.__psdkVersion:null},e.session_id=function(){return t._channel.request(b)},this._dataResolver=function(t){if(!t||0==t.length)return null;for(var i=null,a=0;a<t.length;a++){var r=t[a];(i=i||{})[r]=e.hasOwnProperty(r)?e[r].call(this):null}return i}},a.prototype._resumePlaybackIfPossible=function(e){this._errorInfo||this._isPaused||this._isSeeking||this._isBuffering||(this._isVideoIdle?(this._isVideoIdle=!1,this._resumePlaybackFromIdle()):this._channel.trigger(new r(De,e)),this._runIdleTimer(!1))},a.prototype._resumePlaybackFromIdle=function(){this._trigger(ee),this._filter.clear(),this._channel.trigger(new r(T)),this._trigger($),this._runReportingTimer(!0),this._runFlushFilterTimer(!0)};var f="adobe-heartbeat",m=f,v="adobe-analytics",y="player",I="nielsen",E="service.clock",b="session_id",T="reset_session_id",A="heartbeat-channel",k="error",S="aa_start",P="sc_ad_start",w="video_load",D="video_unload",N="video_session_end",M="video_start",C="video_resume",O="video_complete",R="video_skip",B="play",V="pause",L="content_start",F="adbreak_start",Y="adbreak_complete",x="ad_start",j="ad_complete",q="ad_skip",H="buffer_start",K="buffer_complete",U="seek_start",W="seek_complete",Q="chapter_start",z="chapter_complete",G="chapter_skip",X="bitrate_change",Z="track_error",J="video_idle_start",$="video_idle_resume",ee="quantum_close",te="video_begin_reporting",ie="heartbeat.reporting.tick",ae="heartbeat.idle.tick",re="reset",ne="source",se="error_id",oe="tracking_server",le="check_status_server",he="publisher",de="quiet_mode",ce="ssl",pe="tracking_disabled",ue="net:check_status_complete",_e="api:aa_start",ge="api:aa_ad_start",fe="api:config",me="api:video_load",ve="api:video_unload",ye="api:video_start",Ie="api:video_complete",Ee="api:video_skip",be="api:video_resume",Te="api:video_session_end",Ae="api:adbreak_start",ke="api:adbreak_complete",Se="api:ad_start",Pe="api:ad_complete",we="api:ad_skip",De="api:play",Ne="api:pause",Me="api:buffer_start",Ce="api:chapter_start",Oe="api:chapter_complete",Re="api:chapter_skip",Be="api:track_error",Ve="api:track_internal_error",Le="api:bitrate_change",Fe="api:quantum_end",Ye="api:video_begin_reporting",xe="sourceErrorHeartbeat",je="clock:check_status.resume",qe="clock:reporting.resume",He="clock:reporting.pause",Ke="clock:flush_filter.resume",Ue="clock:flush_filter.pause",We="clock:idle.resume",Qe="clock:idle.pause",ze="clock:check_status.get_settings";i.AdobeHeartbeatPlugin=a}(e.ADB.core,e.ADB.va,t),e.ADB.va.plugins.ah||(e.ADB.va.plugins.ah=t)}(this),function(e){if(void 0===t)var t={};!function(e,t){"use strict";function i(e,t){this._onFail={fn:e,ctx:t}}var a=e.ErrorInfo;i.prototype.validateFields=function(e,t){if(!e)return this._fail("Data cannot be null");if(t)for(var i=0;i<t.length;i++){var a=t[i];switch(a){case"videoId":if(!e.hasOwnProperty("videoId"))return this._fail("The ID for the main video must be specified.");if("string"!=typeof e.videoId)return this._fail("The ID for the main video must be a String.");if(""===e.videoId)return this._fail("The ID for the main video cannot be an empty string.");break;case"mediaType":if(!e.hasOwnProperty("mediaType"))return this._fail("The media type for the main video must be specified.");if("string"!=typeof e.mediaType)return this._fail("The media type for the main video must be a String.");if(""===e.mediaType)return this._fail("The stream type for the main video cannot be an empty string.");break;case"streamType":if(!e.hasOwnProperty("streamType"))return this._fail("The stream type for the main video must be specified.");if("string"!=typeof e.streamType)return this._fail("The stream type for the main video must be a String.");if(""===e.streamType)return this._fail("The stream type for the main video cannot be an empty string.");break;case"playerName":if(!e.hasOwnProperty("playerName"))return this._fail("The player name for the main video must be specified.");if("string"!=typeof e.playerName)return this._fail("The player name for the main video must be a String.");if(""===e.playerName)return this._fail("The player name for the main video cannot be an empty string.");break;case"videoLength":if(!e.hasOwnProperty("videoLength"))return this._fail("The length of the main video must be specified.");if("number"!=typeof e.videoLength)return this._fail("The length of the main video must be a Number.");if(isNaN(e.videoLength))return this._fail("The length of the main video cannot be NaN.");break;case"podPlayerName":if(!e.hasOwnProperty("podPlayerName"))return this._fail("The player name for the ad-break must be specified.");if("string"!=typeof e.podPlayerName)return this._fail("The player name for the ad-break must be a String.");if(""===e.podPlayerName)return this._fail("The player name for the ad-break cannot be an empty string.");break;case"podPosition":if(!e.hasOwnProperty("podPosition"))return this._fail("Position (index) of the ad-break must be specified.");if("number"!=typeof e.podPosition)return this._fail("Position (index) of the ad-break must be a Number.");if(isNaN(e.podPosition))return this._fail("Position (index) of the ad-break cannot be NaN.");break;case"adId":if(!e.hasOwnProperty("adId"))return this._fail("The ad ID must be specified.");if("string"!=typeof e.adId)return this._fail("The ad ID must be a String.");if(""===e.adId)return this._fail("The ad ID cannot be an empty string.");break;case"adPosition":if(!e.hasOwnProperty("adPosition"))return this._fail("Position (index) of the ad must be specified.");if("number"!=typeof e.adPosition)return this._fail("Position (index) of the ad must be a Number.");if(isNaN(e.adPosition))return this._fail("Position (index) of the ad cannot be NaN.");break;case"adLength":if(!e.hasOwnProperty("adLength"))return this._fail("The length of the ad must be specified.");if("number"!=typeof e.adLength)return this._fail("The length of the ad must be a Number.");if(isNaN(e.adLength))return this._fail("The length of the ad cannot be NaN.");break;default:return this._fail("Unable to validate unknown parameter: "+a)}}return!0},i.prototype._fail=function(e){var t=new a("Invalid input data",e);return this._onFail.fn&&this._onFail.fn.call(this._onFail.ctx,t),!1},t.InputDataValidator=i}(e.ADB.va,t),function(e){"use strict";var t="";e.AdobeAnalyticsPluginConfig=function(){this.channel=t,this.debugLogging=!1}}(t),function(e){"use strict";function t(){}t.prototype.onError=function(e){},e.AdobeAnalyticsPluginDelegate=t}(t),function(e,t,i,a){"use strict";function r(e){this._aaPlugin=e}function n(e,t){if(n.__super__.constructor.call(this,v),!e)throw new Error("The reference to the AppMeasurement object cannot be NULL.");if(e.unsupportedBrowser)throw new Error("AppMeasurement is not supported in current browser.");this._appMeasurement=e,this._appMeasurementBridge=new r(this),this._delegate=t,this._videoMetadata={},this._adMetadata={},this._chapterMetadata={},this._errorInfo=null,this._appMeasurementReady=!1,this._beginReporting=!1,this._workQueue=new c(!0,T),this._inputDataValidator=new m((function(e){this._errorInfo=e,this._logger.error(this._logTag,e.getMessage()+" | "+e.getDetails());var t=this;setTimeout((function(){t._trigger(A,e),t._delegate&&t._delegate.onError(t._errorInfo)}),0)}),this),this._appMeasurement.isReadyToTrack(),this._setupDataResolver()}var s=e.Trigger,o=e.plugin.BasePlugin,l=e.plugin.ParamMapping,h=e.radio.Channel,d=e.radio.Command,c=e.radio.CommandQueue,p=t.ErrorInfo,u=i.md5,_=i.StringUtils,g=i.ObjectUtils,f=a.AdobeAnalyticsPluginConfig,m=a.InputDataValidator;r.prototype.onAppMeasurementReady=function(){this._aaPlugin&&this._aaPlugin._onAppMeasurementReady()},r.prototype.release=function(){this._aaPlugin=null},e.extend(n,o),n.prototype.configure=function(e){if(!e)throw new Error("Reference to the configuration data cannot be NULL.");if(!(e instanceof f))throw new Error("Expected config data to be instance of AdobeAnalyticsPluginConfig.");this._config=e,this._config.debugLogging?this._logger.enable():this._logger.disable(),this._logger.debug(this._logTag,"#configure({trackingServer="+this._config.debugLogging+", channel="+this._config.channel+", ssl="+this._appMeasurement.ssl+"})")},n.prototype.bootstrap=function(e){n.__super__.bootstrap.call(this,e),this._registerCommands(),this._registerBehaviours()},n.prototype.setup=function(){this._appMeasurement.isReadyToTrack()?this._onAppMeasurementReady():this._appMeasurement.callbackWhenReadyToTrack(this._appMeasurementBridge,this._appMeasurementBridge.onAppMeasurementReady,[]),n.__super__.setup.call(this)},n.prototype.setVideoMetadata=function(e){this._videoMetadata=g.clone(e)},n.prototype.setAdMetadata=function(e){this._adMetadata=g.clone(e)},n.prototype.setChapterMetadata=function(e){this._chapterMetadata=g.clone(e)},n.prototype._teardown=function(){this._logger.debug(this._logTag,"#_teardown()"),this._appMeasurementBridge.release()},n.prototype._canProcess=function(){return this._errorInfo?(this._logger.error(this._logTag,"#_canProcess() > In ERROR state."),!1):n.__super__._canProcess.call(this)},n.prototype._cmdVideoLoad=function(e){this._errorInfo=null},n.prototype._cmdBeginReporting=function(e){this._logger.debug(this._logTag,"#_cmdBeginReporting()"),this._beginReporting=!0,this._resumeWorkQueue()},n.prototype._cmdVideoStart=function(e){this._logger.debug(this._logTag,"#_cmdVideoStart()"),this._canProcess()&&this._workQueue.addCommand(new d(this._executeOpen,this,[e]))},n.prototype._cmdAdStart=function(e){this._logger.debug(this._logTag,"#_cmdAdStart()"),this._canProcess()&&this._workQueue.addCommand(new d(this._executeOpenAd,this,[e]))},n.prototype._cmdHeartbeatPluginError=function(e){this._errorInfo||(this._errorInfo=new p("Internal error","HeartbeatPlugin is in ERROR state."),this._trigger(A,this._errorInfo),this._delegate&&this._delegate.onError(this._errorInfo))},n.prototype._track=function(e){try{var t=this._appMeasurement.linkTrackVars;this._appMeasurement.linkTrackVars="",this._appMeasurement.track(e),this._appMeasurement.linkTrackVars=t}catch(e){this._logger.warn(this._logTag,"appMeasurement.track() call threw an exception.")}},n.prototype._executeOpen=function(e){if(this._logger.debug(this._logTag,"#_executeOpen(id="+e.videoId+", videoName="+e.videoName+", mediaType="+e.mediaType+", streamType="+e.streamType+", length="+e.videoLength+", playerName="+e.playerName+", channel="+e.channel+", isPrimetime="+e.isPrimetime+", sessionId="+e.sessionId+")"),this._canProcess()&&this._inputDataValidator.validateFields(e,["videoId","mediaType","streamType","videoLength","playerName"])){var t={};for(var i in e.metaVideo)e.metaVideo.hasOwnProperty(i)&&(t[i]=e.metaVideo[i]);if(e.metaNielsen)for(var i in e.metaNielsen)e.metaNielsen.hasOwnProperty(i)&&(t[i]=e.metaNielsen[i]);t["a.contentType"]=e.streamType,t["a.media.name"]=e.videoId,t["a.media.friendlyName"]=e.videoName||"",t["a.media.length"]=Math.floor(e.videoLength)||"0.0",t["a.media.playerName"]=e.playerName,t["a.media.channel"]=e.channel||"",t["a.media.view"]=!0,t["a.media.vsid"]=e.sessionId;var a={};a.contextData=t,"audio"===e.mediaType?(a.pev3=P,a.ms_a="1"):a.pev3=k,a.pe=e.isPrimetime?N:D,this._track(a);var r=this;setTimeout((function(){r._trigger(O,e)}),0)}},n.prototype._executeOpenAd=function(e){var t=u(e.videoId)+"_"+e.podPosition;if(this._logger.debug(this._logTag,"#_executeOpenAd(id="+e.adId+", mediaType="+e.mediaType+", streamType="+e.streamType+", length="+e.adLength+", podPlayerName="+e.podPlayerName+", parentId="+e.videoId+", podId="+t+", parentPodPosition="+e.adPosition+", podSecond="+e.podSecond+")"),this._canProcess()&&this._inputDataValidator.validateFields(e,["videoId","mediaType","streamType","playerName","adId","adLength","podPlayerName","adPosition"])){e.podSecond=null==e.podSecond||isNaN(e.podSecond)?e.playhead:e.podSecond;var i={};for(a in e.metaVideo)e.metaVideo.hasOwnProperty(a)&&(i[a]=e.metaVideo[a]);for(a in e.metaAd)e.metaAd.hasOwnProperty(a)&&(i[a]=e.metaAd[a]);if(e.metaNielsen)for(var a in e.metaNielsen)e.metaNielsen.hasOwnProperty(a)&&(i[a]=e.metaNielsen[a]);i["a.contentType"]=e.streamType,i["a.media.name"]=e.videoId,i["a.media.playerName"]=e.playerName,i["a.media.channel"]=e.channel||"",i["a.media.vsid"]=e.sessionId,i["a.media.friendlyName"]=e.videoName||"",i["a.media.length"]=Math.floor(e.videoLength)||"0.0",i["a.media.ad.name"]=e.adId,i["a.media.ad.friendlyName"]=e.adName||"",i["a.media.ad.podFriendlyName"]=e.podName||"",i["a.media.ad.length"]=Math.floor(e.adLength)||"0.0",i["a.media.ad.playerName"]=e.podPlayerName,i["a.media.ad.pod"]=t,i["a.media.ad.podPosition"]=Math.floor(e.adPosition)||"0.0",i["a.media.ad.podSecond"]=Math.floor(e.podSecond)||"0.0",i["a.media.ad.view"]=!0;var r={};r.contextData=i,"audio"===e.mediaType?(r.pev3=w,r.ms_a="1"):r.pev3=S,r.pe=e.isPrimetime?C:M,this._track(r);var n=this;setTimeout((function(){n._trigger(R,e)}),0)}},n.prototype._setupDataResolver=function(){var e={},t=this;e.rsid=function(){return t._appMeasurement.account},e.tracking_server=function(){return t._appMeasurement.ssl&&t._appMeasurement.trackingServerSecure?t._appMeasurement.trackingServerSecure:t._appMeasurement.trackingServer},e.ssl=function(){return t._appMeasurement.ssl},e.vid=function(){return t._appMeasurement.visitorID},e.aid=function(){return t._appMeasurement.analyticsVisitorID},e.mid=function(){return t._appMeasurement.marketingCloudVisitorID},e.blob=function(){return t._appMeasurement.audienceManagerBlob},e.loc_hint=function(){return t._appMeasurement.audienceManagerLocationHint?parseInt(t._appMeasurement.audienceManagerLocationHint):""},e.customerIDs=function(){var e={},i=t._appMeasurement.visitor.getCustomerIDs();for(var a in i)if(i.hasOwnProperty(a)){var r=i[a];if("object"==typeof r){for(var n in r)r.hasOwnProperty(n)&&("authState"==n?e[a+".as"]=r[n]:e[a+"."+n]=r[n]);e[a+".as"]||(e[a+".as"]="0")}}return e},e.channel=function(){return t._config?t._config.channel:null},e.meta=function(e){var i=e.split(".");if(i.length<2)return null;var a=i.shift();switch(e=i.join("."),a){case"video":return e==h.WILDCARD?t._videoMetadata:t._videoMetadata[e];case"ad":return e==h.WILDCARD?t._adMetadata:t._adMetadata[e];case"chapter":return e==h.WILDCARD?t._chapterMetadata:t._chapterMetadata[e];default:return null}},this._dataResolver=function(t){if(!t||0==t.length)return null;for(var i=null,a=0;a<t.length;a++){var r=t[a];i=i||{},_.startsWith(r,"meta.")?i[r]=e.meta(r.split("meta.")[1]):i[r]=e.hasOwnProperty(r)?e[r].call(this):null}return i}},n.prototype._registerCommands=function(){this._pluginManager.comply(this,"handleVideoLoad",this._cmdVideoLoad),this._pluginManager.comply(this,"handleBeginReporting",this._cmdBeginReporting),this._pluginManager.comply(this,"handleVideoStart",this._cmdVideoStart),this._pluginManager.comply(this,"handleAdStart",this._cmdAdStart),this._pluginManager.comply(this,"handleHeartbeatPluginError",this._cmdHeartbeatPluginError)},n.prototype._registerBehaviours=function(){this._pluginManager.registerBehaviour(new s(E,B),this,"handleVideoLoad"),this._pluginManager.registerBehaviour(new s(E,F),this,"handleBeginReporting"),this._pluginManager.registerBehaviour(new s(E,V),this,"handleVideoStart",[new l(E,"video.id","videoId"),new l(E,"video.mediaType","mediaType"),new l(E,"video.streamType","streamType"),new l(E,"video.name","videoName"),new l(E,"video.length","videoLength"),new l(E,"video.playerName","playerName"),new l(E,"video.streamType","streamType"),new l(b,"is_primetime","isPrimetime"),new l(b,"session_id","sessionId"),new l(y,"channel","channel"),new l(y,"meta.video.*","metaVideo"),new l(I,"meta","metaNielsen")]),this._pluginManager.registerBehaviour(new s(E,L),this,"handleAdStart",[new l(E,"video.id","videoId"),new l(E,"video.mediaType","mediaType"),new l(E,"video.streamType","streamType"),new l(E,"video.playhead","playhead"),new l(E,"video.playerName","playerName"),new l(E,"video.name","videoName"),new l(E,"video.length","videoLength"),new l(E,"ad.id","adId"),new l(E,"ad.length","adLength"),new l(E,"ad.position","adPosition"),new l(E,"ad.name","adName"),new l(E,"pod.name","podName"),new l(E,"pod.position","podPosition"),new l(E,"pod.playerName","podPlayerName"),new l(E,"pod.startTime","podSecond"),new l(b,"is_primetime","isPrimetime"),new l(b,"session_id","sessionId"),new l(y,"channel","channel"),new l(y,"meta.video.*","metaVideo"),new l(y,"meta.ad.*","metaAd"),new l(I,"meta","metaNielsen")]),this._pluginManager.registerBehaviour(new s(b,A),this,"handleHeartbeatPluginError")},n.prototype._onAppMeasurementReady=function(){this._logger.debug(this._logTag,"#_onAppMeasurementReady"),this._appMeasurementReady=!0,this._resumeWorkQueue()},n.prototype._resumeWorkQueue=function(){this._appMeasurementReady&&this._beginReporting&&(this._logger.debug(this._logTag,"#_resumeWorkQueue"),this._workQueue.resume())};var v="adobe-analytics",y=v,I="nielsen",E="player",b="adobe-heartbeat",T=2e3,A="error",k="video",S="videoAd",P="audio",w="audioAd",D="ms_s",N="msp_s",M="msa_s",C="mspa_s",O="aa_start",R="sc_ad_start",B="video_load",V="video_start",L="ad_start",F="video_begin_reporting";a.AdobeAnalyticsPlugin=n}(e.ADB.core,e.ADB.va,e.ADB.va.utils,t),function(e){"use strict";e.VideoMetadataKeys={SHOW:"a.media.show",SEASON:"a.media.season",EPISODE:"a.media.episode",ASSET_ID:"a.media.asset",GENRE:"a.media.genre",FIRST_AIR_DATE:"a.media.airDate",FIRST_DIGITAL_DATE:"a.media.digitalDate",RATING:"a.media.rating",ORIGINATOR:"a.media.originator",NETWORK:"a.media.network",SHOW_TYPE:"a.media.type",AD_LOAD:"a.media.adLoad",MVPD:"a.media.pass.mvpd",AUTHORIZED:"a.media.pass.auth",DAY_PART:"a.media.dayPart",FEED:"a.media.feed",STREAM_FORMAT:"a.media.format"},e.AudioMetadataKeys={ARTIST:"a.media.artist",ALBUM:"a.media.album",LABEL:"a.media.label",AUTHOR:"a.media.author",STATION:"a.media.station",PUBLISHER:"a.media.publisher"},e.AdMetadataKeys={ADVERTISER:"a.media.ad.advertiser",CAMPAIGN_ID:"a.media.ad.campaign",CREATIVE_ID:"a.media.ad.creative",PLACEMENT_ID:"a.media.ad.placement",SITE_ID:"a.media.ad.site",CREATIVE_URL:"a.media.ad.creativeURL"}}(t),e.ADB.va.plugins.aa||(e.ADB.va.plugins.aa=t)}(this),function(e,t){"use strict";function i(){this._processAction=!0,this._store={}}function a(e){if(!e)throw new Error("Reference to the logger object cannot be NULL");this._logger=e,this._rules=[]}i.prototype.setRuleName=function(e){this._ruleName=e},i.prototype.getRuleName=function(e,t){return this._ruleName},i.prototype.setData=function(e,t){this._store[e]=t},i.prototype.getData=function(e){return this._store[e]},i.prototype.shouldProcessAction=function(){return this._processAction},i.prototype.stopProcessingAction=function(){this._processAction=!1},i.prototype.startProcessingAction=function(){this._processAction=!0},a.createContext=function(){return new i},a.createPredicate=function(e,t,i){return{fn:e,expectedValue:t,msg:i}},a.prototype.registerRule=function(e,t,i,a,r){this._rules.push({name:e,desc:t,preconditions:i,actions:a,scope:r})},a.prototype.registerEnterExitAction=function(e,t){this._enterAction=e,this._exitAction=t},a.prototype._handleFailure=function(e,t){this._logger.error(r,e.desc+" -  "+t.msg)},a.prototype._getRule=function(e){for(var t=0;t<this._rules.length;++t)if(this._rules[t].name===e)return this._rules[t];return null},a.prototype.processRule=function(e,t){var i=!0,n=this._getRule(e);if(n){var s=n.scope;t||(t=a.createContext()),t.setRuleName(e);for(var o=!1,l=0;l<n.preconditions.length;++l){var h=n.preconditions[l];if(o=!!h.fn.call(s,t)!==h.expectedValue){this._handleFailure(n,h);break}}if(o)i=!1;else{for(t.startProcessingAction(),this._enterAction&&this._enterAction.call(s,t),l=0;l<n.actions.length;++l){var d=n.actions[l];if(!t.shouldProcessAction()){this._logger.info(r,"Stopping actions for "+n.desc);break}d.call(s,t)}this._exitAction&&t.shouldProcessAction()&&this._exitAction.call(s,t)}}else this._logger.warn(r,"No registered event found for ruleName "+e),i=!1;return i};var r="RuleEngine";t._RuleEngine=a}((e=this).ADB.core,e.ADB.va),function(e,t){"use strict";function i(e,t,i){this.taskFn=e,this.scope=t,this.interval=i,this.remainingInterval=i}function a(e){if(!e)throw new Error("Reference to the logger object cannot be NULL");this._logger=e,this._tasks=[],this._pausedTasks=[]}i.prototype.elapsedTime=function(e){this.remainingInterval-=e},i.prototype.shouldExecute=function(){return this.remainingInterval<=0},i.prototype.execute=function(){this.taskFn.call(this.scope)},a.prototype._getCurrentTimeInMS=function(){return(new Date).getTime()},a.prototype._runTasksForTime=function(e){var t=[],i=e-this._lastTickTime;this._lastTickTime=e;for(var a=0;a<this._tasks.length;){var r=this._tasks[a];r.elapsedTime(i),r.shouldExecute()?(t.push(r),this._tasks.splice(a,1)):++a}for(this._checkStopTimer(),a=0;a<t.length;++a)t[a].execute()},a.prototype._onTick=function(){var e=this._getCurrentTimeInMS();this._runTasksForTime(e)},a.prototype._startTimer=function(){var e=this;this._timer||(this._logger.info(r,"#startTimer()"),e._lastTickTime=this._getCurrentTimeInMS(),this._timer=window.setInterval((function(){e._onTick()}),n))},a.prototype._stopTimer=function(){this._timer&&(this._logger.info(r,"#stopTimer()"),window.clearInterval(this._timer),this._timer=null)},a.prototype._checkStartTimer=function(){this._tasks.length>0&&this._startTimer()},a.prototype._checkStopTimer=function(){0===this._tasks.length&&this._stopTimer()},a.prototype._removeTask=function(e,t){for(var i=0;i<e.length;++i)if(e[i]===t)return e.splice(i,1),!0;return!1},a.prototype.scheduleTask=function(e,t,a){if(this._logger.info(r,"#scheduleTask()"),!e)throw new Error("Reference to the taskFn cannot be NULL");var n=new i(e,t,a);return this._tasks.push(n),this._checkStartTimer(),n},a.prototype.cancelTask=function(e){this._logger.info(r,"#cancelTask()"),this._removeTask(this._tasks,e),this._checkStopTimer()},a.prototype.pauseTask=function(e){this._logger.info(r,"#pauseTask()"),this._removeTask(this._tasks,e)&&this._pausedTasks.push(e),this._checkStopTimer()},a.prototype.resumeTask=function(e){this._logger.info(r,"#resumeTask()"),this._removeTask(this._pausedTasks,e)&&this._tasks.push(e),this._checkStartTimer()},a.prototype.clearTasks=function(){this._stopTimer(),this._tasks=[],this._pausedTasks=[]};var r="TaskScheduler",n=250;t._TaskScheduler=a}(e.ADB.core,e.ADB.va),function(e){"use strict";function t(){this.trackingServer=void 0,this.channel=void 0,this.ovp=void 0,this.appVersion=void 0,this.playerName=void 0,this.ssl=!1,this.debugLogging=!1}e.MediaHeartbeatConfig=t,e.MediaHeartbeatConfig.sharedInstance=new t}(e.ADB.va),function(e){"use strict";function t(){this.data={}}var i=e.plugins.videoplayer.VideoInfo,a=e.plugins.videoplayer.AdBreakInfo,r=e.plugins.videoplayer.AdInfo,n=e.plugins.videoplayer.ChapterInfo,s=e.plugins.videoplayer.QoSInfo;t.MEDIAINFO_KEY_NAME="a.name",t.MEDIAINFO_KEY_VIDEOID="a.videoId",t.MEDIAINFO_KEY_ADID="a.adId",t.MEDIAINFO_KEY_LENGTH="a.length",t.MEDIAINFO_KEY_PLAYHEAD="a.playhead",t.MEDIAINFO_KEY_MEDIATYPE="a.mediaType",t.MEDIAINFO_KEY_STREAMTYPE="a.streamType",t.MEDIAINFO_KEY_POSITION="a.position",t.MEDIAINFO_KEY_STARTTIME="a.startTime",t.MEDIAINFO_KEY_BITRATE="a.bitrate",t.MEDIAINFO_KEY_FPS="a.fps",t.MEDIAINFO_KEY_DROPPEDFRAMES="a.droppedFrames",t.MEDIAINFO_KEY_STARTUPTIME="a.startupTime",t.MEDIAINFO_KEY_TIMEDMETADATA="a.timedMetadata",t.prototype.setValue=function(e,t){this.data[e]=t},t.prototype.getValue=function(e){return this.data.hasOwnProperty(e)?this.data[e]:null},t.prototype.createVideoInfo=function(){var e=new i;return e.id=null!=this.getValue(t.MEDIAINFO_KEY_VIDEOID)?this.getValue(t.MEDIAINFO_KEY_VIDEOID):"",e.name=null!=this.getValue(t.MEDIAINFO_KEY_NAME)?this.getValue(t.MEDIAINFO_KEY_NAME):"",e.length=null!=this.getValue(t.MEDIAINFO_KEY_LENGTH)?this.getValue(t.MEDIAINFO_KEY_LENGTH):0,e.playhead=null!=this.getValue(t.MEDIAINFO_KEY_PLAYHEAD)?this.getValue(t.MEDIAINFO_KEY_PLAYHEAD):0,e.mediaType=null!=this.getValue(t.MEDIAINFO_KEY_MEDIATYPE)?this.getValue(t.MEDIAINFO_KEY_MEDIATYPE):"",e.streamType=null!=this.getValue(t.MEDIAINFO_KEY_STREAMTYPE)?this.getValue(t.MEDIAINFO_KEY_STREAMTYPE):"",e},t.prototype.createAdBreakInfo=function(){var e=new a;return e.name=null!=this.getValue(t.MEDIAINFO_KEY_NAME)?this.getValue(t.MEDIAINFO_KEY_NAME):"",e.position=null!=this.getValue(t.MEDIAINFO_KEY_POSITION)?this.getValue(t.MEDIAINFO_KEY_POSITION):0,e.startTime=null!=this.getValue(t.MEDIAINFO_KEY_STARTTIME)?this.getValue(t.MEDIAINFO_KEY_STARTTIME):0,e},t.prototype.createAdInfo=function(){var e=new r;return e.id=null!=this.getValue(t.MEDIAINFO_KEY_ADID)?this.getValue(t.MEDIAINFO_KEY_ADID):"",e.name=null!=this.getValue(t.MEDIAINFO_KEY_NAME)?this.getValue(t.MEDIAINFO_KEY_NAME):"",e.length=null!=this.getValue(t.MEDIAINFO_KEY_LENGTH)?this.getValue(t.MEDIAINFO_KEY_LENGTH):0,e.position=null!=this.getValue(t.MEDIAINFO_KEY_POSITION)?this.getValue(t.MEDIAINFO_KEY_POSITION):0,e},t.prototype.createChapterInfo=function(){var e=new n;return e.name=null!=this.getValue(t.MEDIAINFO_KEY_NAME)?this.getValue(t.MEDIAINFO_KEY_NAME):"",e.length=null!=this.getValue(t.MEDIAINFO_KEY_LENGTH)?this.getValue(t.MEDIAINFO_KEY_LENGTH):0,e.startTime=null!=this.getValue(t.MEDIAINFO_KEY_STARTTIME)?this.getValue(t.MEDIAINFO_KEY_STARTTIME):0,e.position=null!=this.getValue(t.MEDIAINFO_KEY_POSITION)?this.getValue(t.MEDIAINFO_KEY_POSITION):0,e},t.prototype.createQoSInfo=function(){var e=new s;return e.bitrate=null!=this.getValue(t.MEDIAINFO_KEY_BITRATE)?this.getValue(t.MEDIAINFO_KEY_BITRATE):0,e.fps=null!=this.getValue(t.MEDIAINFO_KEY_FPS)?this.getValue(t.MEDIAINFO_KEY_FPS):0,e.droppedFrames=null!=this.getValue(t.MEDIAINFO_KEY_DROPPEDFRAMES)?this.getValue(t.MEDIAINFO_KEY_DROPPEDFRAMES):0,e.startupTime=null!=this.getValue(t.MEDIAINFO_KEY_STARTUPTIME)?this.getValue(t.MEDIAINFO_KEY_STARTUPTIME):0,e},t.prototype.isEqual=function(e){if(this===e)return!0;if(!e||"object"!=typeof e||"function"!=typeof e.getValue)return!1;for(var i=[t.MEDIAINFO_KEY_NAME,t.MEDIAINFO_KEY_VIDEOID,t.MEDIAINFO_KEY_ADID,t.MEDIAINFO_KEY_LENGTH,t.MEDIAINFO_KEY_PLAYHEAD,t.MEDIAINFO_KEY_STREAMTYPE,t.MEDIAINFO_KEY_MEDIATYPE,t.MEDIAINFO_KEY_POSITION,t.MEDIAINFO_KEY_STARTTIME,t.MEDIAINFO_KEY_BITRATE,t.MEDIAINFO_KEY_FPS,t.MEDIAINFO_KEY_DROPPEDFRAMES,t.MEDIAINFO_KEY_STARTUPTIME,t.MEDIAINFO_KEY_TIMEDMETADATA],a=0;a<i.length;++a){var r=i[a];if(this.getValue(r)!==e.getValue(r))return!1}return!0},e.MediaObject=t}(e.ADB.va),function(e){"use strict";function t(e,i){if(!i)throw new Error("Visitor instance cannot be NULL");this._visitor=i,this._logger=e,this._status=t.OPT_UNKNOWN,this._optInFetchPermissionsCallback=this._optInFetchPermissionsCallback.bind(this)}var i="PrivacyManager";t.prototype.getStatus=function(){return this._status},t.prototype.configure=function(e){this.reset(),this._callback=e,this._optIn=window.adobe&&window.adobe.optIn?window.adobe.optIn:void 0,this._optIn&&this._optIn.doesOptInApply?(this._logger.info(i,"OptIn service enabled"),this._waitingForOptInCallback=!0,this._optInMediaApproved=!1):this._logger.info(i,"OptIn service does not apply"),this._waitingForVisitorCallback=!0,this._visitorOptOut=!1,this._fetchVisitorOptOut(),this._fetchOptIn(),this._updateStatus()},t.prototype.reset=function(){this._unsubscribeOptIn(),this._status=t.OPT_UNKNOWN,this._callback=null},t.prototype._fetchVisitorOptOut=function(){this._logger.info(i,"Fetching Visitor.isOptedOut");try{var e=this;this._visitor.isOptedOut((function(t){e._logger.info(i,"Visitor.isOptedOut : "+t),e._waitingForVisitorCallback=!1,e._visitorOptOut=t,e._updateStatus()}),void 0,!0)}catch(e){this._logger.warn(i,"Error fetching Visitor.isOptedOut"),this._waitingForVisitorCallback=!1}},t.prototype._fetchOptIn=function(){try{if(!this._optIn||!this._optIn.doesOptInApply)return;this._logger.info(i,"Fetching permissions from OptIn service"),this._optInListenerRegistered||(this._optIn.fetchPermissions(this._optInFetchPermissionsCallback,!0),this._optInListenerRegistered=!0)}catch(e){this._logger.warn(i,"Error fetching permissions from OptIn service"),this._waitingForOptInCallback=!1}},t.prototype._unsubscribeOptIn=function(){try{this._optIn&&this._optInListenerRegistered&&(this._optIn.off("complete",this._optInFetchPermissionsCallback),this._optInListenerRegistered=!1)}catch(e){this._logger.error(i,"Error unsubscribing from OptIn service")}},t.prototype._optInFetchPermissionsCallback=function(){this._waitingForOptInCallback=!1;var e=this._optIn.isApproved(this._optIn.Categories.ECID),t=this._optIn.isApproved(this._optIn.Categories.ANALYTICS),a=void 0===this._optIn.Categories.MEDIA_ANALYTICS||this._optIn.isApproved(this._optIn.Categories.MEDIA_ANALYTICS);this._optInMediaApproved=e&&t&&a,this._logger.info(i,"OptIn fetchPermissions ECID : "+e+" Analytics : "+t+" Media : "+a),this._updateStatus()},t.prototype._updateStatus=function(){if(!(this._waitingForVisitorCallback||this._optIn&&this._optIn.doesOptInApply&&this._waitingForOptInCallback)){var e=this._visitorOptOut||this._optIn&&this._optIn.doesOptInApply&&!this._optInMediaApproved?t.OPT_OUT:t.OPT_IN;if(this._status!==e){this._logger.info(i,"Privacy changed from "+this._status+" to "+e),this._status=e;var a=this;setTimeout((function(){try{a._callback&&a._callback(e)}catch(e){}}),0)}}},t.OPT_OUT="optout",t.OPT_IN="optin",t.OPT_UNKNOWN="optunknown",e._PrivacyManager=t}(e.ADB.va),function(e,t){"use strict";function i(e){i.__super__.constructor.call(this),this._heartbeat=e}function a(e){a.__super__.constructor.call(this),this._heartbeat=e}function r(e){r.__super__.constructor.call(this),this._heartbeat=e}function n(e){n.__super__.constructor.call(this),this._heartbeat=e}e.extend(i,t.plugins.aa.AdobeAnalyticsPluginDelegate),i.prototype.onError=function(e){this._heartbeat&&this._heartbeat._onDelegateError(e)},e.extend(a,t.plugins.ah.AdobeHeartbeatPluginDelegate),a.prototype.onError=function(e){this._heartbeat&&this._heartbeat._onDelegateError(e)},a.prototype.onTrackingDisabled=function(){this._heartbeat&&this._heartbeat._onDelegateTrackingDisabled()},e.extend(r,t.HeartbeatDelegate),r.prototype.onError=function(e){this._heartbeat&&this._heartbeat._onDelegateError(e)},e.extend(n,t.plugins.videoplayer.VideoPlayerPluginDelegate),n.prototype.getVideoInfo=function(){return this._heartbeat&&this._heartbeat._videoInfo?(this._heartbeat._delegate&&(this._heartbeat._videoInfo.playhead=this._heartbeat._delegate.getCurrentPlaybackTime()),this._heartbeat._videoInfo):null},n.prototype.getAdBreakInfo=function(){return this._heartbeat&&this._heartbeat._adBreakInfo?this._heartbeat._adBreakInfo:null},n.prototype.getAdInfo=function(){return this._heartbeat&&this._heartbeat._adInfo?this._heartbeat._adInfo:null},n.prototype.getChapterInfo=function(){return this._heartbeat&&this._heartbeat._chapterInfo?this._heartbeat._chapterInfo:null},n.prototype.getQoSInfo=function(){if(this._heartbeat&&this._heartbeat._delegate&&this._heartbeat._delegate.getQoSObject()){var e=this._heartbeat._delegate.getQoSObject();if(e&&"object"==typeof e&&e.setValue)return e.createQoSInfo()}return null},t._MediaAnalyticsPluginDelegate=i,t._MediaHeartbeatPluginDelegate=a,t._ADBMediaHeartbeatDelegate=r,t._MediaHeartbeatVideoPlayerPluginDelegate=n}(e.ADB.core,e.ADB.va),function(e,t){"use strict";function i(e,a){i.__super__.constructor.call(this),this._heartbeat=e,this._logger=a,this._validator=new t.plugins.nielsen.MetadataValidator(a)}var a="MediaHeartbeatNielsenPluginDelegate",r={NielsenContentMetadata:"media_nielsen_content_metadata",NielsenChannelMetadata:"media_nielsen_channel_metadata",NielsenAdMetadata:"media_nielsen_ad_metadata"};t.plugins.nielsen&&e.extend(i,t.plugins.nielsen.NielsenPluginDelegate),i.prototype.getMetadataInfo=function(){if(this._heartbeat&&this._heartbeat._currentMediaObject){var e=this._heartbeat._currentMediaObject.getValue(r.NielsenContentMetadata);if(e&&"object"==typeof e)return this._validator.validateContentMetadata(e,"MediaHeartbeat.NielsenContentMetadataKeys"),e;this._logger.warn(a,"We expect a valid object for MediaHeartbeat.MediaObjectKey.NielsenContentMetadata in MediaObject")}return null},i.prototype.getAdMetadataInfo=function(){if(this._heartbeat&&this._heartbeat._currentAdObject){var e=this._heartbeat._currentAdObject.getValue(r.NielsenAdMetadata);if(e&&"object"==typeof e)return this._validator.validateAdMetadata(e,"MediaHeartbeat.NielsenAdMetadataKeys"),e;this._logger.warn(a,"We expect a valid object for MediaHeartbeat.MediaObjectKey.NielsenAdMetadata in MediaObject")}return null},i.prototype.getChannelInfo=function(){if(this._heartbeat&&this._heartbeat._currentMediaObject){var e=this._heartbeat._currentMediaObject.getValue(r.NielsenChannelMetadata);if(e&&"object"==typeof e)return this._validator.validateChannelMetadata(e,"MediaHeartbeat.NielsenChannelMetadataKeys"),e;this._logger.warn(a,"We expect a valid object for MediaHeartbeat.MediaObjectKey.NielsenChannelMetadata in MediaObject")}return null},i.prototype.onError=function(e){this._heartbeat&&this._heartbeat._onDelegateError(e)},t.plugins.nielsen&&(t._NielsenObjectKey=r,t._NielsenPluginDelegate=i)}(e.ADB.core,e.ADB.va),function(t,i){"use strict";function a(){}function r(t,a,r){if(this._appMeasurement=r||e.s,!this._appMeasurement)throw new Error("MediaHeartbeat needs a valid AppMeasurement instance.");if(!this._appMeasurement.visitor||!this._appMeasurement.visitor.marketingCloudOrgID)throw new Error("MediaHeartbeat needs a valid visitor instance with marketingCloudOrgId set.");if(!t)throw new Error("MediaHeartbeat needs a valid delegate object.");if(!a||"object"!=typeof a||!a.trackingServer)throw new Error("MediaHeartbeat needs a valid config object with trackingServer set.");this._config=a,this._delegate=t,this._debugLogging=i.MediaHeartbeat._debugLogging||this._config.debugLogging,this._logger=new n,this._debugLogging?this._logger.enable():this._logger.disable(),this._ruleEngine=new y(this._logger),this._taskScheduler=new I(this._logger),this._privacyManager=new E(this._logger,this._appMeasurement.visitor),this._resetState(),this._setupRules()}var n=t.Logger,s=i.MediaObject,o=i.Heartbeat,l=i.HeartbeatConfig,h=i._ADBMediaHeartbeatDelegate,d=i.plugins.videoplayer.VideoPlayerPlugin,c=i.plugins.videoplayer.VideoPlayerPluginConfig,p=i._MediaHeartbeatVideoPlayerPluginDelegate,u=i.plugins.aa.AdobeAnalyticsPlugin,_=i.plugins.aa.AdobeAnalyticsPluginConfig,g=i._MediaAnalyticsPluginDelegate,f=i.plugins.ah.AdobeHeartbeatPlugin,m=i.plugins.ah.AdobeHeartbeatPluginConfig,v=i._MediaHeartbeatPluginDelegate,y=i._RuleEngine,I=i._TaskScheduler,E=i._PrivacyManager,b=i.utils.ObjectUtils,T=i.utils.VersionUtils;if(a.prototype.getCurrentPlaybackTime=function(){return null},a.prototype.getQoSObject=function(){return null},r.MediaType={Video:"video",Audio:"audio"},r.Event={AdBreakStart:"adBreakStart",AdBreakComplete:"adBreakComplete",AdStart:"adStart",AdComplete:"adComplete",AdSkip:"adSkip",ChapterStart:"chapterStart",ChapterComplete:"chapterComplete",ChapterSkip:"chapterSkip",SeekStart:"seekStart",SeekComplete:"seekComplete",BufferStart:"bufferStart",BufferComplete:"bufferComplete",BitrateChange:"bitrateChange",TimedMetadataUpdate:"timedMetadataUpdate"},r.StreamType={VOD:"vod",LIVE:"live",LINEAR:"linear",PODCAST:"podcast",AUDIOBOOK:"audiobook",AOD:"aod"},r.MediaObjectKey={StandardVideoMetadata:"media_standard_content_metadata",StandardMediaMetadata:"media_standard_content_metadata",StandardAdMetadata:"media_standard_ad_metadata",VideoResumed:"resumed",MediaResumed:"resumed",PrerollTrackingWaitingTime:"preroll_tracking_waiting_time"},r.VideoMetadataKeys=i.plugins.aa.VideoMetadataKeys,r.AudioMetadataKeys=i.plugins.aa.AudioMetadataKeys,r.AdMetadataKeys=i.plugins.aa.AdMetadataKeys,r.createMediaObject=function(e,t,i,a,n){var o=new s;o.setValue(s.MEDIAINFO_KEY_VIDEOID,t),o.setValue(s.MEDIAINFO_KEY_NAME,e),o.setValue(s.MEDIAINFO_KEY_LENGTH,i),o.setValue(s.MEDIAINFO_KEY_PLAYHEAD,0);var l=a||r.StreamType.VOD;return o.setValue(s.MEDIAINFO_KEY_STREAMTYPE,l),("string"!=typeof n||n!=r.MediaType.Video&&n!=r.MediaType.Audio)&&(n=r.MediaType.Video),o.setValue(s.MEDIAINFO_KEY_MEDIATYPE,n),o},r.createAdBreakObject=function(e,t,i){var a=new s;return a.setValue(s.MEDIAINFO_KEY_NAME,e),a.setValue(s.MEDIAINFO_KEY_POSITION,t),a.setValue(s.MEDIAINFO_KEY_STARTTIME,i),a},r.createAdObject=function(e,t,i,a){var r=new s;return r.setValue(s.MEDIAINFO_KEY_NAME,e),r.setValue(s.MEDIAINFO_KEY_ADID,t),r.setValue(s.MEDIAINFO_KEY_POSITION,i),r.setValue(s.MEDIAINFO_KEY_LENGTH,a),r},r.createChapterObject=function(e,t,i,a){var r=new s;return r.setValue(s.MEDIAINFO_KEY_NAME,e),r.setValue(s.MEDIAINFO_KEY_POSITION,t),r.setValue(s.MEDIAINFO_KEY_LENGTH,i),r.setValue(s.MEDIAINFO_KEY_STARTTIME,a),r},r.createQoSObject=function(e,t,i,a){var r=new s;return r.setValue(s.MEDIAINFO_KEY_BITRATE,e),r.setValue(s.MEDIAINFO_KEY_FPS,i),r.setValue(s.MEDIAINFO_KEY_DROPPEDFRAMES,a),r.setValue(s.MEDIAINFO_KEY_STARTUPTIME,t),r},r.createTimedMetadataObject=function(e){var t=new s;return t.setValue(s.MEDIAINFO_KEY_TIMEDMETADATA,e),t},r.version=function(){return i.Version.getVersion()},r.prototype.trackSessionStart=function(e,t){this._logger.info(D,"#::trackSessionStart()");var i=y.createContext();i.setData(N,e),i.setData(B,this._cleanContextData(t)),this._processRule(P.SessionStart,i)},r.prototype.trackPlay=function(){this._logger.info(D,"#::trackPlay()"),this._processRule(P.Play)},r.prototype.trackPause=function(){this._logger.info(D,"#::trackPause()"),this._processRule(P.Pause)},r.prototype.trackComplete=function(){this._logger.info(D,"#::trackComplete()"),this._processRule(P.VideoComplete)},r.prototype.trackSessionEnd=function(){this._logger.info(D,"#::trackSessionEnd()"),this._processRule(P.SessionEnd)},r.prototype.trackError=function(e){this._logger.info(D,"#::trackError()");var t=y.createContext();t.setData(V,e),this._processRule(P.Error,t)},r.prototype.trackEvent=function(e,t,i){this._logger.info(D,"#::trackEvent() - "+e);var a,n=y.createContext();switch(e){case r.Event.AdBreakStart:n.setData(M,t),n.setData(B,this._cleanContextData(i)),a=P.AdBreakStart;break;case r.Event.AdBreakComplete:a=P.AdBreakComplete;break;case r.Event.AdStart:n.setData(C,t),n.setData(B,this._cleanContextData(i)),a=P.AdStart;break;case r.Event.AdComplete:a=P.AdComplete;break;case r.Event.AdSkip:a=P.AdSkip;break;case r.Event.SeekStart:a=P.SeekStart;break;case r.Event.SeekComplete:a=P.SeekComplete;break;case r.Event.ChapterStart:n.setData(O,t),n.setData(B,this._cleanContextData(i)),a=P.ChapterStart;break;case r.Event.ChapterComplete:a=P.ChapterComplete;break;case r.Event.ChapterSkip:a=P.ChapterSkip;break;case r.Event.BufferStart:a=P.BufferStart;break;case r.Event.BufferComplete:a=P.BufferComplete;break;case r.Event.BitrateChange:a=P.BitrateChange;break;case r.Event.TimedMetadataUpdate:a=P.TimedMetadataUpdate,n.setData(R,t);break;default:return void this._logger.error(D,"Incorrect event name.")}this._processRule(a,n)},i.plugins.nielsen){var A=i.MediaHeartbeatConfig;A.prototype.nielsenConfigKey=void 0,A.prototype.nielsenAppInfo=void 0;var k=i._NielsenObjectKey;r.MediaObjectKey.NielsenContentMetadata=k.NielsenContentMetadata,r.MediaObjectKey.NielsenAdMetadata=k.NielsenAdMetadata,r.MediaObjectKey.NielsenChannelMetadata=k.NielsenChannelMetadata,r.NielsenContentMetadataKeys=i.plugins.nielsen.ContentMetadataKeys,r.NielsenChannelMetadataKeys=i.plugins.nielsen.ChannelMetadataKeys,r.NielsenAdMetadataKeys=i.plugins.nielsen.AdMetadataKeys,r.prototype.nielsenLoadMetadata=function(e){this._nielsenPlugin&&this._nielsenPlugin.loadMetadata(e)}}r.prototype._setState=function(e,t){this._mediaState[e]=t},r.prototype._isInState=function(e){return this._mediaState[e]},r.prototype._isTrackingDisabled=function(e){return this._mediaHeartbeatDisabled},r.prototype._isInSession=function(e){return this._isInState(S.Session)},r.prototype._isInMedia=function(e){return this._isInState(S.Media)},r.prototype._isInAd=function(e){return this._isInState(S.Ad)},r.prototype._isInAdBreak=function(e){return this._isInState(S.AdBreak)},r.prototype._isInChapter=function(e){return this._isInState(S.Chapter)},r.prototype._isInPlay=function(e){return this._isInState(S.PlayPause)},r.prototype._isInPause=function(e){return!this._isInState(S.PlayPause)},r.prototype._isInBuffer=function(e){return this._isInState(S.Buffer)},r.prototype._isInSeek=function(e){return this._isInState(S.Seek)},r.prototype._isPlatformTrackingSupported=function(e){return!this._appMeasurement.unsupportedBrowser},r.prototype._isAudioTrackingSupported=function(e){return e.getData(N).getValue(s.MEDIAINFO_KEY_MEDIATYPE)!==r.MediaType.Audio||T.isGreaterThanEqual(this._appMeasurement.version,"2.11.0")},r.prototype._isValidMediaObject=function(e){var t=e.getData(N);if(t&&t instanceof s){var i=t.getValue(r.MediaObjectKey.MediaResumed);null!=i&&"boolean"!=typeof i&&this._logger.warn(D,"Ignoring value set for MediaHeartbeat.MediaObjectKey.MediaResumed in MediaObject as we expect a boolean value");var a=t.getValue(r.MediaObjectKey.PrerollTrackingWaitingTime);null!=a&&(("string"==typeof a||"number"==typeof a)&&!isNaN(a)||this._logger.warn(D,"Ignoring value set for MediaHeartbeat.MediaObjectKey.PrerollTrackingWaitingTime in MediaObject as we expect a valid duration as number in milliseconds."));var n=t.getValue(r.MediaObjectKey.StandardMediaMetadata);return null!=n&&"object"!=typeof n&&this._logger.warn(D,"Ignoring value set for MediaHeartbeat.MediaObjectKey.StandardMediaMetadata in MediaObject as we expect a valid object with kv pairs."),!0}return!1},r.prototype._isValidAdBreakObject=function(e){var t=e.getData(M);return t&&t instanceof s},r.prototype._isDifferentAdBreakObject=function(e){var t=e.getData(M);return!(this._currentAdBreakObject&&this._currentAdBreakObject.isEqual(t))},r.prototype._isValidAdObject=function(e){var t=e.getData(C);if(t&&t instanceof s){var i=t.getValue(Y);null!=i&&"boolean"!=typeof i&&this._logger.warn(D,"Ignoring value set for MediaHeartbeat.MediaObjectKey.GranularAdTracking in AdObject as we expect a boolean value.");var a=t.getValue(r.MediaObjectKey.StandardAdMetadata);return null!=a&&"object"!=typeof a&&this._logger.warn(D,"Ignoring value set for MediaHeartbeat.MediaObjectKey.StandardAdMetadata in AdObject as we expect a valid object with kv pairs."),!0}return!1},r.prototype._isDifferentAdObject=function(e){var t=e.getData(C);return!(this._currentAdObject&&this._currentAdObject.isEqual(t))},r.prototype._isValidChapterObject=function(e){var t=e.getData(O);return t&&t instanceof s},r.prototype._isDifferentChapterObject=function(e){var t=e.getData(O);return!(this._currentChapterObject&&this._currentChapterObject.isEqual(t))},r.prototype._isValidTimedMetadataObject=function(e){var t=e.getData(R);if(t&&t instanceof s){var i=t.getValue(s.MEDIAINFO_KEY_TIMEDMETADATA);return i&&"string"==typeof i}return!1},r.prototype._shouldAllowPlayerStateChange=function(e){return!(this._isInState(S.AdBreak)&&!this._isInState(S.Ad))},r.prototype._didBeginReporting=function(e){return this._isInState(S.Reporting)},r.prototype._deferredTrackPlay=function(){this._prerollWaitEnabled&&(this._logger.info(D,"Executing deferred API:trackPlay."),this._prerollWaitEnabled=!1,this._playTaskHandle=null,this._processRule(P.Play))},r.prototype._cmdEnterAction=function(e){var t=e.getRuleName();if(this._prerollWaitEnabled)if(this._playReceived)switch(t){case P.SeekStart:case P.BufferStart:this._logger.info(D,"Cancelling scheduled API:trackPlay because of SeekStart/BufferStart event"),this._taskScheduler.cancelTask(this._playTaskHandle),this._playTaskHandle=null;break;case P.SeekComplete:case P.BufferComplete:this._logger.info(D,"Rescheduled API:trackPlay after SeekComplete/BufferComplete event"),this._playTaskHandle=this._taskScheduler.scheduleTask(this._deferredTrackPlay,this,this._prerollWaitTime);break;case P.Play:this._logger.info(D,"Dropping API:trackPlay as we already have a API:trackPlay scheduled."),e.stopProcessingAction();break;case P.Pause:this._logger.info(D,"Cancelling scheduled API:trackPlay because of API:trackPause call."),this._taskScheduler.cancelTask(this._playTaskHandle),this._playTaskHandle=null,this._prerollWaitEnabled=!1;break;case P.AdBreakStart:this._logger.info(D,"Received API:trackEvent(AdBreakStart) within "+this._prerollWaitTime+" ms after API:trackPlay. We will track this as preroll AdBreak."),this._taskScheduler.cancelTask(this._playTaskHandle),this._playTaskHandle=null,this._prerollWaitEnabled=!1,this._playAfterAdStart=!0}else switch(t){case P.Play:this._logger.info(D,"Deferring API:trackPlay for "+this._prerollWaitTime+" ms."),this._playReceived=!0,this._playUnhandledFromPrerollWaitTime=!0,this._playTaskHandle=this._taskScheduler.scheduleTask(this._deferredTrackPlay,this,this._prerollWaitTime),e.stopProcessingAction();break;case P.Pause:this._logger.info(D,"Received trackPause before first trackPlay."),this._prerollWaitEnabled=!1;break;case P.AdBreakStart:this._logger.info(D,"Received trackEvent(AdBreakStart) before first trackPlay."),this._prerollWaitEnabled=!1}},r.prototype._cmdExitAction=function(e){var t=e.getRuleName();this._playAfterAdStart&&(t===P.AdStart?(this._cmdPlay(e),this._playAfterAdStart=!1):t===P.AdBreakComplete&&(this._playAfterAdStart=!1)),t!==P.AdStart||this._isInState(S.FPlayPause)||this._cmdPlay(e),this._prerollWaitEnabled||!this._playUnhandledFromPrerollWaitTime||t!==P.BufferComplete&&t!==P.SeekComplete&&t!==P.AdBreakComplete||this._isInState(S.FPlayPause)||this._isInState(S.Buffer)||this._isInState(S.Seek)||(this._logger.info(D,"Executing pending API:trackPlay. This case most likely happens tracking Preroll AdBreak without any Ads."),this._cmdPlay(e))},r.prototype._cmdConfigure=function(e){this._configureAdobeAnalyticsPlugin(),this._configureAdobeHearbeatPlugin(),this._configureVideoPlayerPlugin(),this._configureOtherPlugins(),this._configureHeartbeat(),this._privacyManager.configure(this._onPrivacyChange.bind(this))},r.prototype._cmdBeginReporting=function(e){this._playerPlugin&&this._playerPlugin.beginReporting(),this._setState(S.Reporting,!0)},r.prototype._cmdSessionStart=function(e){var t=e.getData(N),i=e.getData(B);this._currentMediaObject=t,this._videoInfo=t.createVideoInfo(),this._videoInfo.playerName=this._config.playerName?this._config.playerName:"";var a=t.getValue(r.MediaObjectKey.StandardMediaMetadata);a&&"object"==typeof a||(a=null);var n=t.getValue(r.MediaObjectKey.MediaResumed);"boolean"==typeof n&&(this._videoInfo.resumed=n);var s=t.getValue(r.MediaObjectKey.PrerollTrackingWaitingTime);"string"!=typeof s&&"number"!=typeof s||isNaN(s)||(this._prerollWaitTime=Number(s),this._prerollWaitTime<=0&&(this._prerollWaitEnabled=!1));var o=this._prepareMetadata(a,i);o[L]=this._videoInfo.mediaType,this._aaPlugin.setVideoMetadata(o),this._playerPlugin.trackVideoLoad(),this._playerPlugin.trackSessionStart(),this._setState(S.Session,!0),this._setState(S.Media,!0)},r.prototype._destroyHeartbeat=function(e,t){e&&e.trackVideoUnload(),t&&t.destroy()},r.prototype._cmdVideoEnd=function(e){var t=e.getRuleName()===P.VideoComplete;if(this._isInState(S.Reporting)){var i=this,a=this._heartbeat,r=this._playerPlugin;this._playerPlugin.trackComplete((function(){i._destroyHeartbeat(r,a)}),t)}else this._destroyHeartbeat(this._playerPlugin,this._heartbeat);this._setState(S.Media,!1)},r.prototype._cmdHandleMediaComplete=function(e){this._isInMedia(e)||(this._logger.info(D,"API:trackComplete has already cleaned up Heartbeat instance."),this._cmdSessionEnd(e),e.stopProcessingAction())},r.prototype._cmdSessionEnd=function(e){this._setState(S.Session,!1),this._resetState()},r.prototype._cmdDisableTracking=function(e){this._logger.info(D,"#_cmdDisableTracking: ADBMediaHeartbeat Tracking Disabled Remotely."),this._mediaHeartbeatDisabled=!0},r.prototype._cmdBufferStart=function(e){this._playerPlugin.trackBufferStart(),this._setState(S.Buffer,!0)},r.prototype._cmdBufferComplete=function(e){this._isInState(S.Buffer)&&this._playerPlugin.trackBufferComplete(),this._setState(S.Buffer,!1)},r.prototype._cmdSeekStart=function(e){this._playerPlugin.trackSeekStart(),this._setState(S.Seek,!0)},r.prototype._cmdSeekComplete=function(e){this._isInState(S.Seek)&&this._playerPlugin.trackSeekComplete(),this._setState(S.Seek,!1)},r.prototype._cmdPlay=function(e){this._playerPlugin.trackPlay(),this._setState(S.PlayPause,!0),this._setState(S.FPlayPause,!0),this._playUnhandledFromPrerollWaitTime=!1},r.prototype._cmdPause=function(e){this._playerPlugin.trackPause(),this._setState(S.PlayPause,!1),this._setState(S.FPlayPause,!0)},r.prototype._cmdAdBreakStart=function(e){var t=e.getData(M);this._currentAdBreakObject=t,this._adBreakInfo=t.createAdBreakInfo(),this._adBreakInfo.playerName=this._config.playerName?this._config.playerName:"",this._playerPlugin.trackAdBreakStart(),this._setState(S.AdBreak,!0)},r.prototype._cmdAdBreakComplete=function(e){this._currentAdBreakObject=null,this._adBreakInfo=null,this._isInState(S.AdBreak)&&this._playerPlugin.trackAdBreakComplete(),this._setState(S.AdBreak,!1)},r.prototype._cmdAdStart=function(e){var t=e.getData(C),i=e.getData(B);this._currentAdObject=t,this._adInfo=t.createAdInfo();var a=t.getValue(Y);"boolean"==typeof a&&(this._adInfo.granularTracking=a);var n=t.getValue(r.MediaObjectKey.StandardAdMetadata);n&&"object"==typeof n||(n=null);var s=this._prepareMetadata(n,i);this._aaPlugin.setAdMetadata(s),this._playerPlugin.trackAdStart(),this._setState(S.Ad,!0)},r.prototype._cmdAdComplete=function(e){this._currentAdObject=null,this._adInfo=null,this._isInState(S.Ad)&&this._playerPlugin.trackAdComplete(),this._setState(S.Ad,!1)},r.prototype._cmdAdSkip=function(e){this._currentAdObject=null,this._adInfo=null,this._isInState(S.Ad)&&this._playerPlugin.trackAdSkip(),this._setState(S.Ad,!1)},r.prototype._cmdChapterStart=function(e){var t=e.getData(O),i=e.getData(B);this._currentChapterObject=t,this._chapterInfo=t.createChapterInfo();var a=this._prepareMetadata(null,i);this._aaPlugin.setChapterMetadata(a),this._playerPlugin.trackChapterStart(),this._setState(S.Chapter,!0)},r.prototype._cmdChapterComplete=function(e){this._currentChapterObject=null,this._chapterInfo=null,this._isInState(S.Chapter)&&this._playerPlugin.trackChapterComplete(),this._setState(S.Chapter,!1)},r.prototype._cmdChapterSkip=function(e){this._currentChapterObject=null,this._chapterInfo=null,this._isInState(S.Chapter)&&this._playerPlugin.trackChapterSkip(),this._setState(S.Chapter,!1)},r.prototype._cmdError=function(e){var t=e.getData(V);t||(t="unknown_error_id"),this._playerPlugin.trackVideoPlayerError(t)},r.prototype._cmdBitrate=function(e){this._playerPlugin.trackBitrateChange()},r.prototype._cmdTimedMetadataUpdate=function(e){var t=e.getData(R).getValue(s.MEDIAINFO_KEY_TIMEDMETADATA);this._playerPlugin.trackTimedMetadata(t)},r.prototype._processRule=function(e,t){return this._ruleEngine.processRule(e,t)},r.prototype._setupRules=function(){this._ruleEngine.registerEnterExitAction(this._cmdEnterAction,this._cmdExitAction),this._ruleEngine.registerRule(P.SessionStart,"API:trackSessionStart",[y.createPredicate(this._isPlatformTrackingSupported,!0,w.ErrUnSupportedPlatform),y.createPredicate(this._isTrackingDisabled,!1,w.ErrTrackingDisabled),y.createPredicate(this._isInSession,!1,w.ErrInSession),y.createPredicate(this._isValidMediaObject,!0,w.ErrInvalidMediaObject),y.createPredicate(this._isAudioTrackingSupported,!0,w.ErrAudioTrackingNotSupported)],[this._cmdConfigure,this._cmdSessionStart],this),this._ruleEngine.registerRule(P.SessionEnd,"API:trackSessionEnd",[y.createPredicate(this._isInSession,!0,w.ErrNotInSession)],[this._cmdHandleMediaComplete,this._cmdAdSkip,this._cmdAdBreakComplete,this._cmdChapterSkip,this._cmdVideoEnd,this._cmdSessionEnd],this),this._ruleEngine.registerRule(P.VideoComplete,"API:trackComplete",[y.createPredicate(this._isInSession,!0,w.ErrNotInSession),y.createPredicate(this._isInMedia,!0,w.ErrNotInMedia)],[this._cmdAdSkip,this._cmdAdBreakComplete,this._cmdChapterSkip,this._cmdVideoEnd],this),this._ruleEngine.registerRule(P.Error,"API:trackError",[y.createPredicate(this._isInSession,!0,w.ErrNotInSession),y.createPredicate(this._isInMedia,!0,w.ErrNotInMedia)],[this._cmdError],this),this._ruleEngine.registerRule(P.Play,"API:trackPlay",[y.createPredicate(this._isInSession,!0,w.ErrNotInSession),y.createPredicate(this._isInMedia,!0,w.ErrNotInMedia),y.createPredicate(this._shouldAllowPlayerStateChange,!0,w.ErrInvalidPlayerState)],[this._cmdSeekComplete,this._cmdBufferComplete,this._cmdPlay],this),this._ruleEngine.registerRule(P.Pause,"API:trackPause",[y.createPredicate(this._isInSession,!0,w.ErrNotInSession),y.createPredicate(this._isInMedia,!0,w.ErrNotInMedia),y.createPredicate(this._shouldAllowPlayerStateChange,!0,w.ErrInvalidPlayerState),y.createPredicate(this._isInBuffer,!1,w.ErrInBuffer),y.createPredicate(this._isInSeek,!1,w.ErrInSeek)],[this._cmdPause],this),this._ruleEngine.registerRule(P.BufferStart,"API:trackEvent(BufferStart)",[y.createPredicate(this._isInSession,!0,w.ErrNotInSession),y.createPredicate(this._isInMedia,!0,w.ErrNotInMedia),y.createPredicate(this._shouldAllowPlayerStateChange,!0,w.ErrInvalidPlayerState),y.createPredicate(this._isInBuffer,!1,w.ErrInBuffer),y.createPredicate(this._isInSeek,!1,w.ErrInSeek)],[this._cmdBufferStart],this),this._ruleEngine.registerRule(P.BufferComplete,"API:trackEvent(BufferComplete)",[y.createPredicate(this._isInSession,!0,w.ErrNotInSession),y.createPredicate(this._isInMedia,!0,w.ErrNotInMedia),y.createPredicate(this._shouldAllowPlayerStateChange,!0,w.ErrInvalidPlayerState),y.createPredicate(this._isInBuffer,!0,w.ErrNotInBuffer)],[this._cmdBufferComplete],this),this._ruleEngine.registerRule(P.SeekStart,"API:trackEvent(SeekStart)",[y.createPredicate(this._isInSession,!0,w.ErrNotInSession),y.createPredicate(this._isInMedia,!0,w.ErrNotInMedia),y.createPredicate(this._shouldAllowPlayerStateChange,!0,w.ErrInvalidPlayerState),y.createPredicate(this._isInSeek,!1,w.ErrInSeek),y.createPredicate(this._isInBuffer,!1,w.ErrInBuffer)],[this._cmdSeekStart],this),this._ruleEngine.registerRule(P.SeekComplete,"API:trackEvent(SeekComplete)",[y.createPredicate(this._isInSession,!0,w.ErrNotInSession),y.createPredicate(this._isInMedia,!0,w.ErrNotInMedia),y.createPredicate(this._shouldAllowPlayerStateChange,!0,w.ErrInvalidPlayerState),y.createPredicate(this._isInSeek,!0,w.ErrNotInSeek)],[this._cmdSeekComplete],this),this._ruleEngine.registerRule(P.AdBreakStart,"API:trackEvent(AdBreakStart)",[y.createPredicate(this._isInSession,!0,w.ErrNotInSession),y.createPredicate(this._isInMedia,!0,w.ErrNotInMedia),y.createPredicate(this._isValidAdBreakObject,!0,w.ErrInvalidAdBreakObject),y.createPredicate(this._isDifferentAdBreakObject,!0,w.ErrDuplicateAdBreakObject)],[this._cmdAdSkip,this._cmdAdBreakComplete,this._cmdAdBreakStart],this),this._ruleEngine.registerRule(P.AdBreakComplete,"API:trackEvent(AdBreakComplete)",[y.createPredicate(this._isInSession,!0,w.ErrNotInSession),y.createPredicate(this._isInMedia,!0,w.ErrNotInMedia),y.createPredicate(this._isInAdBreak,!0,w.ErrNotInAdBreak)],[this._cmdAdSkip,this._cmdAdBreakComplete],this),this._ruleEngine.registerRule(P.AdStart,"API:trackEvent(AdStart)",[y.createPredicate(this._isInSession,!0,w.ErrNotInSession),y.createPredicate(this._isInMedia,!0,w.ErrNotInMedia),y.createPredicate(this._isInAdBreak,!0,w.ErrNotInAdBreak),y.createPredicate(this._isValidAdObject,!0,w.ErrInvalidAdObject),y.createPredicate(this._isDifferentAdObject,!0,w.ErrDuplicateAdObject)],[this._cmdAdSkip,this._cmdAdStart],this),this._ruleEngine.registerRule(P.AdComplete,"API:trackEvent(AdComplete)",[y.createPredicate(this._isInSession,!0,w.ErrNotInSession),y.createPredicate(this._isInMedia,!0,w.ErrNotInMedia),y.createPredicate(this._isInAdBreak,!0,w.ErrNotInAdBreak),y.createPredicate(this._isInAd,!0,w.ErrNotInAd)],[this._cmdAdComplete],this),this._ruleEngine.registerRule(P.AdSkip,"API:trackEvent(AdSkip)",[y.createPredicate(this._isInSession,!0,w.ErrNotInSession),y.createPredicate(this._isInMedia,!0,w.ErrNotInMedia),y.createPredicate(this._isInAdBreak,!0,w.ErrNotInAdBreak),y.createPredicate(this._isInAd,!0,w.ErrNotInAd)],[this._cmdAdSkip],this),this._ruleEngine.registerRule(P.ChapterStart,"API:trackEvent(ChapterStart)",[y.createPredicate(this._isInSession,!0,w.ErrNotInSession),y.createPredicate(this._isInMedia,!0,w.ErrNotInMedia),y.createPredicate(this._isValidChapterObject,!0,w.ErrInvalidChapterObject),y.createPredicate(this._isDifferentChapterObject,!0,w.ErrDuplicateChapterObject)],[this._cmdChapterSkip,this._cmdChapterStart],this),this._ruleEngine.registerRule(P.ChapterComplete,"API:trackEvent(ChapterComplete)",[y.createPredicate(this._isInSession,!0,w.ErrNotInSession),y.createPredicate(this._isInMedia,!0,w.ErrNotInMedia),y.createPredicate(this._isInChapter,!0,w.ErrNotInChapter)],[this._cmdChapterComplete],this),this._ruleEngine.registerRule(P.ChapterSkip,"API:trackEvent(ChapterSkip)",[y.createPredicate(this._isInSession,!0,w.ErrNotInSession),y.createPredicate(this._isInMedia,!0,w.ErrNotInMedia),y.createPredicate(this._isInChapter,!0,w.ErrNotInChapter)],[this._cmdChapterSkip],this),this._ruleEngine.registerRule(P.BitrateChange,"API:trackEvent(BitrateChange)",[y.createPredicate(this._isInSession,!0,w.ErrNotInSession),y.createPredicate(this._isInMedia,!0,w.ErrNotInMedia)],[this._cmdBitrate],this),this._ruleEngine.registerRule(P.TimedMetadataUpdate,"API:trackEvent(TimedMetadataUpdate)",[y.createPredicate(this._isInSession,!0,w.ErrNotInSession),y.createPredicate(this._isInMedia,!0,w.ErrNotInMedia),y.createPredicate(this._isValidTimedMetadataObject,!0,w.ErrInvalidTimedMetadataObject)],[this._cmdTimedMetadataUpdate],this),this._ruleEngine.registerRule(P.DisableTracking,"Internal::DisableTracking",[y.createPredicate(this._isTrackingDisabled,!1,w.ErrTrackingDisabled)],[this._cmdDisableTracking],this),this._ruleEngine.registerRule(P.BeginReporting,"Internal::BeginReporting",[y.createPredicate(this._isInSession,!0,w.ErrNotInSession),y.createPredicate(this._isInMedia,!0,w.ErrNotInMedia),y.createPredicate(this._didBeginReporting,!1,w.ErrBeginReporting)],[this._cmdBeginReporting],this)},r.prototype._configureAdobeAnalyticsPlugin=function(){this._aaPlugin=new u(this._appMeasurement,new g(this));var e=new _;e.channel=this._config.channel?this._config.channel:"",e.debugLogging=i.MediaHeartbeat._debugLogging||this._config.debugLogging,this._aaPlugin.configure(e),this._plugins.push(this._aaPlugin)},r.prototype._configureAdobeHearbeatPlugin=function(){var e=this._appMeasurement.visitor?this._appMeasurement.visitor.marketingCloudOrgID:"";this._ahPlugin=new f(new v(this));var t=new m(this._config.trackingServer,e);t.debugLogging=i.MediaHeartbeat._debugLogging||this._config.debugLogging,t.ovp=this._config.ovp?this._config.ovp:"",t.ssl=this._config.ssl,t.sdk=this._config.appVersion?this._config.appVersion:"";var a=this._primetimeTVSDKVersion();a&&a.length>0&&(t.__primetime=!0,t.__psdkVersion=a),this._ahPlugin.configure(t),this._plugins.push(this._ahPlugin)},r.prototype._configureVideoPlayerPlugin=function(){this._playerPlugin=new d(new p(this));var e=new c;e.debugLogging=i.MediaHeartbeat._debugLogging||this._config.debugLogging,this._playerPlugin.configure(e),this._plugins.push(this._playerPlugin)},r.prototype._configureOtherPlugins=function(){if(i.plugins.nielsen&&this._config.nielsenConfigKey&&this._config.nielsenAppInfo){this._nielsenPlugin=new i.plugins.nielsen.NielsenPlugin(new i._NielsenPluginDelegate(this,this._logger));var e=new i.plugins.nielsen.NielsenPluginConfig;e.debugLogging=i.MediaHeartbeat._debugLogging||this._config.debugLogging,e.appInfo=this._config.nielsenAppInfo,e.configKey=this._config.nielsenConfigKey,this._nielsenPlugin.configure(e),this._plugins.push(this._nielsenPlugin)}},r.prototype._configureHeartbeat=function(){var e=new l;e.debugLogging=i.MediaHeartbeat._debugLogging||this._config.debugLogging,this._heartbeat=new o(new h(this),this._plugins),this._heartbeat.configure(e)},r.prototype._resetState=function(){this._taskScheduler.clearTasks(),this._privacyManager.reset(),this._mediaState={},this._plugins=[],this._playerPlugin=null,this._aaPlugin=null,this._ahPlugin=null,this._nielsenPlugin=null,this._heartbeat=null,this._currentMediaObject=null,this._currentAdBreakObject=null,this._currentAdObject=null,this._currentChapterObject=null,this._videoInfo=null,this._adBreakInfo=null,this._adInfo=null,this._chapterInfo=null,this._prerollWaitEnabled=!0,this._prerollWaitTime=x,this._playReceived=!1,this._playUnhandledFromPrerollWaitTime=!1,this._playTaskHandle=null,this._playAfterAdStart=!1},r.prototype._primetimeTVSDKVersion=function(){return this._currentMediaObject?this._currentMediaObject.getValue(F):null},r.prototype._cleanContextData=function(e){if(null==e||"object"!=typeof e)return null;var t={};for(var i in e)if(e.hasOwnProperty(i)){var a=e[i];"number"!=typeof a&&"string"!=typeof a&&"boolean"!=typeof a||(t[i]=a)}return t},r.prototype._prepareMetadata=function(e,t){var i={};if(t&&b.append(i,t),e){var a=this._cleanContextData(e);b.append(i,a)}return delete i[L],i},r.prototype._onDelegateError=function(e){this._logger.error(D,e.getMessage()+" | "+e.getDetails())},r.prototype._onDelegateTrackingDisabled=function(){this._processRule(P.SessionEnd),this._processRule(P.DisableTracking)},r.prototype._onPrivacyChange=function(e){this._logger.info(D,"#_onPrivacyChange: Privacy Status: "+e),e===E.OPT_IN?this._processRule(P.BeginReporting):e===E.OPT_OUT&&this._processRule(P.SessionEnd)};var S={Session:0,Media:1,AdBreak:2,Ad:3,Chapter:4,PlayPause:5,Buffer:6,Seek:7,FPlayPause:8,Reporting:9},P={SessionStart:0,SessionEnd:1,VideoComplete:2,Play:3,Pause:4,Error:5,AdBreakStart:6,AdBreakComplete:7,AdStart:8,AdComplete:9,AdSkip:10,ChapterStart:11,ChapterComplete:12,ChapterSkip:13,SeekStart:14,SeekComplete:15,BufferStart:16,BufferComplete:17,BitrateChange:18,TimedMetadataUpdate:19,DisableTracking:20,BeginReporting:21},w={ErrUnSupportedPlatform:"MediaHeartbeat does not support tracking due to AppMeasurement or VisitorAPI not supporting the browser.",ErrNotInSession:'MediaHeartbeat is not in active tracking session, call "API:trackSessionStart" to begin a new tracking session.',ErrInSession:'MediaHeartbeat is in active tracking session, call "API:trackSessionEnd" to end current tracking session.',ErrNotInMedia:'MediaHeartbeat has completed tracking session, call "API:trackSessionEnd" first to end current session and then begin a new tracking session.',ErrInBuffer:'MediaHeartbeat is tracking buffer events, call "API:trackEvent(BufferComplete)" first to stop tracking buffer events.',ErrNotInBuffer:'MediaHeartbeat is not tracking buffer events, call "API:trackEvent(BufferStart)" before "API:trackEvent(BufferComplete)".',ErrInSeek:'MediaHeartbeat is tracking seek events, call "API:trackEvent(SeekComplete)" first to stop tracking seek events.',ErrNotInSeek:'MediaHeartbeat is not tracking seek events, call "API:trackEvent(SeekStart)" before "API:trackEvent(SeekComplete)".',ErrNotInAdBreak:'MediaHeartbeat is not tracking any AdBreak, call "API:trackEvent(AdBreakStart)" to begin tracking AdBreak',ErrNotInAd:'MediaHeartbeat is not tracking any Ad, call "API:trackEvent(AdStart)" to begin tracking Ad',ErrNotInChapter:'MediaHeartbeat is not tracking any Chapter, call "API:trackEvent(ChapterStart)" to begin tracking Chapter',ErrInvalidMediaObject:'MediaInfo passed into "API:trackSessionStart" is invalid.',ErrInvalidAdBreakObject:'AdBreakInfo passed into "API:trackEvent(AdBreakStart)" is invalid.',ErrDuplicateAdBreakObject:'MediaHeartbeat is currently tracking the AdBreak passed into "API:trackEvent(AdBreakStart)".',ErrInvalidAdObject:'AdInfo passed into "API:trackEvent(AdStart)" is invalid.',ErrDuplicateAdObject:'MediaHeartbeat is currently tracking the Ad passed into "API:trackEvent(AdStart)".',ErrInvalidChapterObject:'ChapterInfo passed into "API:trackEvent(ChapterStart)" is invalid.',ErrDuplicateChapterObject:'MediaHeartbeat is currently tracking the Chapter passed into "API:trackEvent(ChapterStart)".',ErrInvalidTimedMetadataObject:'TimedMetadata passed into "API:trackEvent(TimedMetadataUpdate)" is invalid.',ErrInvalidPlayerState:"MediaHeartbeat is tracking an AdBreak but not tracking any Ad and will drop any calls to track player state (Play, Pause, Buffer or Seek) in this state.",ErrAudioTrackingNotSupported:"Upgrade your AppMeasurement library to version >= '2.11.0' to support tracking audio content.",ErrTrackingDisabled:"MediaHeartbeat tracking is disabled for this publisher. Please contact Adobe Representative to enable tracking.",ErrBeginReporting:"MediaHeartbeat has already started reporting."},D="MediaHeartbeat",N="key_media_object",M="key_adbreak_object",C="key_ad_object",O="key_chapter_object",R="key_timed_metadata_object",B="key_custom_metadata",V="key_error_id",L="a.media.streamType",F="a.__pttvsdkVersion",Y="granular_ad_tracking",x=250;i._MediaHeartbeatRule=P,i._MediaHeartbeatErrorMessage=w,i.MediaHeartbeatDelegate=a,i.MediaHeartbeat=r,i.MediaHeartbeat._debugLogging=!1}(e.ADB.core,e.ADB.va),e.ADB||(e.ADB={}),e.ADB.core||(e.ADB.core=core),e.ADB.va||(e.ADB.va=va),e.ADB.va.plugins||(e.ADB.va.plugins={})}).call(t),e.va=t.ADB.va,e.core=t.ADB.core},void 0===(a=i.apply(t,[t]))||(e.exports=a)},418:function(e){"use strict";var t=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;function r(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},i=0;i<10;i++)t["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var a={};return"abcdefghijklmnopqrst".split("").forEach((function(e){a[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},a)).join("")}catch(e){return!1}}()?Object.assign:function(e,n){for(var s,o,l=r(e),h=1;h<arguments.length;h++){for(var d in s=Object(arguments[h]))i.call(s,d)&&(l[d]=s[d]);if(t){o=t(s);for(var c=0;c<o.length;c++)a.call(s,o[c])&&(l[o[c]]=s[o[c]])}}return l}},408:function(e,t,i){"use strict";var a=i(418);if("function"==typeof Symbol&&Symbol.for){var r=Symbol.for;r("react.element"),r("react.portal"),r("react.fragment"),r("react.strict_mode"),r("react.profiler"),r("react.provider"),r("react.context"),r("react.forward_ref"),r("react.suspense"),r("react.memo"),r("react.lazy")}"function"==typeof Symbol&&Symbol.iterator;function n(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},o={};function l(e,t,i){this.props=e,this.context=t,this.refs=o,this.updater=i||s}function h(){}function d(e,t,i){this.props=e,this.context=t,this.refs=o,this.updater=i||s}l.prototype.isReactComponent={},l.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(n(85));this.updater.enqueueSetState(this,e,t,"setState")},l.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},h.prototype=l.prototype;var c=d.prototype=new h;c.constructor=d,a(c,l.prototype),c.isPureReactComponent=!0;Object.prototype.hasOwnProperty},294:function(e,t,i){"use strict";i(408)},666:function(e){var t=function(e){"use strict";var t,i=Object.prototype,a=i.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function l(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,i){return e[t]=i}}function h(e,t,i,a){var r=t&&t.prototype instanceof f?t:f,n=Object.create(r.prototype),s=new w(a||[]);return n._invoke=function(e,t,i){var a=c;return function(r,n){if(a===u)throw new Error("Generator is already running");if(a===_){if("throw"===r)throw n;return N()}for(i.method=r,i.arg=n;;){var s=i.delegate;if(s){var o=k(s,i);if(o){if(o===g)continue;return o}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(a===c)throw a=_,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a=u;var l=d(e,t,i);if("normal"===l.type){if(a=i.done?_:p,l.arg===g)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(a=_,i.method="throw",i.arg=l.arg)}}}(e,i,s),n}function d(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}e.wrap=h;var c="suspendedStart",p="suspendedYield",u="executing",_="completed",g={};function f(){}function m(){}function v(){}var y={};l(y,n,(function(){return this}));var I=Object.getPrototypeOf,E=I&&I(I(D([])));E&&E!==i&&a.call(E,n)&&(y=E);var b=v.prototype=f.prototype=Object.create(y);function T(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function i(r,n,s,o){var l=d(e[r],e,n);if("throw"!==l.type){var h=l.arg,c=h.value;return c&&"object"==typeof c&&a.call(c,"__await")?t.resolve(c.__await).then((function(e){i("next",e,s,o)}),(function(e){i("throw",e,s,o)})):t.resolve(c).then((function(e){h.value=e,s(h)}),(function(e){return i("throw",e,s,o)}))}o(l.arg)}var r;this._invoke=function(e,a){function n(){return new t((function(t,r){i(e,a,t,r)}))}return r=r?r.then(n,n):n()}}function k(e,i){var a=e.iterator[i.method];if(a===t){if(i.delegate=null,"throw"===i.method){if(e.iterator.return&&(i.method="return",i.arg=t,k(e,i),"throw"===i.method))return g;i.method="throw",i.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var r=d(a,e.iterator,i.arg);if("throw"===r.type)return i.method="throw",i.arg=r.arg,i.delegate=null,g;var n=r.arg;return n?n.done?(i[e.resultName]=n.value,i.next=e.nextLoc,"return"!==i.method&&(i.method="next",i.arg=t),i.delegate=null,g):n:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,g)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function D(e){if(e){var i=e[n];if(i)return i.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,s=function i(){for(;++r<e.length;)if(a.call(e,r))return i.value=e[r],i.done=!1,i;return i.value=t,i.done=!0,i};return s.next=s}}return{next:N}}function N(){return{value:t,done:!0}}return m.prototype=v,l(b,"constructor",v),l(v,"constructor",m),m.displayName=l(v,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,o,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},T(A.prototype),l(A.prototype,s,(function(){return this})),e.AsyncIterator=A,e.async=function(t,i,a,r,n){void 0===n&&(n=Promise);var s=new A(h(t,i,a,r),n);return e.isGeneratorFunction(i)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},T(b),l(b,o,"Generator"),l(b,n,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var i in e)t.push(i);return t.reverse(),function i(){for(;t.length;){var a=t.pop();if(a in e)return i.value=a,i.done=!1,i}return i.done=!0,i}},e.values=D,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var i in this)"t"===i.charAt(0)&&a.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var i=this;function r(a,r){return o.type="throw",o.arg=e,i.next=a,r&&(i.method="next",i.arg=t),!!r}for(var n=this.tryEntries.length-1;n>=0;--n){var s=this.tryEntries[n],o=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var l=a.call(s,"catchLoc"),h=a.call(s,"finallyLoc");if(l&&h){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var n=r;break}}n&&("break"===e||"continue"===e)&&n.tryLoc<=t&&t<=n.finallyLoc&&(n=null);var s=n?n.completion:{};return s.type=e,s.arg=t,n?(this.method="next",this.next=n.finallyLoc,g):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),P(i),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var a=i.completion;if("throw"===a.type){var r=a.arg;P(i)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,i,a){return this.delegate={iterator:D(e),resultName:i,nextLoc:a},"next"===this.method&&(this.arg=t),g}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}},t={};function i(a){var r=t[a];if(void 0!==r)return r.exports;var n=t[a]={exports:{}};return e[a].call(n.exports,n,n.exports,i),n.exports}i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,{a:t}),t},i.d=function(e,t){for(var a in t)i.o(t,a)&&!i.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";function e(e,t,i,a,r,n,s){try{var o=e[n](s),l=o.value}catch(e){return void i(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function t(t){return function(){var i=this,a=arguments;return new Promise((function(r,n){var s=t.apply(i,a);function o(t){e(s,r,n,o,l,"next",t)}function l(t){e(s,r,n,o,l,"throw",t)}o(void 0)}))}}function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var r=i(757),n=i.n(r),s=i(566),o=function(e){switch(e){case"eng":return"en";case"fin":return"fi";case"sme":case"smn":case"sms":return"se";case"swe":return"sv";default:return e}},l=function(e){var t=e.url;return new Promise((function(e,i){!function(e){document.head&&document.head.appendChild(e)}(h({onError:function(e){return i(e)},onLoad:function(){return e()},url:t}))}))},h=function(e){var t=e.url,i=e.onLoad,a=e.onError,r=document.createElement("script");return r.type="text/javascript",r.src=t,i&&r.addEventListener("load",i,!1),a&&r.addEventListener("error",a,!1),r},d=(i(294),function(e,t){return e.reduce((function(e,t){return e&&e[t]?e[t]:void 0}),t)});function c(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function p(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?c(Object(i),!0).forEach((function(t){a(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var u=function(){return d(["adobe","getAppMeasurement"],window.yleAnalytics)},_=function(e,t,i){return t?a({},e,i):void 0},g=function(){var e=t(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u()||l({url:"https://analytics-sdk.yle.fi/yle-analytics.min.js"}).then(u));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=t(n().mark((function e(t,i,a){var r,o,l;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.va.MediaHeartbeat,o=s.va.MediaHeartbeatConfig,l=s.va.MediaHeartbeatDelegate,e.abrupt("return",new r(p(p({},new l),{getCurrentPlaybackTime:function(){return i()},getQoSObject:function(){return r.createQoSObject(0,0,0,0)},progress:0}),p(p(p({},new o),{appVersion:"",channel:"Areena",ovp:"Areena",ssl:!0,trackingServer:"dax.yle.fi/adobe"}),{},{playerName:a}),t));case 2:case"end":return e.stop()}}),e)})));return function(t,i,a){return e.apply(this,arguments)}}(),m=function(e,t,i,a){var r=e.yle_truelength,n=e.ns_st_pl,o=e.yle_ss_ohjusid,l=e.yle_stickytitle,h=e.ns_st_pr,d=s.va.MediaHeartbeat,c=d.createMediaObject,u=d.VideoMetadataKeys,g=d.MediaObjectKey,f=d.StreamType,m=c(n,o||i,r?parseInt(r,10)/1e3:0,t?f.LIVE:a?f.AOD:f.VOD),v=u.EPISODE,y=u.SHOW;return m.setValue(g.StandardVideoMetadata,p(p({},_(v,!!l,l)),_(y,!!h,h))),m},v=function(e){return"string"==typeof e?e:"undefined"!=typeof window&&window.location.pathname.startsWith("/lapset")?"lastenareena":"areena"},y=function(e){var t,i,a,r,n,s,l,h,c=e.autoplay,u=e.id,_=e.isContinuingWatching,g=e.isMobile,f=e.labels,m=e.language,y=e.loop,I=e.product,E=e.vsid;return p({},p(p(p(p(p(p(p(p({},f),(h=d(["areenaAb","getTestBuckets"],window))?{yle_ab_string:h()}:void 0),(l=null===(n=window.yleAnalytics)||void 0===n||null===(s=n.getYleSelvaId)||void 0===s?void 0:s.call(n))?{yle_selva:l}:void 0),(r=null===(i=window.yleAnalytics)||void 0===i||null===(a=i.getYleRec)||void 0===a?void 0:a.call(i))?{yle_rec:r}:void 0),{yle_player_embed_url:(t=d(["getUrl"],window.yleAnalytics))?t():window.location.href}),function(e){var t=d(["browsingHistory","getPackageReferer"],window.yleAnalytics);return t?{yle_package_id:t(e)}:void 0}(f.yle_ss_ohjusid||u)),_?{yle_interaction:"player.continue.watching"}:void 0),{},{player_autoplay:c?"true":"false",player_loop:y?"true":"false","yle.vrsContent":"video","yle.vrsDevice":"browser","yle.vrsPlatform":g?"mobile":"desktop","yle.vrsProduct":v(I),yle_audio_language:o(m),yle_vsid:E}))},I=function(e){var t=e;return{getProps:function(){return t},setProps:function(e){t=p(p({},t),e)}}};window.initAdobeAnalytics=function(){var e=t(n().mark((function e(t){var i,a,r,o,l,h,d,c,u,_,v,E,b,T,A,k,S,P,w,D,N,M,C,O,R,B,V,L,F,Y;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.adobeLabels,a=t.analyticsContext,r=t.autoplay,o=t.getCurrentTime,l=t.id,h=t.isAudio,d=t.isContinuingWatching,c=t.isLive,u=t.isMobile,_=t.language,v=t.loop,E=t.playerEvents,b=t.playerName,T=t.startedPromise,A=t.vsid,k=E.played,S=E.paused,P=E.seekStart,w=E.seekEnd,D=E.ended,N=E.mediaChanged,M=s.va.MediaHeartbeat.Event,C=M.SeekStart,O=M.SeekComplete,e.next=6,g();case 6:return R=e.sent,(B=R()).eVar90="D=x-requested-with",e.next=11,f(B,o,b);case 11:V=e.sent,L=I({adobeLabels:i,hasSession:!1,id:l,isAudio:h,isContinuingWatching:d,isLive:c,isSeeking:!1,language:_,vsid:A}),F=function(){var e=L.getProps();if(""!==e.id){if(!e.hasSession){var t=B.visitor.getMarketingCloudVisitorID();if(t){var i=new XMLHttpRequest;i.open("GET","".concat("https://endpoint.finnpanel.fi","?ecid=").concat(t),!0),i.send(null)}var n=m(e.adobeLabels,e.isLive,e.id,e.isAudio),s=p(p({},y({autoplay:r,id:e.id,isContinuingWatching:e.isContinuingWatching,isMobile:u,labels:e.adobeLabels,language:e.language,loop:v,product:null==a?void 0:a.product,vsid:e.vsid})),a);V.trackSessionStart(n,s),L.setProps({hasSession:!0})}}else console.warn("YlePlayer - analytics error")},Y=function(){V.trackComplete(),V.trackSessionEnd(),L.setProps({hasSession:!1})},T.then((function(){F(),V.trackPlay()})),k((function(){F(),V.trackPlay()})),S((function(){F(),V.trackPause()})),P((function(){F(),L.getProps().isSeeking&&V.trackEvent(O),L.setProps({isSeeking:!0}),V.trackEvent(C)})),w((function(){F(),V.trackEvent(O),L.setProps({isSeeking:!1})})),D((function(){return Y()})),N&&N((function(e){Y(),L.setProps(e),F()}));case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}()}();